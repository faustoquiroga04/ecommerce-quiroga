(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var hh={exports:{}},Jo={},dh={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function u_(){if(qp)return Ae;qp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function A(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,$={};function M(L,Q,fe){this.props=L,this.context=Q,this.refs=$,this.updater=fe||N}M.prototype.isReactComponent={},M.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function K(){}K.prototype=M.prototype;function ne(L,Q,fe){this.props=L,this.context=Q,this.refs=$,this.updater=fe||N}var re=ne.prototype=new K;re.constructor=ne,j(re,M.prototype),re.isPureReactComponent=!0;var de=Array.isArray,Re=Object.prototype.hasOwnProperty,Te={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(L,Q,fe){var Ie,Se={},xe=null,Me=null;if(Q!=null)for(Ie in Q.ref!==void 0&&(Me=Q.ref),Q.key!==void 0&&(xe=""+Q.key),Q)Re.call(Q,Ie)&&!x.hasOwnProperty(Ie)&&(Se[Ie]=Q[Ie]);var Fe=arguments.length-2;if(Fe===1)Se.children=fe;else if(1<Fe){for(var Be=Array(Fe),gt=0;gt<Fe;gt++)Be[gt]=arguments[gt+2];Se.children=Be}if(L&&L.defaultProps)for(Ie in Fe=L.defaultProps,Fe)Se[Ie]===void 0&&(Se[Ie]=Fe[Ie]);return{$$typeof:i,type:L,key:xe,ref:Me,props:Se,_owner:Te.current}}function R(L,Q){return{$$typeof:i,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function D(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(fe){return Q[fe]})}var O=/\/+/g;function C(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):Q.toString(36)}function tt(L,Q,fe,Ie,Se){var xe=typeof L;(xe==="undefined"||xe==="boolean")&&(L=null);var Me=!1;if(L===null)Me=!0;else switch(xe){case"string":case"number":Me=!0;break;case"object":switch(L.$$typeof){case i:case e:Me=!0}}if(Me)return Me=L,Se=Se(Me),L=Ie===""?"."+C(Me,0):Ie,de(Se)?(fe="",L!=null&&(fe=L.replace(O,"$&/")+"/"),tt(Se,Q,fe,"",function(gt){return gt})):Se!=null&&(k(Se)&&(Se=R(Se,fe+(!Se.key||Me&&Me.key===Se.key?"":(""+Se.key).replace(O,"$&/")+"/")+L)),Q.push(Se)),1;if(Me=0,Ie=Ie===""?".":Ie+":",de(L))for(var Fe=0;Fe<L.length;Fe++){xe=L[Fe];var Be=Ie+C(xe,Fe);Me+=tt(xe,Q,fe,Be,Se)}else if(Be=A(L),typeof Be=="function")for(L=Be.call(L),Fe=0;!(xe=L.next()).done;)xe=xe.value,Be=Ie+C(xe,Fe++),Me+=tt(xe,Q,fe,Be,Se);else if(xe==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Me}function kt(L,Q,fe){if(L==null)return L;var Ie=[],Se=0;return tt(L,Ie,"","",function(xe){return Q.call(fe,xe,Se++)}),Ie}function xt(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(fe){(L._status===0||L._status===-1)&&(L._status=1,L._result=fe)},function(fe){(L._status===0||L._status===-1)&&(L._status=2,L._result=fe)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var ze={current:null},te={transition:null},me={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:te,ReactCurrentOwner:Te};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:kt,forEach:function(L,Q,fe){kt(L,function(){Q.apply(this,arguments)},fe)},count:function(L){var Q=0;return kt(L,function(){Q++}),Q},toArray:function(L){return kt(L,function(Q){return Q})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ae.Component=M,Ae.Fragment=n,Ae.Profiler=a,Ae.PureComponent=ne,Ae.StrictMode=s,Ae.Suspense=g,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ae.act=se,Ae.cloneElement=function(L,Q,fe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ie=j({},L.props),Se=L.key,xe=L.ref,Me=L._owner;if(Q!=null){if(Q.ref!==void 0&&(xe=Q.ref,Me=Te.current),Q.key!==void 0&&(Se=""+Q.key),L.type&&L.type.defaultProps)var Fe=L.type.defaultProps;for(Be in Q)Re.call(Q,Be)&&!x.hasOwnProperty(Be)&&(Ie[Be]=Q[Be]===void 0&&Fe!==void 0?Fe[Be]:Q[Be])}var Be=arguments.length-2;if(Be===1)Ie.children=fe;else if(1<Be){Fe=Array(Be);for(var gt=0;gt<Be;gt++)Fe[gt]=arguments[gt+2];Ie.children=Fe}return{$$typeof:i,type:L.type,key:Se,ref:xe,props:Ie,_owner:Me}},Ae.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:u,_context:L},L.Consumer=L},Ae.createElement=I,Ae.createFactory=function(L){var Q=I.bind(null,L);return Q.type=L,Q},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(L){return{$$typeof:m,render:L}},Ae.isValidElement=k,Ae.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:xt}},Ae.memo=function(L,Q){return{$$typeof:v,type:L,compare:Q===void 0?null:Q}},Ae.startTransition=function(L){var Q=te.transition;te.transition={};try{L()}finally{te.transition=Q}},Ae.unstable_act=se,Ae.useCallback=function(L,Q){return ze.current.useCallback(L,Q)},Ae.useContext=function(L){return ze.current.useContext(L)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(L){return ze.current.useDeferredValue(L)},Ae.useEffect=function(L,Q){return ze.current.useEffect(L,Q)},Ae.useId=function(){return ze.current.useId()},Ae.useImperativeHandle=function(L,Q,fe){return ze.current.useImperativeHandle(L,Q,fe)},Ae.useInsertionEffect=function(L,Q){return ze.current.useInsertionEffect(L,Q)},Ae.useLayoutEffect=function(L,Q){return ze.current.useLayoutEffect(L,Q)},Ae.useMemo=function(L,Q){return ze.current.useMemo(L,Q)},Ae.useReducer=function(L,Q,fe){return ze.current.useReducer(L,Q,fe)},Ae.useRef=function(L){return ze.current.useRef(L)},Ae.useState=function(L){return ze.current.useState(L)},Ae.useSyncExternalStore=function(L,Q,fe){return ze.current.useSyncExternalStore(L,Q,fe)},Ae.useTransition=function(){return ze.current.useTransition()},Ae.version="18.3.1",Ae}var Hp;function Xh(){return Hp||(Hp=1,dh.exports=u_()),dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp;function c_(){if(Wp)return Jo;Wp=1;var i=Xh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,v){var E,T={},A=null,N=null;v!==void 0&&(A=""+v),g.key!==void 0&&(A=""+g.key),g.ref!==void 0&&(N=g.ref);for(E in g)s.call(g,E)&&!u.hasOwnProperty(E)&&(T[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)T[E]===void 0&&(T[E]=g[E]);return{$$typeof:e,type:m,key:A,ref:N,props:T,_owner:a.current}}return Jo.Fragment=n,Jo.jsx=h,Jo.jsxs=h,Jo}var Qp;function h_(){return Qp||(Qp=1,hh.exports=c_()),hh.exports}var J=h_(),q=Xh(),Hl={},fh={exports:{}},Gt={},ph={exports:{}},mh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp;function d_(){return Kp||(Kp=1,function(i){function e(te,me){var se=te.length;te.push(me);e:for(;0<se;){var L=se-1>>>1,Q=te[L];if(0<a(Q,me))te[L]=me,te[se]=Q,se=L;else break e}}function n(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var me=te[0],se=te.pop();if(se!==me){te[0]=se;e:for(var L=0,Q=te.length,fe=Q>>>1;L<fe;){var Ie=2*(L+1)-1,Se=te[Ie],xe=Ie+1,Me=te[xe];if(0>a(Se,se))xe<Q&&0>a(Me,Se)?(te[L]=Me,te[xe]=se,L=xe):(te[L]=Se,te[Ie]=se,L=Ie);else if(xe<Q&&0>a(Me,se))te[L]=Me,te[xe]=se,L=xe;else break e}}return me}function a(te,me){var se=te.sortIndex-me.sortIndex;return se!==0?se:te.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var g=[],v=[],E=1,T=null,A=3,N=!1,j=!1,$=!1,M=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(te){for(var me=n(v);me!==null;){if(me.callback===null)s(v);else if(me.startTime<=te)s(v),me.sortIndex=me.expirationTime,e(g,me);else break;me=n(v)}}function de(te){if($=!1,re(te),!j)if(n(g)!==null)j=!0,xt(Re);else{var me=n(v);me!==null&&ze(de,me.startTime-te)}}function Re(te,me){j=!1,$&&($=!1,K(I),I=-1),N=!0;var se=A;try{for(re(me),T=n(g);T!==null&&(!(T.expirationTime>me)||te&&!D());){var L=T.callback;if(typeof L=="function"){T.callback=null,A=T.priorityLevel;var Q=L(T.expirationTime<=me);me=i.unstable_now(),typeof Q=="function"?T.callback=Q:T===n(g)&&s(g),re(me)}else s(g);T=n(g)}if(T!==null)var fe=!0;else{var Ie=n(v);Ie!==null&&ze(de,Ie.startTime-me),fe=!1}return fe}finally{T=null,A=se,N=!1}}var Te=!1,x=null,I=-1,R=5,k=-1;function D(){return!(i.unstable_now()-k<R)}function O(){if(x!==null){var te=i.unstable_now();k=te;var me=!0;try{me=x(!0,te)}finally{me?C():(Te=!1,x=null)}}else Te=!1}var C;if(typeof ne=="function")C=function(){ne(O)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,kt=tt.port2;tt.port1.onmessage=O,C=function(){kt.postMessage(null)}}else C=function(){M(O,0)};function xt(te){x=te,Te||(Te=!0,C())}function ze(te,me){I=M(function(){te(i.unstable_now())},me)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_continueExecution=function(){j||N||(j=!0,xt(Re))},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return n(g)},i.unstable_next=function(te){switch(A){case 1:case 2:case 3:var me=3;break;default:me=A}var se=A;A=me;try{return te()}finally{A=se}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var se=A;A=te;try{return me()}finally{A=se}},i.unstable_scheduleCallback=function(te,me,se){var L=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?L+se:L):se=L,te){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=se+Q,te={id:E++,callback:me,priorityLevel:te,startTime:se,expirationTime:Q,sortIndex:-1},se>L?(te.sortIndex=se,e(v,te),n(g)===null&&te===n(v)&&($?(K(I),I=-1):$=!0,ze(de,se-L))):(te.sortIndex=Q,e(g,te),j||N||(j=!0,xt(Re))),te},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(te){var me=A;return function(){var se=A;A=me;try{return te.apply(this,arguments)}finally{A=se}}}}(mh)),mh}var Gp;function f_(){return Gp||(Gp=1,ph.exports=d_()),ph.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function p_(){if(Yp)return Gt;Yp=1;var i=Xh(),e=f_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function u(t,r){h(t,r),h(t+"Capture",r)}function h(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function A(t){return g.call(T,t)?!0:g.call(E,t)?!1:v.test(t)?T[t]=!0:(E[t]=!0,!1)}function N(t,r,o,c){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j(t,r,o,c){if(r===null||typeof r>"u"||N(t,r,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function $(t,r,o,c,d,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){M[t]=new $(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];M[r]=new $(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){M[t]=new $(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){M[t]=new $(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){M[t]=new $(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){M[t]=new $(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){M[t]=new $(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){M[t]=new $(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){M[t]=new $(t,5,!1,t.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function ne(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(K,ne);M[r]=new $(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(K,ne);M[r]=new $(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(K,ne);M[r]=new $(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){M[t]=new $(t,1,!1,t.toLowerCase(),null,!1,!1)}),M.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){M[t]=new $(t,1,!1,t.toLowerCase(),null,!0,!0)});function re(t,r,o,c){var d=M.hasOwnProperty(r)?M[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(j(r,o,d,c)&&(o=null),c||d===null?A(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):d.mustUseProperty?t[d.propertyName]=o===null?d.type===3?!1:"":o:(r=d.attributeName,c=d.attributeNamespace,o===null?t.removeAttribute(r):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,c?t.setAttributeNS(c,r,o):t.setAttribute(r,o))))}var de=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Re=Symbol.for("react.element"),Te=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),te=Symbol.iterator;function me(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,L;function Q(t){if(L===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+t}var fe=!1;function Ie(t,r){if(!t||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(b){var c=b}Reflect.construct(t,[],r)}else{try{r.call()}catch(b){c=b}t.call(r.prototype)}else{try{throw Error()}catch(b){c=b}t()}}catch(b){if(b&&c&&typeof b.stack=="string"){for(var d=b.stack.split(`
`),p=c.stack.split(`
`),_=d.length-1,S=p.length-1;1<=_&&0<=S&&d[_]!==p[S];)S--;for(;1<=_&&0<=S;_--,S--)if(d[_]!==p[S]){if(_!==1||S!==1)do if(_--,S--,0>S||d[_]!==p[S]){var P=`
`+d[_].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=_&&0<=S);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Q(t):""}function Se(t){switch(t.tag){case 5:return Q(t.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return t=Ie(t.type,!1),t;case 11:return t=Ie(t.type.render,!1),t;case 1:return t=Ie(t.type,!0),t;default:return""}}function xe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case Te:return"Portal";case R:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case tt:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kt:return r=t.displayName||null,r!==null?r:xe(t.type)||"Memo";case xt:r=t._payload,t=t._init;try{return xe(t(r))}catch{}}return null}function Me(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Be(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gt(t){var r=Be(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Zn(t){t._valueTracker||(t._valueTracker=gt(t))}function $i(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=Be(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Tr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ai(t,r){var o=r.checked;return se({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function qi(t,r){var o=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;o=Fe(r.value!=null?r.value:o),t._wrapperState={initialChecked:c,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ro(t,r){r=r.checked,r!=null&&re(t,"checked",r,!1)}function io(t,r){ro(t,r);var o=Fe(r.value),c=r.type;if(o!=null)c==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Hi(t,r.type,o):r.hasOwnProperty("defaultValue")&&Hi(t,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function xa(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Hi(t,r,o){(r!=="number"||Tr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var er=Array.isArray;function tr(t,r,o,c){if(t=t.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<t.length;o++)d=r.hasOwnProperty("$"+t[o].value),t[o].selected!==d&&(t[o].selected=d),d&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Fe(o),r=null,d=0;d<t.length;d++){if(t[d].value===o){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function so(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return se({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(er(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Fe(o)}}function Qi(t,r){var o=Fe(r.value),c=Fe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),c!=null&&(t.defaultValue=""+c)}function oo(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ut(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ut(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nr,ao=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,c,d){MSApp.execUnsafeLocalFunction(function(){return t(r,o,c,d)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(nr=nr||document.createElement("div"),nr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=nr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Ir(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ui=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(t){ui.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),li[r]=li[t]})});function lo(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||li.hasOwnProperty(t)&&li[t]?(""+r).trim():r+"px"}function uo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var c=o.indexOf("--")===0,d=lo(o,r[o],c);o==="float"&&(o="cssFloat"),c?t.setProperty(o,d):t[o]=d}}var co=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ho(t,r){if(r){if(co[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function fo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ci=null;function Ki(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,ln=null,On=null;function Yi(t){if(t=Fo(t)){if(typeof Gi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=ol(r),Gi(t.stateNode,t.type,r))}}function Mn(t){ln?On?On.push(t):On=[t]:ln=t}function po(){if(ln){var t=ln,r=On;if(On=ln=null,Yi(t),r)for(t=0;t<r.length;t++)Yi(r[t])}}function hi(t,r){return t(r)}function mo(){}var rr=!1;function go(t,r,o){if(rr)return t(r,o);rr=!0;try{return hi(t,r,o)}finally{rr=!1,(ln!==null||On!==null)&&(mo(),po())}}function nt(t,r){var o=t.stateNode;if(o===null)return null;var c=ol(o);if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Xi=!1;if(m)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{Xi=!1}function di(t,r,o,c,d,p,_,S,P){var b=Array.prototype.slice.call(arguments,3);try{r.apply(o,b)}catch(Y){this.onError(Y)}}var fi=!1,Ji=null,En=!1,yo=null,ju={onError:function(t){fi=!0,Ji=t}};function Zi(t,r,o,c,d,p,_,S,P){fi=!1,Ji=null,di.apply(ju,arguments)}function Va(t,r,o,c,d,p,_,S,P){if(Zi.apply(this,arguments),fi){if(fi){var b=Ji;fi=!1,Ji=null}else throw Error(n(198));En||(En=!0,yo=b)}}function wn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function pi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Tn(t){if(wn(t)!==t)throw Error(n(188))}function Da(t){var r=t.alternate;if(!r){if(r=wn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,c=r;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return Tn(d),t;if(p===c)return Tn(d),r;p=p.sibling}throw Error(n(188))}if(o.return!==c.return)o=d,c=p;else{for(var _=!1,S=d.child;S;){if(S===o){_=!0,o=d,c=p;break}if(S===c){_=!0,c=d,o=p;break}S=S.sibling}if(!_){for(S=p.child;S;){if(S===o){_=!0,o=p,c=d;break}if(S===c){_=!0,c=p,o=d;break}S=S.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==c)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function vo(t){return t=Da(t),t!==null?es(t):null}function es(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=es(t);if(r!==null)return r;t=t.sibling}return null}var ts=e.unstable_scheduleCallback,_o=e.unstable_cancelCallback,Na=e.unstable_shouldYield,zu=e.unstable_requestPaint,$e=e.unstable_now,La=e.unstable_getCurrentPriorityLevel,mi=e.unstable_ImmediatePriority,Sr=e.unstable_UserBlockingPriority,un=e.unstable_NormalPriority,Eo=e.unstable_LowPriority,Oa=e.unstable_IdlePriority,gi=null,Jt=null;function Ma(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(gi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Ua,wo=Math.log,Fa=Math.LN2;function Ua(t){return t>>>=0,t===0?32:31-(wo(t)/Fa|0)|0}var ns=64,rs=4194304;function Ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yi(t,r){var o=t.pendingLanes;if(o===0)return 0;var c=0,d=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var S=_&~d;S!==0?c=Ar(S):(p&=_,p!==0&&(c=Ar(p)))}else _=o&~d,_!==0?c=Ar(_):p!==0&&(c=Ar(p));if(c===0)return 0;if(r!==0&&r!==c&&!(r&d)&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if(c&4&&(c|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=c;0<r;)o=31-Ut(r),d=1<<o,c|=t[o],r&=~d;return c}function bu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ir(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Ut(p),S=1<<_,P=d[_];P===-1?(!(S&o)||S&c)&&(d[_]=bu(S,r)):P<=r&&(t.expiredLanes|=S),p&=~S}}function Zt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vi(){var t=ns;return ns<<=1,!(ns&4194240)&&(ns=64),t}function Rr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Cr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=o}function be(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<o;){var d=31-Ut(o),p=1<<d;r[d]=0,c[d]=-1,t[d]=-1,o&=~p}}function Pr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-Ut(o),d=1<<c;d&r|t[c]&r&&(t[c]|=r),o&=~d}}var Pe=0;function kr(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ja,is,za,ba,Ba,To=!1,Fn=[],Tt=null,In=null,Sn=null,xr=new Map,cn=new Map,Un=[],Bu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $a(t,r){switch(t){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":xr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(r.pointerId)}}function Bt(t,r,o,c,d,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=Fo(r),r!==null&&is(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function $u(t,r,o,c,d){switch(r){case"focusin":return Tt=Bt(Tt,t,r,o,c,d),!0;case"dragenter":return In=Bt(In,t,r,o,c,d),!0;case"mouseover":return Sn=Bt(Sn,t,r,o,c,d),!0;case"pointerover":var p=d.pointerId;return xr.set(p,Bt(xr.get(p)||null,t,r,o,c,d)),!0;case"gotpointercapture":return p=d.pointerId,cn.set(p,Bt(cn.get(p)||null,t,r,o,c,d)),!0}return!1}function qa(t){var r=Ii(t.target);if(r!==null){var o=wn(r);if(o!==null){if(r=o.tag,r===13){if(r=pi(o),r!==null){t.blockedOn=r,Ba(t.priority,function(){za(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ss(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);ci=c,o.target.dispatchEvent(c),ci=null}else return r=Fo(o),r!==null&&is(r),t.blockedOn=o,!1;r.shift()}return!0}function _i(t,r,o){sr(t)&&o.delete(r)}function Ha(){To=!1,Tt!==null&&sr(Tt)&&(Tt=null),In!==null&&sr(In)&&(In=null),Sn!==null&&sr(Sn)&&(Sn=null),xr.forEach(_i),cn.forEach(_i)}function An(t,r){t.blockedOn===r&&(t.blockedOn=null,To||(To=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ha)))}function Rn(t){function r(d){return An(d,t)}if(0<Fn.length){An(Fn[0],t);for(var o=1;o<Fn.length;o++){var c=Fn[o];c.blockedOn===t&&(c.blockedOn=null)}}for(Tt!==null&&An(Tt,t),In!==null&&An(In,t),Sn!==null&&An(Sn,t),xr.forEach(r),cn.forEach(r),o=0;o<Un.length;o++)c=Un[o],c.blockedOn===t&&(c.blockedOn=null);for(;0<Un.length&&(o=Un[0],o.blockedOn===null);)qa(o),o.blockedOn===null&&Un.shift()}var or=de.ReactCurrentBatchConfig,Vr=!0;function Ke(t,r,o,c){var d=Pe,p=or.transition;or.transition=null;try{Pe=1,Io(t,r,o,c)}finally{Pe=d,or.transition=p}}function qu(t,r,o,c){var d=Pe,p=or.transition;or.transition=null;try{Pe=4,Io(t,r,o,c)}finally{Pe=d,or.transition=p}}function Io(t,r,o,c){if(Vr){var d=ss(t,r,o,c);if(d===null)tc(t,r,c,Ei,o),$a(t,c);else if($u(d,t,r,o,c))c.stopPropagation();else if($a(t,c),r&4&&-1<Bu.indexOf(t)){for(;d!==null;){var p=Fo(d);if(p!==null&&ja(p),p=ss(t,r,o,c),p===null&&tc(t,r,c,Ei,o),p===d)break;d=p}d!==null&&c.stopPropagation()}else tc(t,r,c,null,o)}}var Ei=null;function ss(t,r,o,c){if(Ei=null,t=Ki(c),t=Ii(t),t!==null)if(r=wn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=pi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ei=t,null}function So(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(La()){case mi:return 1;case Sr:return 4;case un:case Eo:return 16;case Oa:return 536870912;default:return 16}default:return 16}}var en=null,os=null,$t=null;function Ao(){if($t)return $t;var t,r=os,o=r.length,c,d="value"in en?en.value:en.textContent,p=d.length;for(t=0;t<o&&r[t]===d[t];t++);var _=o-t;for(c=1;c<=_&&r[o-c]===d[p-c];c++);return $t=d.slice(t,1<c?1-c:void 0)}function as(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function jn(){return!0}function Ro(){return!1}function It(t){function r(o,c,d,p,_){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(o=t[S],this[S]=o?o(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?jn:Ro,this.isPropagationStopped=Ro,this}return se(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=jn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=jn)},persist:function(){},isPersistent:jn}),r}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ls=It(Cn),zn=se({},Cn,{view:0,detail:0}),Hu=It(zn),us,ar,Dr,wi=se({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(us=t.screenX-Dr.screenX,ar=t.screenY-Dr.screenY):ar=us=0,Dr=t),us)},movementY:function(t){return"movementY"in t?t.movementY:ar}}),cs=It(wi),Co=se({},wi,{dataTransfer:0}),Wa=It(Co),hs=se({},zn,{relatedTarget:0}),ds=It(hs),Qa=se({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),lr=It(Qa),Ka=se({},Cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ga=It(Ka),Ya=se({},Cn,{data:0}),Po=It(Ya),fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ja(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Xa[t])?!!r[t]:!1}function bn(){return Ja}var l=se({},zn,{key:function(t){if(t.key){var r=fs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=as(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bn,charCode:function(t){return t.type==="keypress"?as(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?as(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=It(l),y=se({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=It(y),F=se({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bn}),B=It(F),ee=se({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=It(ee),ht=se({},wi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=It(ht),yt=[9,13,27,32],st=m&&"CompositionEvent"in window,hn=null;m&&"documentMode"in document&&(hn=document.documentMode);var tn=m&&"TextEvent"in window&&!hn,Ti=m&&(!st||hn&&8<hn&&11>=hn),ps=" ",Fd=!1;function Ud(t,r){switch(t){case"keyup":return yt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ms=!1;function ov(t,r){switch(t){case"compositionend":return jd(r);case"keypress":return r.which!==32?null:(Fd=!0,ps);case"textInput":return t=r.data,t===ps&&Fd?null:t;default:return null}}function av(t,r){if(ms)return t==="compositionend"||!st&&Ud(t,r)?(t=Ao(),$t=os=en=null,ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ti&&r.locale!=="ko"?null:r.data;default:return null}}var lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!lv[t.type]:r==="textarea"}function bd(t,r,o,c){Mn(c),r=rl(r,"onChange"),0<r.length&&(o=new ls("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var ko=null,xo=null;function uv(t){of(t,0)}function Za(t){var r=Es(t);if($i(r))return t}function cv(t,r){if(t==="change")return r}var Bd=!1;if(m){var Wu;if(m){var Qu="oninput"in document;if(!Qu){var $d=document.createElement("div");$d.setAttribute("oninput","return;"),Qu=typeof $d.oninput=="function"}Wu=Qu}else Wu=!1;Bd=Wu&&(!document.documentMode||9<document.documentMode)}function qd(){ko&&(ko.detachEvent("onpropertychange",Hd),xo=ko=null)}function Hd(t){if(t.propertyName==="value"&&Za(xo)){var r=[];bd(r,xo,t,Ki(t)),go(uv,r)}}function hv(t,r,o){t==="focusin"?(qd(),ko=r,xo=o,ko.attachEvent("onpropertychange",Hd)):t==="focusout"&&qd()}function dv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Za(xo)}function fv(t,r){if(t==="click")return Za(r)}function pv(t,r){if(t==="input"||t==="change")return Za(r)}function mv(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Pn=typeof Object.is=="function"?Object.is:mv;function Vo(t,r){if(Pn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!g.call(r,d)||!Pn(t[d],r[d]))return!1}return!0}function Wd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qd(t,r){var o=Wd(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Wd(o)}}function Kd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Kd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Gd(){for(var t=window,r=Tr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Tr(t.document)}return r}function Ku(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function gv(t){var r=Gd(),o=t.focusedElem,c=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Kd(o.ownerDocument.documentElement,o)){if(c!==null&&Ku(o)){if(r=c.start,t=c.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var d=o.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!t.extend&&p>c&&(d=c,c=p,p=d),d=Qd(o,p);var _=Qd(o,c);d&&_&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),t.removeAllRanges(),p>c?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yv=m&&"documentMode"in document&&11>=document.documentMode,gs=null,Gu=null,Do=null,Yu=!1;function Yd(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Yu||gs==null||gs!==Tr(c)||(c=gs,"selectionStart"in c&&Ku(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Do&&Vo(Do,c)||(Do=c,c=rl(Gu,"onSelect"),0<c.length&&(r=new ls("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=gs)))}function el(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var ys={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionend:el("Transition","TransitionEnd")},Xu={},Xd={};m&&(Xd=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function tl(t){if(Xu[t])return Xu[t];if(!ys[t])return t;var r=ys[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Xd)return Xu[t]=r[o];return t}var Jd=tl("animationend"),Zd=tl("animationiteration"),ef=tl("animationstart"),tf=tl("transitionend"),nf=new Map,rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,r){nf.set(t,r),u(r,[t])}for(var Ju=0;Ju<rf.length;Ju++){var Zu=rf[Ju],vv=Zu.toLowerCase(),_v=Zu[0].toUpperCase()+Zu.slice(1);Nr(vv,"on"+_v)}Nr(Jd,"onAnimationEnd"),Nr(Zd,"onAnimationIteration"),Nr(ef,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(tf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ev=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function sf(t,r,o){var c=t.type||"unknown-event";t.currentTarget=o,Va(c,r,void 0,t),t.currentTarget=null}function of(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var _=c.length-1;0<=_;_--){var S=c[_],P=S.instance,b=S.currentTarget;if(S=S.listener,P!==p&&d.isPropagationStopped())break e;sf(d,S,b),p=P}else for(_=0;_<c.length;_++){if(S=c[_],P=S.instance,b=S.currentTarget,S=S.listener,P!==p&&d.isPropagationStopped())break e;sf(d,S,b),p=P}}}if(En)throw t=yo,En=!1,yo=null,t}function He(t,r){var o=r[ac];o===void 0&&(o=r[ac]=new Set);var c=t+"__bubble";o.has(c)||(af(r,t,2,!1),o.add(c))}function ec(t,r,o){var c=0;r&&(c|=4),af(o,t,c,r)}var nl="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[nl]){t[nl]=!0,s.forEach(function(o){o!=="selectionchange"&&(Ev.has(o)||ec(o,!1,t),ec(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[nl]||(r[nl]=!0,ec("selectionchange",!1,r))}}function af(t,r,o,c){switch(So(r)){case 1:var d=Ke;break;case 4:d=qu;break;default:d=Io}o=d.bind(null,r,o,t),d=void 0,!Xi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(r,o,{capture:!0,passive:d}):t.addEventListener(r,o,!0):d!==void 0?t.addEventListener(r,o,{passive:d}):t.addEventListener(r,o,!1)}function tc(t,r,o,c,d){var p=c;if(!(r&1)&&!(r&2)&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;_=_.return}for(;S!==null;){if(_=Ii(S),_===null)return;if(P=_.tag,P===5||P===6){c=p=_;continue e}S=S.parentNode}}c=c.return}go(function(){var b=p,Y=Ki(o),X=[];e:{var G=nf.get(t);if(G!==void 0){var ie=ls,ue=t;switch(t){case"keypress":if(as(o)===0)break e;case"keydown":case"keyup":ie=f;break;case"focusin":ue="focus",ie=ds;break;case"focusout":ue="blur",ie=ds;break;case"beforeblur":case"afterblur":ie=ds;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Wa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=B;break;case Jd:case Zd:case ef:ie=lr;break;case tf:ie=je;break;case"scroll":ie=Hu;break;case"wheel":ie=Ve;break;case"copy":case"cut":case"paste":ie=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=w}var ce=(r&4)!==0,rt=!ce&&t==="scroll",U=ce?G!==null?G+"Capture":null:G;ce=[];for(var V=b,z;V!==null;){z=V;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,U!==null&&(Z=nt(V,U),Z!=null&&ce.push(Oo(V,Z,z)))),rt)break;V=V.return}0<ce.length&&(G=new ie(G,ue,null,o,Y),X.push({event:G,listeners:ce}))}}if(!(r&7)){e:{if(G=t==="mouseover"||t==="pointerover",ie=t==="mouseout"||t==="pointerout",G&&o!==ci&&(ue=o.relatedTarget||o.fromElement)&&(Ii(ue)||ue[ur]))break e;if((ie||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(ue=o.relatedTarget||o.toElement,ie=b,ue=ue?Ii(ue):null,ue!==null&&(rt=wn(ue),ue!==rt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=b),ie!==ue)){if(ce=cs,Z="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ce=w,Z="onPointerLeave",U="onPointerEnter",V="pointer"),rt=ie==null?G:Es(ie),z=ue==null?G:Es(ue),G=new ce(Z,V+"leave",ie,o,Y),G.target=rt,G.relatedTarget=z,Z=null,Ii(Y)===b&&(ce=new ce(U,V+"enter",ue,o,Y),ce.target=z,ce.relatedTarget=rt,Z=ce),rt=Z,ie&&ue)t:{for(ce=ie,U=ue,V=0,z=ce;z;z=vs(z))V++;for(z=0,Z=U;Z;Z=vs(Z))z++;for(;0<V-z;)ce=vs(ce),V--;for(;0<z-V;)U=vs(U),z--;for(;V--;){if(ce===U||U!==null&&ce===U.alternate)break t;ce=vs(ce),U=vs(U)}ce=null}else ce=null;ie!==null&&lf(X,G,ie,ce,!1),ue!==null&&rt!==null&&lf(X,rt,ue,ce,!0)}}e:{if(G=b?Es(b):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var he=cv;else if(zd(G))if(Bd)he=pv;else{he=dv;var ge=hv}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(he=fv);if(he&&(he=he(t,b))){bd(X,he,o,Y);break e}ge&&ge(t,G,b),t==="focusout"&&(ge=G._wrapperState)&&ge.controlled&&G.type==="number"&&Hi(G,"number",G.value)}switch(ge=b?Es(b):window,t){case"focusin":(zd(ge)||ge.contentEditable==="true")&&(gs=ge,Gu=b,Do=null);break;case"focusout":Do=Gu=gs=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Yd(X,o,Y);break;case"selectionchange":if(yv)break;case"keydown":case"keyup":Yd(X,o,Y)}var ye;if(st)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else ms?Ud(t,o)&&(ve="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ve="onCompositionStart");ve&&(Ti&&o.locale!=="ko"&&(ms||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&ms&&(ye=Ao()):(en=Y,os="value"in en?en.value:en.textContent,ms=!0)),ge=rl(b,ve),0<ge.length&&(ve=new Po(ve,t,null,o,Y),X.push({event:ve,listeners:ge}),ye?ve.data=ye:(ye=jd(o),ye!==null&&(ve.data=ye)))),(ye=tn?ov(t,o):av(t,o))&&(b=rl(b,"onBeforeInput"),0<b.length&&(Y=new Po("onBeforeInput","beforeinput",null,o,Y),X.push({event:Y,listeners:b}),Y.data=ye))}of(X,r)})}function Oo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function rl(t,r){for(var o=r+"Capture",c=[];t!==null;){var d=t,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=nt(t,o),p!=null&&c.unshift(Oo(t,p,d)),p=nt(t,r),p!=null&&c.push(Oo(t,p,d))),t=t.return}return c}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lf(t,r,o,c,d){for(var p=r._reactName,_=[];o!==null&&o!==c;){var S=o,P=S.alternate,b=S.stateNode;if(P!==null&&P===c)break;S.tag===5&&b!==null&&(S=b,d?(P=nt(o,p),P!=null&&_.unshift(Oo(o,P,S))):d||(P=nt(o,p),P!=null&&_.push(Oo(o,P,S)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var wv=/\r\n?/g,Tv=/\u0000|\uFFFD/g;function uf(t){return(typeof t=="string"?t:""+t).replace(wv,`
`).replace(Tv,"")}function il(t,r,o){if(r=uf(r),uf(t)!==r&&o)throw Error(n(425))}function sl(){}var nc=null,rc=null;function ic(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var sc=typeof setTimeout=="function"?setTimeout:void 0,Iv=typeof clearTimeout=="function"?clearTimeout:void 0,cf=typeof Promise=="function"?Promise:void 0,Sv=typeof queueMicrotask=="function"?queueMicrotask:typeof cf<"u"?function(t){return cf.resolve(null).then(t).catch(Av)}:sc;function Av(t){setTimeout(function(){throw t})}function oc(t,r){var o=r,c=0;do{var d=o.nextSibling;if(t.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(c===0){t.removeChild(d),Rn(r);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=d}while(o);Rn(r)}function Lr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function hf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var _s=Math.random().toString(36).slice(2),Bn="__reactFiber$"+_s,Mo="__reactProps$"+_s,ur="__reactContainer$"+_s,ac="__reactEvents$"+_s,Rv="__reactListeners$"+_s,Cv="__reactHandles$"+_s;function Ii(t){var r=t[Bn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[ur]||o[Bn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=hf(t);t!==null;){if(o=t[Bn])return o;t=hf(t)}return r}t=o,o=t.parentNode}return null}function Fo(t){return t=t[Bn]||t[ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function ol(t){return t[Mo]||null}var lc=[],ws=-1;function Or(t){return{current:t}}function We(t){0>ws||(t.current=lc[ws],lc[ws]=null,ws--)}function qe(t,r){ws++,lc[ws]=t.current,t.current=r}var Mr={},Vt=Or(Mr),qt=Or(!1),Si=Mr;function Ts(t,r){var o=t.type.contextTypes;if(!o)return Mr;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in o)d[p]=r[p];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function Ht(t){return t=t.childContextTypes,t!=null}function al(){We(qt),We(Vt)}function df(t,r,o){if(Vt.current!==Mr)throw Error(n(168));qe(Vt,r),qe(qt,o)}function ff(t,r,o){var c=t.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(n(108,Me(t)||"Unknown",d));return se({},o,c)}function ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,Si=Vt.current,qe(Vt,t),qe(qt,qt.current),!0}function pf(t,r,o){var c=t.stateNode;if(!c)throw Error(n(169));o?(t=ff(t,r,Si),c.__reactInternalMemoizedMergedChildContext=t,We(qt),We(Vt),qe(Vt,t)):We(qt),qe(qt,o)}var cr=null,ul=!1,uc=!1;function mf(t){cr===null?cr=[t]:cr.push(t)}function Pv(t){ul=!0,mf(t)}function Fr(){if(!uc&&cr!==null){uc=!0;var t=0,r=Pe;try{var o=cr;for(Pe=1;t<o.length;t++){var c=o[t];do c=c(!0);while(c!==null)}cr=null,ul=!1}catch(d){throw cr!==null&&(cr=cr.slice(t+1)),ts(mi,Fr),d}finally{Pe=r,uc=!1}}return null}var Is=[],Ss=0,cl=null,hl=0,dn=[],fn=0,Ai=null,hr=1,dr="";function Ri(t,r){Is[Ss++]=hl,Is[Ss++]=cl,cl=t,hl=r}function gf(t,r,o){dn[fn++]=hr,dn[fn++]=dr,dn[fn++]=Ai,Ai=t;var c=hr;t=dr;var d=32-Ut(c)-1;c&=~(1<<d),o+=1;var p=32-Ut(r)+d;if(30<p){var _=d-d%5;p=(c&(1<<_)-1).toString(32),c>>=_,d-=_,hr=1<<32-Ut(r)+d|o<<d|c,dr=p+t}else hr=1<<p|o<<d|c,dr=t}function cc(t){t.return!==null&&(Ri(t,1),gf(t,1,0))}function hc(t){for(;t===cl;)cl=Is[--Ss],Is[Ss]=null,hl=Is[--Ss],Is[Ss]=null;for(;t===Ai;)Ai=dn[--fn],dn[fn]=null,dr=dn[--fn],dn[fn]=null,hr=dn[--fn],dn[fn]=null}var nn=null,rn=null,Ge=!1,kn=null;function yf(t,r){var o=yn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function vf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,nn=t,rn=Lr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,nn=t,rn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ai!==null?{id:hr,overflow:dr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=yn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,nn=t,rn=null,!0):!1;default:return!1}}function dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fc(t){if(Ge){var r=rn;if(r){var o=r;if(!vf(t,r)){if(dc(t))throw Error(n(418));r=Lr(o.nextSibling);var c=nn;r&&vf(t,r)?yf(c,o):(t.flags=t.flags&-4097|2,Ge=!1,nn=t)}}else{if(dc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ge=!1,nn=t}}}function _f(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function dl(t){if(t!==nn)return!1;if(!Ge)return _f(t),Ge=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!ic(t.type,t.memoizedProps)),r&&(r=rn)){if(dc(t))throw Ef(),Error(n(418));for(;r;)yf(t,r),r=Lr(r.nextSibling)}if(_f(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){rn=Lr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}rn=null}}else rn=nn?Lr(t.stateNode.nextSibling):null;return!0}function Ef(){for(var t=rn;t;)t=Lr(t.nextSibling)}function As(){rn=nn=null,Ge=!1}function pc(t){kn===null?kn=[t]:kn.push(t)}var kv=de.ReactCurrentBatchConfig;function Uo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var c=o.stateNode}if(!c)throw Error(n(147,t));var d=c,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var S=d.refs;_===null?delete S[p]:S[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function fl(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function wf(t){var r=t._init;return r(t._payload)}function Tf(t){function r(U,V){if(t){var z=U.deletions;z===null?(U.deletions=[V],U.flags|=16):z.push(V)}}function o(U,V){if(!t)return null;for(;V!==null;)r(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function d(U,V){return U=Hr(U,V),U.index=0,U.sibling=null,U}function p(U,V,z){return U.index=z,t?(z=U.alternate,z!==null?(z=z.index,z<V?(U.flags|=2,V):z):(U.flags|=2,V)):(U.flags|=1048576,V)}function _(U){return t&&U.alternate===null&&(U.flags|=2),U}function S(U,V,z,Z){return V===null||V.tag!==6?(V=sh(z,U.mode,Z),V.return=U,V):(V=d(V,z),V.return=U,V)}function P(U,V,z,Z){var he=z.type;return he===x?Y(U,V,z.props.children,Z,z.key):V!==null&&(V.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===xt&&wf(he)===V.type)?(Z=d(V,z.props),Z.ref=Uo(U,V,z),Z.return=U,Z):(Z=Fl(z.type,z.key,z.props,null,U.mode,Z),Z.ref=Uo(U,V,z),Z.return=U,Z)}function b(U,V,z,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=oh(z,U.mode,Z),V.return=U,V):(V=d(V,z.children||[]),V.return=U,V)}function Y(U,V,z,Z,he){return V===null||V.tag!==7?(V=Li(z,U.mode,Z,he),V.return=U,V):(V=d(V,z),V.return=U,V)}function X(U,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=sh(""+V,U.mode,z),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Re:return z=Fl(V.type,V.key,V.props,null,U.mode,z),z.ref=Uo(U,null,V),z.return=U,z;case Te:return V=oh(V,U.mode,z),V.return=U,V;case xt:var Z=V._init;return X(U,Z(V._payload),z)}if(er(V)||me(V))return V=Li(V,U.mode,z,null),V.return=U,V;fl(U,V)}return null}function G(U,V,z,Z){var he=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return he!==null?null:S(U,V,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Re:return z.key===he?P(U,V,z,Z):null;case Te:return z.key===he?b(U,V,z,Z):null;case xt:return he=z._init,G(U,V,he(z._payload),Z)}if(er(z)||me(z))return he!==null?null:Y(U,V,z,Z,null);fl(U,z)}return null}function ie(U,V,z,Z,he){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return U=U.get(z)||null,S(V,U,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Re:return U=U.get(Z.key===null?z:Z.key)||null,P(V,U,Z,he);case Te:return U=U.get(Z.key===null?z:Z.key)||null,b(V,U,Z,he);case xt:var ge=Z._init;return ie(U,V,z,ge(Z._payload),he)}if(er(Z)||me(Z))return U=U.get(z)||null,Y(V,U,Z,he,null);fl(V,Z)}return null}function ue(U,V,z,Z){for(var he=null,ge=null,ye=V,ve=V=0,Et=null;ye!==null&&ve<z.length;ve++){ye.index>ve?(Et=ye,ye=null):Et=ye.sibling;var Oe=G(U,ye,z[ve],Z);if(Oe===null){ye===null&&(ye=Et);break}t&&ye&&Oe.alternate===null&&r(U,ye),V=p(Oe,V,ve),ge===null?he=Oe:ge.sibling=Oe,ge=Oe,ye=Et}if(ve===z.length)return o(U,ye),Ge&&Ri(U,ve),he;if(ye===null){for(;ve<z.length;ve++)ye=X(U,z[ve],Z),ye!==null&&(V=p(ye,V,ve),ge===null?he=ye:ge.sibling=ye,ge=ye);return Ge&&Ri(U,ve),he}for(ye=c(U,ye);ve<z.length;ve++)Et=ie(ye,U,ve,z[ve],Z),Et!==null&&(t&&Et.alternate!==null&&ye.delete(Et.key===null?ve:Et.key),V=p(Et,V,ve),ge===null?he=Et:ge.sibling=Et,ge=Et);return t&&ye.forEach(function(Wr){return r(U,Wr)}),Ge&&Ri(U,ve),he}function ce(U,V,z,Z){var he=me(z);if(typeof he!="function")throw Error(n(150));if(z=he.call(z),z==null)throw Error(n(151));for(var ge=he=null,ye=V,ve=V=0,Et=null,Oe=z.next();ye!==null&&!Oe.done;ve++,Oe=z.next()){ye.index>ve?(Et=ye,ye=null):Et=ye.sibling;var Wr=G(U,ye,Oe.value,Z);if(Wr===null){ye===null&&(ye=Et);break}t&&ye&&Wr.alternate===null&&r(U,ye),V=p(Wr,V,ve),ge===null?he=Wr:ge.sibling=Wr,ge=Wr,ye=Et}if(Oe.done)return o(U,ye),Ge&&Ri(U,ve),he;if(ye===null){for(;!Oe.done;ve++,Oe=z.next())Oe=X(U,Oe.value,Z),Oe!==null&&(V=p(Oe,V,ve),ge===null?he=Oe:ge.sibling=Oe,ge=Oe);return Ge&&Ri(U,ve),he}for(ye=c(U,ye);!Oe.done;ve++,Oe=z.next())Oe=ie(ye,U,ve,Oe.value,Z),Oe!==null&&(t&&Oe.alternate!==null&&ye.delete(Oe.key===null?ve:Oe.key),V=p(Oe,V,ve),ge===null?he=Oe:ge.sibling=Oe,ge=Oe);return t&&ye.forEach(function(l_){return r(U,l_)}),Ge&&Ri(U,ve),he}function rt(U,V,z,Z){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Re:e:{for(var he=z.key,ge=V;ge!==null;){if(ge.key===he){if(he=z.type,he===x){if(ge.tag===7){o(U,ge.sibling),V=d(ge,z.props.children),V.return=U,U=V;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===xt&&wf(he)===ge.type){o(U,ge.sibling),V=d(ge,z.props),V.ref=Uo(U,ge,z),V.return=U,U=V;break e}o(U,ge);break}else r(U,ge);ge=ge.sibling}z.type===x?(V=Li(z.props.children,U.mode,Z,z.key),V.return=U,U=V):(Z=Fl(z.type,z.key,z.props,null,U.mode,Z),Z.ref=Uo(U,V,z),Z.return=U,U=Z)}return _(U);case Te:e:{for(ge=z.key;V!==null;){if(V.key===ge)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){o(U,V.sibling),V=d(V,z.children||[]),V.return=U,U=V;break e}else{o(U,V);break}else r(U,V);V=V.sibling}V=oh(z,U.mode,Z),V.return=U,U=V}return _(U);case xt:return ge=z._init,rt(U,V,ge(z._payload),Z)}if(er(z))return ue(U,V,z,Z);if(me(z))return ce(U,V,z,Z);fl(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(o(U,V.sibling),V=d(V,z),V.return=U,U=V):(o(U,V),V=sh(z,U.mode,Z),V.return=U,U=V),_(U)):o(U,V)}return rt}var Rs=Tf(!0),If=Tf(!1),pl=Or(null),ml=null,Cs=null,mc=null;function gc(){mc=Cs=ml=null}function yc(t){var r=pl.current;We(pl),t._currentValue=r}function vc(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Ps(t,r){ml=t,mc=Cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Wt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(mc!==t)if(t={context:t,memoizedValue:r,next:null},Cs===null){if(ml===null)throw Error(n(308));Cs=t,ml.dependencies={lanes:0,firstContext:t}}else Cs=Cs.next=t;return r}var Ci=null;function _c(t){Ci===null?Ci=[t]:Ci.push(t)}function Sf(t,r,o,c){var d=r.interleaved;return d===null?(o.next=o,_c(r)):(o.next=d.next,d.next=o),r.interleaved=o,fr(t,c)}function fr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ur=!1;function Ec(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Af(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function jr(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,Le&2){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,fr(t,o)}return d=c.interleaved,d===null?(r.next=r,_c(c)):(r.next=d.next,d.next=r),c.interleaved=r,fr(t,o)}function gl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Pr(t,o)}}function Rf(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?d=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?d=p=r:p=p.next=r}else d=p=r;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function yl(t,r,o,c){var d=t.updateQueue;Ur=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var P=S,b=P.next;P.next=null,_===null?p=b:_.next=b,_=P;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==_&&(S===null?Y.firstBaseUpdate=b:S.next=b,Y.lastBaseUpdate=P))}if(p!==null){var X=d.baseState;_=0,Y=b=P=null,S=p;do{var G=S.lane,ie=S.eventTime;if((c&G)===G){Y!==null&&(Y=Y.next={eventTime:ie,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ue=t,ce=S;switch(G=r,ie=o,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){X=ue.call(ie,X,G);break e}X=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,G=typeof ue=="function"?ue.call(ie,X,G):ue,G==null)break e;X=se({},X,G);break e;case 2:Ur=!0}}S.callback!==null&&S.lane!==0&&(t.flags|=64,G=d.effects,G===null?d.effects=[S]:G.push(S))}else ie={eventTime:ie,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?(b=Y=ie,P=X):Y=Y.next=ie,_|=G;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;G=S,S=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Y===null&&(P=X),d.baseState=P,d.firstBaseUpdate=b,d.lastBaseUpdate=Y,r=d.shared.interleaved,r!==null){d=r;do _|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);xi|=_,t.lanes=_,t.memoizedState=X}}function Cf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var c=t[r],d=c.callback;if(d!==null){if(c.callback=null,c=o,typeof d!="function")throw Error(n(191,d));d.call(c)}}}var jo={},$n=Or(jo),zo=Or(jo),bo=Or(jo);function Pi(t){if(t===jo)throw Error(n(174));return t}function wc(t,r){switch(qe(bo,r),qe(zo,t),qe($n,jo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ct(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ct(r,t)}We($n),qe($n,r)}function ks(){We($n),We(zo),We(bo)}function Pf(t){Pi(bo.current);var r=Pi($n.current),o=ct(r,t.type);r!==o&&(qe(zo,t),qe($n,o))}function Tc(t){zo.current===t&&(We($n),We(zo))}var Ye=Or(0);function vl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ic=[];function Sc(){for(var t=0;t<Ic.length;t++)Ic[t]._workInProgressVersionPrimary=null;Ic.length=0}var _l=de.ReactCurrentDispatcher,Ac=de.ReactCurrentBatchConfig,ki=0,Xe=null,dt=null,vt=null,El=!1,Bo=!1,$o=0,xv=0;function Dt(){throw Error(n(321))}function Rc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Pn(t[o],r[o]))return!1;return!0}function Cc(t,r,o,c,d,p){if(ki=p,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,_l.current=t===null||t.memoizedState===null?Lv:Ov,t=o(c,d),Bo){p=0;do{if(Bo=!1,$o=0,25<=p)throw Error(n(301));p+=1,vt=dt=null,r.updateQueue=null,_l.current=Mv,t=o(c,d)}while(Bo)}if(_l.current=Il,r=dt!==null&&dt.next!==null,ki=0,vt=dt=Xe=null,El=!1,r)throw Error(n(300));return t}function Pc(){var t=$o!==0;return $o=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Xe.memoizedState=vt=t:vt=vt.next=t,vt}function mn(){if(dt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var r=vt===null?Xe.memoizedState:vt.next;if(r!==null)vt=r,dt=t;else{if(t===null)throw Error(n(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},vt===null?Xe.memoizedState=vt=t:vt=vt.next=t}return vt}function qo(t,r){return typeof r=="function"?r(t):r}function kc(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=dt,d=c.baseQueue,p=o.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}c.baseQueue=d=p,o.pending=null}if(d!==null){p=d.next,c=c.baseState;var S=_=null,P=null,b=p;do{var Y=b.lane;if((ki&Y)===Y)P!==null&&(P=P.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),c=b.hasEagerState?b.eagerState:t(c,b.action);else{var X={lane:Y,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};P===null?(S=P=X,_=c):P=P.next=X,Xe.lanes|=Y,xi|=Y}b=b.next}while(b!==null&&b!==p);P===null?_=c:P.next=S,Pn(c,r.memoizedState)||(Wt=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=P,o.lastRenderedState=c}if(t=o.interleaved,t!==null){d=t;do p=d.lane,Xe.lanes|=p,xi|=p,d=d.next;while(d!==t)}else d===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function xc(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=o.dispatch,d=o.pending,p=r.memoizedState;if(d!==null){o.pending=null;var _=d=d.next;do p=t(p,_.action),_=_.next;while(_!==d);Pn(p,r.memoizedState)||(Wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,c]}function kf(){}function xf(t,r){var o=Xe,c=mn(),d=r(),p=!Pn(c.memoizedState,d);if(p&&(c.memoizedState=d,Wt=!0),c=c.queue,Vc(Nf.bind(null,o,c,t),[t]),c.getSnapshot!==r||p||vt!==null&&vt.memoizedState.tag&1){if(o.flags|=2048,Ho(9,Df.bind(null,o,c,d,r),void 0,null),_t===null)throw Error(n(349));ki&30||Vf(o,r,d)}return d}function Vf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Df(t,r,o,c){r.value=o,r.getSnapshot=c,Lf(r)&&Of(t)}function Nf(t,r,o){return o(function(){Lf(r)&&Of(t)})}function Lf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Pn(t,o)}catch{return!0}}function Of(t){var r=fr(t,1);r!==null&&Nn(r,t,1,-1)}function Mf(t){var r=qn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:t},r.queue=t,t=t.dispatch=Nv.bind(null,Xe,t),[r.memoizedState,t]}function Ho(t,r,o,c){return t={tag:t,create:r,destroy:o,deps:c,next:null},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t)),t}function Ff(){return mn().memoizedState}function wl(t,r,o,c){var d=qn();Xe.flags|=t,d.memoizedState=Ho(1|r,o,void 0,c===void 0?null:c)}function Tl(t,r,o,c){var d=mn();c=c===void 0?null:c;var p=void 0;if(dt!==null){var _=dt.memoizedState;if(p=_.destroy,c!==null&&Rc(c,_.deps)){d.memoizedState=Ho(r,o,p,c);return}}Xe.flags|=t,d.memoizedState=Ho(1|r,o,p,c)}function Uf(t,r){return wl(8390656,8,t,r)}function Vc(t,r){return Tl(2048,8,t,r)}function jf(t,r){return Tl(4,2,t,r)}function zf(t,r){return Tl(4,4,t,r)}function bf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Bf(t,r,o){return o=o!=null?o.concat([t]):null,Tl(4,4,bf.bind(null,r,t),o)}function Dc(){}function $f(t,r){var o=mn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&Rc(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function qf(t,r){var o=mn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&Rc(r,c[1])?c[0]:(t=t(),o.memoizedState=[t,r],t)}function Hf(t,r,o){return ki&21?(Pn(o,r)||(o=vi(),Xe.lanes|=o,xi|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=o)}function Vv(t,r){var o=Pe;Pe=o!==0&&4>o?o:4,t(!0);var c=Ac.transition;Ac.transition={};try{t(!1),r()}finally{Pe=o,Ac.transition=c}}function Wf(){return mn().memoizedState}function Dv(t,r,o){var c=$r(t);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},Qf(t))Kf(r,o);else if(o=Sf(t,r,o,c),o!==null){var d=bt();Nn(o,t,c,d),Gf(o,r,c)}}function Nv(t,r,o){var c=$r(t),d={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qf(t))Kf(r,d);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,S=p(_,o);if(d.hasEagerState=!0,d.eagerState=S,Pn(S,_)){var P=r.interleaved;P===null?(d.next=d,_c(r)):(d.next=P.next,P.next=d),r.interleaved=d;return}}catch{}finally{}o=Sf(t,r,d,c),o!==null&&(d=bt(),Nn(o,t,c,d),Gf(o,r,c))}}function Qf(t){var r=t.alternate;return t===Xe||r!==null&&r===Xe}function Kf(t,r){Bo=El=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Gf(t,r,o){if(o&4194240){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Pr(t,o)}}var Il={readContext:pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Lv={readContext:pn,useCallback:function(t,r){return qn().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:Uf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,wl(4194308,4,bf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return wl(4194308,4,t,r)},useInsertionEffect:function(t,r){return wl(4,2,t,r)},useMemo:function(t,r){var o=qn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var c=qn();return r=o!==void 0?o(r):r,c.memoizedState=c.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},c.queue=t,t=t.dispatch=Dv.bind(null,Xe,t),[c.memoizedState,t]},useRef:function(t){var r=qn();return t={current:t},r.memoizedState=t},useState:Mf,useDebugValue:Dc,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=Mf(!1),r=t[0];return t=Vv.bind(null,t[1]),qn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var c=Xe,d=qn();if(Ge){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),_t===null)throw Error(n(349));ki&30||Vf(c,r,o)}d.memoizedState=o;var p={value:o,getSnapshot:r};return d.queue=p,Uf(Nf.bind(null,c,p,t),[t]),c.flags|=2048,Ho(9,Df.bind(null,c,p,o,r),void 0,null),o},useId:function(){var t=qn(),r=_t.identifierPrefix;if(Ge){var o=dr,c=hr;o=(c&~(1<<32-Ut(c)-1)).toString(32)+o,r=":"+r+"R"+o,o=$o++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=xv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Ov={readContext:pn,useCallback:$f,useContext:pn,useEffect:Vc,useImperativeHandle:Bf,useInsertionEffect:jf,useLayoutEffect:zf,useMemo:qf,useReducer:kc,useRef:Ff,useState:function(){return kc(qo)},useDebugValue:Dc,useDeferredValue:function(t){var r=mn();return Hf(r,dt.memoizedState,t)},useTransition:function(){var t=kc(qo)[0],r=mn().memoizedState;return[t,r]},useMutableSource:kf,useSyncExternalStore:xf,useId:Wf,unstable_isNewReconciler:!1},Mv={readContext:pn,useCallback:$f,useContext:pn,useEffect:Vc,useImperativeHandle:Bf,useInsertionEffect:jf,useLayoutEffect:zf,useMemo:qf,useReducer:xc,useRef:Ff,useState:function(){return xc(qo)},useDebugValue:Dc,useDeferredValue:function(t){var r=mn();return dt===null?r.memoizedState=t:Hf(r,dt.memoizedState,t)},useTransition:function(){var t=xc(qo)[0],r=mn().memoizedState;return[t,r]},useMutableSource:kf,useSyncExternalStore:xf,useId:Wf,unstable_isNewReconciler:!1};function xn(t,r){if(t&&t.defaultProps){r=se({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Nc(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:se({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Sl={isMounted:function(t){return(t=t._reactInternals)?wn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var c=bt(),d=$r(t),p=pr(c,d);p.payload=r,o!=null&&(p.callback=o),r=jr(t,p,d),r!==null&&(Nn(r,t,d,c),gl(r,t,d))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=bt(),d=$r(t),p=pr(c,d);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=jr(t,p,d),r!==null&&(Nn(r,t,d,c),gl(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=bt(),c=$r(t),d=pr(o,c);d.tag=2,r!=null&&(d.callback=r),r=jr(t,d,c),r!==null&&(Nn(r,t,c,o),gl(r,t,c))}};function Yf(t,r,o,c,d,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,p,_):r.prototype&&r.prototype.isPureReactComponent?!Vo(o,c)||!Vo(d,p):!0}function Xf(t,r,o){var c=!1,d=Mr,p=r.contextType;return typeof p=="object"&&p!==null?p=pn(p):(d=Ht(r)?Si:Vt.current,c=r.contextTypes,p=(c=c!=null)?Ts(t,d):Mr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Sl,t.stateNode=r,r._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=p),r}function Jf(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&Sl.enqueueReplaceState(r,r.state,null)}function Lc(t,r,o,c){var d=t.stateNode;d.props=o,d.state=t.memoizedState,d.refs={},Ec(t);var p=r.contextType;typeof p=="object"&&p!==null?d.context=pn(p):(p=Ht(r)?Si:Vt.current,d.context=Ts(t,p)),d.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Nc(t,r,p,o),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Sl.enqueueReplaceState(d,d.state,null),yl(t,o,d,c),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function xs(t,r){try{var o="",c=r;do o+=Se(c),c=c.return;while(c);var d=o}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:d,digest:null}}function Oc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Mc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Fv=typeof WeakMap=="function"?WeakMap:Map;function Zf(t,r,o){o=pr(-1,o),o.tag=3,o.payload={element:null};var c=r.value;return o.callback=function(){Vl||(Vl=!0,Xc=c),Mc(t,r)},o}function ep(t,r,o){o=pr(-1,o),o.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;o.payload=function(){return c(d)},o.callback=function(){Mc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){Mc(t,r),typeof c!="function"&&(br===null?br=new Set([this]):br.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function tp(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new Fv;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(o)||(d.add(o),t=Xv.bind(null,t,r,o),r.then(t,t))}function np(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function rp(t,r,o,c,d){return t.mode&1?(t.flags|=65536,t.lanes=d,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=pr(-1,1),r.tag=2,jr(o,r,1))),o.lanes|=1),t)}var Uv=de.ReactCurrentOwner,Wt=!1;function zt(t,r,o,c){r.child=t===null?If(r,null,o,c):Rs(r,t.child,o,c)}function ip(t,r,o,c,d){o=o.render;var p=r.ref;return Ps(r,d),c=Cc(t,r,o,c,p,d),o=Pc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,mr(t,r,d)):(Ge&&o&&cc(r),r.flags|=1,zt(t,r,c,d),r.child)}function sp(t,r,o,c,d){if(t===null){var p=o.type;return typeof p=="function"&&!ih(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,op(t,r,p,c,d)):(t=Fl(o.type,null,c,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&d)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:Vo,o(_,c)&&t.ref===r.ref)return mr(t,r,d)}return r.flags|=1,t=Hr(p,c),t.ref=r.ref,t.return=r,r.child=t}function op(t,r,o,c,d){if(t!==null){var p=t.memoizedProps;if(Vo(p,c)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=c=p,(t.lanes&d)!==0)t.flags&131072&&(Wt=!0);else return r.lanes=t.lanes,mr(t,r,d)}return Fc(t,r,o,c,d)}function ap(t,r,o){var c=r.pendingProps,d=c.children,p=t!==null?t.memoizedState:null;if(c.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Ds,sn),sn|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(Ds,sn),sn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:o,qe(Ds,sn),sn|=c}else p!==null?(c=p.baseLanes|o,r.memoizedState=null):c=o,qe(Ds,sn),sn|=c;return zt(t,r,d,o),r.child}function lp(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Fc(t,r,o,c,d){var p=Ht(o)?Si:Vt.current;return p=Ts(r,p),Ps(r,d),o=Cc(t,r,o,c,p,d),c=Pc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,mr(t,r,d)):(Ge&&c&&cc(r),r.flags|=1,zt(t,r,o,d),r.child)}function up(t,r,o,c,d){if(Ht(o)){var p=!0;ll(r)}else p=!1;if(Ps(r,d),r.stateNode===null)Rl(t,r),Xf(r,o,c),Lc(r,o,c,d),c=!0;else if(t===null){var _=r.stateNode,S=r.memoizedProps;_.props=S;var P=_.context,b=o.contextType;typeof b=="object"&&b!==null?b=pn(b):(b=Ht(o)?Si:Vt.current,b=Ts(r,b));var Y=o.getDerivedStateFromProps,X=typeof Y=="function"||typeof _.getSnapshotBeforeUpdate=="function";X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==c||P!==b)&&Jf(r,_,c,b),Ur=!1;var G=r.memoizedState;_.state=G,yl(r,c,_,d),P=r.memoizedState,S!==c||G!==P||qt.current||Ur?(typeof Y=="function"&&(Nc(r,o,Y,c),P=r.memoizedState),(S=Ur||Yf(r,o,S,c,G,P,b))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=P),_.props=c,_.state=P,_.context=b,c=S):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Af(t,r),S=r.memoizedProps,b=r.type===r.elementType?S:xn(r.type,S),_.props=b,X=r.pendingProps,G=_.context,P=o.contextType,typeof P=="object"&&P!==null?P=pn(P):(P=Ht(o)?Si:Vt.current,P=Ts(r,P));var ie=o.getDerivedStateFromProps;(Y=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==X||G!==P)&&Jf(r,_,c,P),Ur=!1,G=r.memoizedState,_.state=G,yl(r,c,_,d);var ue=r.memoizedState;S!==X||G!==ue||qt.current||Ur?(typeof ie=="function"&&(Nc(r,o,ie,c),ue=r.memoizedState),(b=Ur||Yf(r,o,b,c,G,ue,P)||!1)?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ue,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ue,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ue),_.props=c,_.state=ue,_.context=P,c=b):(typeof _.componentDidUpdate!="function"||S===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),c=!1)}return Uc(t,r,o,c,p,d)}function Uc(t,r,o,c,d,p){lp(t,r);var _=(r.flags&128)!==0;if(!c&&!_)return d&&pf(r,o,!1),mr(t,r,p);c=r.stateNode,Uv.current=r;var S=_&&typeof o.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,t!==null&&_?(r.child=Rs(r,t.child,null,p),r.child=Rs(r,null,S,p)):zt(t,r,S,p),r.memoizedState=c.state,d&&pf(r,o,!0),r.child}function cp(t){var r=t.stateNode;r.pendingContext?df(t,r.pendingContext,r.pendingContext!==r.context):r.context&&df(t,r.context,!1),wc(t,r.containerInfo)}function hp(t,r,o,c,d){return As(),pc(d),r.flags|=256,zt(t,r,o,c),r.child}var jc={dehydrated:null,treeContext:null,retryLane:0};function zc(t){return{baseLanes:t,cachePool:null,transitions:null}}function dp(t,r,o){var c=r.pendingProps,d=Ye.current,p=!1,_=(r.flags&128)!==0,S;if((S=_)||(S=t!==null&&t.memoizedState===null?!1:(d&2)!==0),S?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),qe(Ye,d&1),t===null)return fc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(_=c.children,t=c.fallback,p?(c=r.mode,p=r.child,_={mode:"hidden",children:_},!(c&1)&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Ul(_,c,0,null),t=Li(t,c,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=zc(o),r.memoizedState=jc,t):bc(r,_));if(d=t.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return jv(t,r,_,c,S,d,o);if(p){p=c.fallback,_=r.mode,d=t.child,S=d.sibling;var P={mode:"hidden",children:c.children};return!(_&1)&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=P,r.deletions=null):(c=Hr(d,P),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=Hr(S,p):(p=Li(p,_,o,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,_=t.child.memoizedState,_=_===null?zc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=jc,c}return p=t.child,t=p.sibling,c=Hr(p,{mode:"visible",children:c.children}),!(r.mode&1)&&(c.lanes=o),c.return=r,c.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=c,r.memoizedState=null,c}function bc(t,r){return r=Ul({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Al(t,r,o,c){return c!==null&&pc(c),Rs(r,t.child,null,o),t=bc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function jv(t,r,o,c,d,p,_){if(o)return r.flags&256?(r.flags&=-257,c=Oc(Error(n(422))),Al(t,r,_,c)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=Ul({mode:"visible",children:c.children},d,0,null),p=Li(p,d,_,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,r.mode&1&&Rs(r,t.child,null,_),r.child.memoizedState=zc(_),r.memoizedState=jc,p);if(!(r.mode&1))return Al(t,r,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,p=Error(n(419)),c=Oc(p,c,void 0),Al(t,r,_,c)}if(S=(_&t.childLanes)!==0,Wt||S){if(c=_t,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|_)?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,fr(t,d),Nn(c,t,d,-1))}return rh(),c=Oc(Error(n(421))),Al(t,r,_,c)}return d.data==="$?"?(r.flags|=128,r.child=t.child,r=Jv.bind(null,t),d._reactRetry=r,null):(t=p.treeContext,rn=Lr(d.nextSibling),nn=r,Ge=!0,kn=null,t!==null&&(dn[fn++]=hr,dn[fn++]=dr,dn[fn++]=Ai,hr=t.id,dr=t.overflow,Ai=r),r=bc(r,c.children),r.flags|=4096,r)}function fp(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),vc(t.return,r,o)}function Bc(t,r,o,c,d){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=o,p.tailMode=d)}function pp(t,r,o){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if(zt(t,r,c.children,o),c=Ye.current,c&2)c=c&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fp(t,o,r);else if(t.tag===19)fp(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(qe(Ye,c),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(o=r.child,d=null;o!==null;)t=o.alternate,t!==null&&vl(t)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),Bc(r,!1,d,o,p);break;case"backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&vl(t)===null){r.child=d;break}t=d.sibling,d.sibling=o,o=d,d=t}Bc(r,!0,o,null,p);break;case"together":Bc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Rl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function mr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),xi|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Hr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Hr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function zv(t,r,o){switch(r.tag){case 3:cp(r),As();break;case 5:Pf(r);break;case 1:Ht(r.type)&&ll(r);break;case 4:wc(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;qe(pl,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(qe(Ye,Ye.current&1),r.flags|=128,null):o&r.child.childLanes?dp(t,r,o):(qe(Ye,Ye.current&1),t=mr(t,r,o),t!==null?t.sibling:null);qe(Ye,Ye.current&1);break;case 19:if(c=(o&r.childLanes)!==0,t.flags&128){if(c)return pp(t,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),qe(Ye,Ye.current),c)break;return null;case 22:case 23:return r.lanes=0,ap(t,r,o)}return mr(t,r,o)}var mp,$c,gp,yp;mp=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},$c=function(){},gp=function(t,r,o,c){var d=t.memoizedProps;if(d!==c){t=r.stateNode,Pi($n.current);var p=null;switch(o){case"input":d=ai(t,d),c=ai(t,c),p=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),p=[];break;case"textarea":d=so(t,d),c=so(t,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=sl)}ho(o,c);var _;o=null;for(b in d)if(!c.hasOwnProperty(b)&&d.hasOwnProperty(b)&&d[b]!=null)if(b==="style"){var S=d[b];for(_ in S)S.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(a.hasOwnProperty(b)?p||(p=[]):(p=p||[]).push(b,null));for(b in c){var P=c[b];if(S=d!=null?d[b]:void 0,c.hasOwnProperty(b)&&P!==S&&(P!=null||S!=null))if(b==="style")if(S){for(_ in S)!S.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in P)P.hasOwnProperty(_)&&S[_]!==P[_]&&(o||(o={}),o[_]=P[_])}else o||(p||(p=[]),p.push(b,o)),o=P;else b==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,S=S?S.__html:void 0,P!=null&&S!==P&&(p=p||[]).push(b,P)):b==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push(b,""+P):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(a.hasOwnProperty(b)?(P!=null&&b==="onScroll"&&He("scroll",t),p||S===P||(p=[])):(p=p||[]).push(b,P))}o&&(p=p||[]).push("style",o);var b=p;(r.updateQueue=b)&&(r.flags|=4)}},yp=function(t,r,o,c){o!==c&&(r.flags|=4)};function Wo(t,r){if(!Ge)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Nt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var d=t.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function bv(t,r,o){var c=r.pendingProps;switch(hc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return Ht(r.type)&&al(),Nt(r),null;case 3:return c=r.stateNode,ks(),We(qt),We(Vt),Sc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(dl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,kn!==null&&(eh(kn),kn=null))),$c(t,r),Nt(r),null;case 5:Tc(r);var d=Pi(bo.current);if(o=r.type,t!==null&&r.stateNode!=null)gp(t,r,o,c,d),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(n(166));return Nt(r),null}if(t=Pi($n.current),dl(r)){c=r.stateNode,o=r.type;var p=r.memoizedProps;switch(c[Bn]=r,c[Mo]=p,t=(r.mode&1)!==0,o){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(d=0;d<No.length;d++)He(No[d],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":qi(c,p),He("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},He("invalid",c);break;case"textarea":Wi(c,p),He("invalid",c)}ho(o,p),d=null;for(var _ in p)if(p.hasOwnProperty(_)){var S=p[_];_==="children"?typeof S=="string"?c.textContent!==S&&(p.suppressHydrationWarning!==!0&&il(c.textContent,S,t),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&il(c.textContent,S,t),d=["children",""+S]):a.hasOwnProperty(_)&&S!=null&&_==="onScroll"&&He("scroll",c)}switch(o){case"input":Zn(c),xa(c,p,!0);break;case"textarea":Zn(c),oo(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=sl)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ut(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=_.createElement(o,{is:c.is}):(t=_.createElement(o),o==="select"&&(_=t,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):t=_.createElementNS(t,o),t[Bn]=r,t[Mo]=c,mp(t,r,!1,!1),r.stateNode=t;e:{switch(_=fo(o,c),o){case"dialog":He("cancel",t),He("close",t),d=c;break;case"iframe":case"object":case"embed":He("load",t),d=c;break;case"video":case"audio":for(d=0;d<No.length;d++)He(No[d],t);d=c;break;case"source":He("error",t),d=c;break;case"img":case"image":case"link":He("error",t),He("load",t),d=c;break;case"details":He("toggle",t),d=c;break;case"input":qi(t,c),d=ai(t,c),He("invalid",t);break;case"option":d=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),He("invalid",t);break;case"textarea":Wi(t,c),d=so(t,c),He("invalid",t);break;default:d=c}ho(o,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var P=S[p];p==="style"?uo(t,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&ao(t,P)):p==="children"?typeof P=="string"?(o!=="textarea"||P!=="")&&Ir(t,P):typeof P=="number"&&Ir(t,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?P!=null&&p==="onScroll"&&He("scroll",t):P!=null&&re(t,p,P,_))}switch(o){case"input":Zn(t),xa(t,c,!1);break;case"textarea":Zn(t),oo(t);break;case"option":c.value!=null&&t.setAttribute("value",""+Fe(c.value));break;case"select":t.multiple=!!c.multiple,p=c.value,p!=null?tr(t,!!c.multiple,p,!1):c.defaultValue!=null&&tr(t,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=sl)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Nt(r),null;case 6:if(t&&r.stateNode!=null)yp(t,r,t.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(n(166));if(o=Pi(bo.current),Pi($n.current),dl(r)){if(c=r.stateNode,o=r.memoizedProps,c[Bn]=r,(p=c.nodeValue!==o)&&(t=nn,t!==null))switch(t.tag){case 3:il(c.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&il(c.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Bn]=r,r.stateNode=c}return Nt(r),null;case 13:if(We(Ye),c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&rn!==null&&r.mode&1&&!(r.flags&128))Ef(),As(),r.flags|=98560,p=!1;else if(p=dl(r),c!==null&&c.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Bn]=r}else As(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Nt(r),p=!1}else kn!==null&&(eh(kn),kn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(r.child.flags|=8192,r.mode&1&&(t===null||Ye.current&1?ft===0&&(ft=3):rh())),r.updateQueue!==null&&(r.flags|=4),Nt(r),null);case 4:return ks(),$c(t,r),t===null&&Lo(r.stateNode.containerInfo),Nt(r),null;case 10:return yc(r.type._context),Nt(r),null;case 17:return Ht(r.type)&&al(),Nt(r),null;case 19:if(We(Ye),p=r.memoizedState,p===null)return Nt(r),null;if(c=(r.flags&128)!==0,_=p.rendering,_===null)if(c)Wo(p,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(_=vl(t),_!==null){for(r.flags|=128,Wo(p,!1),c=_.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=o,o=r.child;o!==null;)p=o,t=c,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(Ye,Ye.current&1|2),r.child}t=t.sibling}p.tail!==null&&$e()>Ns&&(r.flags|=128,c=!0,Wo(p,!1),r.lanes=4194304)}else{if(!c)if(t=vl(_),t!==null){if(r.flags|=128,c=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Wo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ge)return Nt(r),null}else 2*$e()-p.renderingStartTime>Ns&&o!==1073741824&&(r.flags|=128,c=!0,Wo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=$e(),r.sibling=null,o=Ye.current,qe(Ye,c?o&1|2:o&1),r):(Nt(r),null);case 22:case 23:return nh(),c=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(r.flags|=8192),c&&r.mode&1?sn&1073741824&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Bv(t,r){switch(hc(r),r.tag){case 1:return Ht(r.type)&&al(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ks(),We(qt),We(Vt),Sc(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Tc(r),null;case 13:if(We(Ye),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));As()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Ye),null;case 4:return ks(),null;case 10:return yc(r.type._context),null;case 22:case 23:return nh(),null;case 24:return null;default:return null}}var Cl=!1,Lt=!1,$v=typeof WeakSet=="function"?WeakSet:Set,le=null;function Vs(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){et(t,r,c)}else o.current=null}function qc(t,r,o){try{o()}catch(c){et(t,r,c)}}var vp=!1;function qv(t,r){if(nc=Vr,t=Gd(),Ku(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,S=-1,P=-1,b=0,Y=0,X=t,G=null;t:for(;;){for(var ie;X!==o||d!==0&&X.nodeType!==3||(S=_+d),X!==p||c!==0&&X.nodeType!==3||(P=_+c),X.nodeType===3&&(_+=X.nodeValue.length),(ie=X.firstChild)!==null;)G=X,X=ie;for(;;){if(X===t)break t;if(G===o&&++b===d&&(S=_),G===p&&++Y===c&&(P=_),(ie=X.nextSibling)!==null)break;X=G,G=X.parentNode}X=ie}o=S===-1||P===-1?null:{start:S,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(rc={focusedElem:t,selectionRange:o},Vr=!1,le=r;le!==null;)if(r=le,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,le=t;else for(;le!==null;){r=le;try{var ue=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,rt=ue.memoizedState,U=r.stateNode,V=U.getSnapshotBeforeUpdate(r.elementType===r.type?ce:xn(r.type,ce),rt);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Z){et(r,r.return,Z)}if(t=r.sibling,t!==null){t.return=r.return,le=t;break}le=r.return}return ue=vp,vp=!1,ue}function Qo(t,r,o){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&t)===t){var p=d.destroy;d.destroy=void 0,p!==void 0&&qc(r,o,p)}d=d.next}while(d!==c)}}function Pl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var c=o.create;o.destroy=c()}o=o.next}while(o!==r)}}function Hc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function _p(t){var r=t.alternate;r!==null&&(t.alternate=null,_p(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Bn],delete r[Mo],delete r[ac],delete r[Rv],delete r[Cv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ep(t){return t.tag===5||t.tag===3||t.tag===4}function wp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ep(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wc(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=sl));else if(c!==4&&(t=t.child,t!==null))for(Wc(t,r,o),t=t.sibling;t!==null;)Wc(t,r,o),t=t.sibling}function Qc(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(Qc(t,r,o),t=t.sibling;t!==null;)Qc(t,r,o),t=t.sibling}var St=null,Vn=!1;function zr(t,r,o){for(o=o.child;o!==null;)Tp(t,r,o),o=o.sibling}function Tp(t,r,o){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(gi,o)}catch{}switch(o.tag){case 5:Lt||Vs(o,r);case 6:var c=St,d=Vn;St=null,zr(t,r,o),St=c,Vn=d,St!==null&&(Vn?(t=St,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):St.removeChild(o.stateNode));break;case 18:St!==null&&(Vn?(t=St,o=o.stateNode,t.nodeType===8?oc(t.parentNode,o):t.nodeType===1&&oc(t,o),Rn(t)):oc(St,o.stateNode));break;case 4:c=St,d=Vn,St=o.stateNode.containerInfo,Vn=!0,zr(t,r,o),St=c,Vn=d;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,_=p.destroy;p=p.tag,_!==void 0&&(p&2||p&4)&&qc(o,r,_),d=d.next}while(d!==c)}zr(t,r,o);break;case 1:if(!Lt&&(Vs(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(S){et(o,r,S)}zr(t,r,o);break;case 21:zr(t,r,o);break;case 22:o.mode&1?(Lt=(c=Lt)||o.memoizedState!==null,zr(t,r,o),Lt=c):zr(t,r,o);break;default:zr(t,r,o)}}function Ip(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new $v),r.forEach(function(c){var d=Zv.bind(null,t,c);o.has(c)||(o.add(c),c.then(d,d))})}}function Dn(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];try{var p=t,_=r,S=_;e:for(;S!==null;){switch(S.tag){case 5:St=S.stateNode,Vn=!1;break e;case 3:St=S.stateNode.containerInfo,Vn=!0;break e;case 4:St=S.stateNode.containerInfo,Vn=!0;break e}S=S.return}if(St===null)throw Error(n(160));Tp(p,_,d),St=null,Vn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(b){et(d,r,b)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Sp(r,t),r=r.sibling}function Sp(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(r,t),Hn(t),c&4){try{Qo(3,t,t.return),Pl(3,t)}catch(ce){et(t,t.return,ce)}try{Qo(5,t,t.return)}catch(ce){et(t,t.return,ce)}}break;case 1:Dn(r,t),Hn(t),c&512&&o!==null&&Vs(o,o.return);break;case 5:if(Dn(r,t),Hn(t),c&512&&o!==null&&Vs(o,o.return),t.flags&32){var d=t.stateNode;try{Ir(d,"")}catch(ce){et(t,t.return,ce)}}if(c&4&&(d=t.stateNode,d!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,S=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&ro(d,p),fo(S,_);var b=fo(S,p);for(_=0;_<P.length;_+=2){var Y=P[_],X=P[_+1];Y==="style"?uo(d,X):Y==="dangerouslySetInnerHTML"?ao(d,X):Y==="children"?Ir(d,X):re(d,Y,X,b)}switch(S){case"input":io(d,p);break;case"textarea":Qi(d,p);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ie=p.value;ie!=null?tr(d,!!p.multiple,ie,!1):G!==!!p.multiple&&(p.defaultValue!=null?tr(d,!!p.multiple,p.defaultValue,!0):tr(d,!!p.multiple,p.multiple?[]:"",!1))}d[Mo]=p}catch(ce){et(t,t.return,ce)}}break;case 6:if(Dn(r,t),Hn(t),c&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,p=t.memoizedProps;try{d.nodeValue=p}catch(ce){et(t,t.return,ce)}}break;case 3:if(Dn(r,t),Hn(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Rn(r.containerInfo)}catch(ce){et(t,t.return,ce)}break;case 4:Dn(r,t),Hn(t);break;case 13:Dn(r,t),Hn(t),d=t.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Yc=$e())),c&4&&Ip(t);break;case 22:if(Y=o!==null&&o.memoizedState!==null,t.mode&1?(Lt=(b=Lt)||Y,Dn(r,t),Lt=b):Dn(r,t),Hn(t),c&8192){if(b=t.memoizedState!==null,(t.stateNode.isHidden=b)&&!Y&&t.mode&1)for(le=t,Y=t.child;Y!==null;){for(X=le=Y;le!==null;){switch(G=le,ie=G.child,G.tag){case 0:case 11:case 14:case 15:Qo(4,G,G.return);break;case 1:Vs(G,G.return);var ue=G.stateNode;if(typeof ue.componentWillUnmount=="function"){c=G,o=G.return;try{r=c,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(ce){et(c,o,ce)}}break;case 5:Vs(G,G.return);break;case 22:if(G.memoizedState!==null){Cp(X);continue}}ie!==null?(ie.return=G,le=ie):Cp(X)}Y=Y.sibling}e:for(Y=null,X=t;;){if(X.tag===5){if(Y===null){Y=X;try{d=X.stateNode,b?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=X.stateNode,P=X.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,S.style.display=lo("display",_))}catch(ce){et(t,t.return,ce)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=b?"":X.memoizedProps}catch(ce){et(t,t.return,ce)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===t)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===t)break e;for(;X.sibling===null;){if(X.return===null||X.return===t)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Dn(r,t),Hn(t),c&4&&Ip(t);break;case 21:break;default:Dn(r,t),Hn(t)}}function Hn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Ep(o)){var c=o;break e}o=o.return}throw Error(n(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Ir(d,""),c.flags&=-33);var p=wp(t);Qc(t,p,d);break;case 3:case 4:var _=c.stateNode.containerInfo,S=wp(t);Wc(t,S,_);break;default:throw Error(n(161))}}catch(P){et(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Hv(t,r,o){le=t,Ap(t)}function Ap(t,r,o){for(var c=(t.mode&1)!==0;le!==null;){var d=le,p=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||Cl;if(!_){var S=d.alternate,P=S!==null&&S.memoizedState!==null||Lt;S=Cl;var b=Lt;if(Cl=_,(Lt=P)&&!b)for(le=d;le!==null;)_=le,P=_.child,_.tag===22&&_.memoizedState!==null?Pp(d):P!==null?(P.return=_,le=P):Pp(d);for(;p!==null;)le=p,Ap(p),p=p.sibling;le=d,Cl=S,Lt=b}Rp(t)}else d.subtreeFlags&8772&&p!==null?(p.return=d,le=p):Rp(t)}}function Rp(t){for(;le!==null;){var r=le;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Lt||Pl(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Lt)if(o===null)c.componentDidMount();else{var d=r.elementType===r.type?o.memoizedProps:xn(r.type,o.memoizedProps);c.componentDidUpdate(d,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Cf(r,p,c);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Cf(r,_,o)}break;case 5:var S=r.stateNode;if(o===null&&r.flags&4){o=S;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&o.focus();break;case"img":P.src&&(o.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var b=r.alternate;if(b!==null){var Y=b.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&Rn(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Lt||r.flags&512&&Hc(r)}catch(G){et(r,r.return,G)}}if(r===t){le=null;break}if(o=r.sibling,o!==null){o.return=r.return,le=o;break}le=r.return}}function Cp(t){for(;le!==null;){var r=le;if(r===t){le=null;break}var o=r.sibling;if(o!==null){o.return=r.return,le=o;break}le=r.return}}function Pp(t){for(;le!==null;){var r=le;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Pl(4,r)}catch(P){et(r,o,P)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(P){et(r,d,P)}}var p=r.return;try{Hc(r)}catch(P){et(r,p,P)}break;case 5:var _=r.return;try{Hc(r)}catch(P){et(r,_,P)}}}catch(P){et(r,r.return,P)}if(r===t){le=null;break}var S=r.sibling;if(S!==null){S.return=r.return,le=S;break}le=r.return}}var Wv=Math.ceil,kl=de.ReactCurrentDispatcher,Kc=de.ReactCurrentOwner,gn=de.ReactCurrentBatchConfig,Le=0,_t=null,ot=null,At=0,sn=0,Ds=Or(0),ft=0,Ko=null,xi=0,xl=0,Gc=0,Go=null,Qt=null,Yc=0,Ns=1/0,gr=null,Vl=!1,Xc=null,br=null,Dl=!1,Br=null,Nl=0,Yo=0,Jc=null,Ll=-1,Ol=0;function bt(){return Le&6?$e():Ll!==-1?Ll:Ll=$e()}function $r(t){return t.mode&1?Le&2&&At!==0?At&-At:kv.transition!==null?(Ol===0&&(Ol=vi()),Ol):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:So(t.type)),t):1}function Nn(t,r,o,c){if(50<Yo)throw Yo=0,Jc=null,Error(n(185));Cr(t,o,c),(!(Le&2)||t!==_t)&&(t===_t&&(!(Le&2)&&(xl|=o),ft===4&&qr(t,At)),Kt(t,c),o===1&&Le===0&&!(r.mode&1)&&(Ns=$e()+500,ul&&Fr()))}function Kt(t,r){var o=t.callbackNode;ir(t,r);var c=yi(t,t===_t?At:0);if(c===0)o!==null&&_o(o),t.callbackNode=null,t.callbackPriority=0;else if(r=c&-c,t.callbackPriority!==r){if(o!=null&&_o(o),r===1)t.tag===0?Pv(xp.bind(null,t)):mf(xp.bind(null,t)),Sv(function(){!(Le&6)&&Fr()}),o=null;else{switch(kr(c)){case 1:o=mi;break;case 4:o=Sr;break;case 16:o=un;break;case 536870912:o=Oa;break;default:o=un}o=Up(o,kp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function kp(t,r){if(Ll=-1,Ol=0,Le&6)throw Error(n(327));var o=t.callbackNode;if(Ls()&&t.callbackNode!==o)return null;var c=yi(t,t===_t?At:0);if(c===0)return null;if(c&30||c&t.expiredLanes||r)r=Ml(t,c);else{r=c;var d=Le;Le|=2;var p=Dp();(_t!==t||At!==r)&&(gr=null,Ns=$e()+500,Di(t,r));do try{Gv();break}catch(S){Vp(t,S)}while(!0);gc(),kl.current=p,Le=d,ot!==null?r=0:(_t=null,At=0,r=ft)}if(r!==0){if(r===2&&(d=Zt(t),d!==0&&(c=d,r=Zc(t,d))),r===1)throw o=Ko,Di(t,0),qr(t,c),Kt(t,$e()),o;if(r===6)qr(t,c);else{if(d=t.current.alternate,!(c&30)&&!Qv(d)&&(r=Ml(t,c),r===2&&(p=Zt(t),p!==0&&(c=p,r=Zc(t,p))),r===1))throw o=Ko,Di(t,0),qr(t,c),Kt(t,$e()),o;switch(t.finishedWork=d,t.finishedLanes=c,r){case 0:case 1:throw Error(n(345));case 2:Ni(t,Qt,gr);break;case 3:if(qr(t,c),(c&130023424)===c&&(r=Yc+500-$e(),10<r)){if(yi(t,0)!==0)break;if(d=t.suspendedLanes,(d&c)!==c){bt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=sc(Ni.bind(null,t,Qt,gr),r);break}Ni(t,Qt,gr);break;case 4:if(qr(t,c),(c&4194240)===c)break;for(r=t.eventTimes,d=-1;0<c;){var _=31-Ut(c);p=1<<_,_=r[_],_>d&&(d=_),c&=~p}if(c=d,c=$e()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Wv(c/1960))-c,10<c){t.timeoutHandle=sc(Ni.bind(null,t,Qt,gr),c);break}Ni(t,Qt,gr);break;case 5:Ni(t,Qt,gr);break;default:throw Error(n(329))}}}return Kt(t,$e()),t.callbackNode===o?kp.bind(null,t):null}function Zc(t,r){var o=Go;return t.current.memoizedState.isDehydrated&&(Di(t,r).flags|=256),t=Ml(t,r),t!==2&&(r=Qt,Qt=o,r!==null&&eh(r)),t}function eh(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function Qv(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var d=o[c],p=d.getSnapshot;d=d.value;try{if(!Pn(p(),d))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qr(t,r){for(r&=~Gc,r&=~xl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ut(r),c=1<<o;t[o]=-1,r&=~c}}function xp(t){if(Le&6)throw Error(n(327));Ls();var r=yi(t,0);if(!(r&1))return Kt(t,$e()),null;var o=Ml(t,r);if(t.tag!==0&&o===2){var c=Zt(t);c!==0&&(r=c,o=Zc(t,c))}if(o===1)throw o=Ko,Di(t,0),qr(t,r),Kt(t,$e()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ni(t,Qt,gr),Kt(t,$e()),null}function th(t,r){var o=Le;Le|=1;try{return t(r)}finally{Le=o,Le===0&&(Ns=$e()+500,ul&&Fr())}}function Vi(t){Br!==null&&Br.tag===0&&!(Le&6)&&Ls();var r=Le;Le|=1;var o=gn.transition,c=Pe;try{if(gn.transition=null,Pe=1,t)return t()}finally{Pe=c,gn.transition=o,Le=r,!(Le&6)&&Fr()}}function nh(){sn=Ds.current,We(Ds)}function Di(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Iv(o)),ot!==null)for(o=ot.return;o!==null;){var c=o;switch(hc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&al();break;case 3:ks(),We(qt),We(Vt),Sc();break;case 5:Tc(c);break;case 4:ks();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:yc(c.type._context);break;case 22:case 23:nh()}o=o.return}if(_t=t,ot=t=Hr(t.current,null),At=sn=r,ft=0,Ko=null,Gc=xl=xi=0,Qt=Go=null,Ci!==null){for(r=0;r<Ci.length;r++)if(o=Ci[r],c=o.interleaved,c!==null){o.interleaved=null;var d=c.next,p=o.pending;if(p!==null){var _=p.next;p.next=d,c.next=_}o.pending=c}Ci=null}return t}function Vp(t,r){do{var o=ot;try{if(gc(),_l.current=Il,El){for(var c=Xe.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}El=!1}if(ki=0,vt=dt=Xe=null,Bo=!1,$o=0,Kc.current=null,o===null||o.return===null){ft=1,Ko=r,ot=null;break}e:{var p=t,_=o.return,S=o,P=r;if(r=At,S.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var b=P,Y=S,X=Y.tag;if(!(Y.mode&1)&&(X===0||X===11||X===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ie=np(_);if(ie!==null){ie.flags&=-257,rp(ie,_,S,p,r),ie.mode&1&&tp(p,b,r),r=ie,P=b;var ue=r.updateQueue;if(ue===null){var ce=new Set;ce.add(P),r.updateQueue=ce}else ue.add(P);break e}else{if(!(r&1)){tp(p,b,r),rh();break e}P=Error(n(426))}}else if(Ge&&S.mode&1){var rt=np(_);if(rt!==null){!(rt.flags&65536)&&(rt.flags|=256),rp(rt,_,S,p,r),pc(xs(P,S));break e}}p=P=xs(P,S),ft!==4&&(ft=2),Go===null?Go=[p]:Go.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var U=Zf(p,P,r);Rf(p,U);break e;case 1:S=P;var V=p.type,z=p.stateNode;if(!(p.flags&128)&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(br===null||!br.has(z)))){p.flags|=65536,r&=-r,p.lanes|=r;var Z=ep(p,S,r);Rf(p,Z);break e}}p=p.return}while(p!==null)}Lp(o)}catch(he){r=he,ot===o&&o!==null&&(ot=o=o.return);continue}break}while(!0)}function Dp(){var t=kl.current;return kl.current=Il,t===null?Il:t}function rh(){(ft===0||ft===3||ft===2)&&(ft=4),_t===null||!(xi&268435455)&&!(xl&268435455)||qr(_t,At)}function Ml(t,r){var o=Le;Le|=2;var c=Dp();(_t!==t||At!==r)&&(gr=null,Di(t,r));do try{Kv();break}catch(d){Vp(t,d)}while(!0);if(gc(),Le=o,kl.current=c,ot!==null)throw Error(n(261));return _t=null,At=0,ft}function Kv(){for(;ot!==null;)Np(ot)}function Gv(){for(;ot!==null&&!Na();)Np(ot)}function Np(t){var r=Fp(t.alternate,t,sn);t.memoizedProps=t.pendingProps,r===null?Lp(t):ot=r,Kc.current=null}function Lp(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=Bv(o,r),o!==null){o.flags&=32767,ot=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ot=null;return}}else if(o=bv(o,r,sn),o!==null){ot=o;return}if(r=r.sibling,r!==null){ot=r;return}ot=r=t}while(r!==null);ft===0&&(ft=5)}function Ni(t,r,o){var c=Pe,d=gn.transition;try{gn.transition=null,Pe=1,Yv(t,r,o,c)}finally{gn.transition=d,Pe=c}return null}function Yv(t,r,o,c){do Ls();while(Br!==null);if(Le&6)throw Error(n(327));o=t.finishedWork;var d=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(be(t,p),t===_t&&(ot=_t=null,At=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Dl||(Dl=!0,Up(un,function(){return Ls(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=gn.transition,gn.transition=null;var _=Pe;Pe=1;var S=Le;Le|=4,Kc.current=null,qv(t,o),Sp(o,t),gv(rc),Vr=!!nc,rc=nc=null,t.current=o,Hv(o),zu(),Le=S,Pe=_,gn.transition=p}else t.current=o;if(Dl&&(Dl=!1,Br=t,Nl=d),p=t.pendingLanes,p===0&&(br=null),Ma(o.stateNode),Kt(t,$e()),r!==null)for(c=t.onRecoverableError,o=0;o<r.length;o++)d=r[o],c(d.value,{componentStack:d.stack,digest:d.digest});if(Vl)throw Vl=!1,t=Xc,Xc=null,t;return Nl&1&&t.tag!==0&&Ls(),p=t.pendingLanes,p&1?t===Jc?Yo++:(Yo=0,Jc=t):Yo=0,Fr(),null}function Ls(){if(Br!==null){var t=kr(Nl),r=gn.transition,o=Pe;try{if(gn.transition=null,Pe=16>t?16:t,Br===null)var c=!1;else{if(t=Br,Br=null,Nl=0,Le&6)throw Error(n(331));var d=Le;for(Le|=4,le=t.current;le!==null;){var p=le,_=p.child;if(le.flags&16){var S=p.deletions;if(S!==null){for(var P=0;P<S.length;P++){var b=S[P];for(le=b;le!==null;){var Y=le;switch(Y.tag){case 0:case 11:case 15:Qo(8,Y,p)}var X=Y.child;if(X!==null)X.return=Y,le=X;else for(;le!==null;){Y=le;var G=Y.sibling,ie=Y.return;if(_p(Y),Y===b){le=null;break}if(G!==null){G.return=ie,le=G;break}le=ie}}}var ue=p.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var rt=ce.sibling;ce.sibling=null,ce=rt}while(ce!==null)}}le=p}}if(p.subtreeFlags&2064&&_!==null)_.return=p,le=_;else e:for(;le!==null;){if(p=le,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Qo(9,p,p.return)}var U=p.sibling;if(U!==null){U.return=p.return,le=U;break e}le=p.return}}var V=t.current;for(le=V;le!==null;){_=le;var z=_.child;if(_.subtreeFlags&2064&&z!==null)z.return=_,le=z;else e:for(_=V;le!==null;){if(S=le,S.flags&2048)try{switch(S.tag){case 0:case 11:case 15:Pl(9,S)}}catch(he){et(S,S.return,he)}if(S===_){le=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,le=Z;break e}le=S.return}}if(Le=d,Fr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(gi,t)}catch{}c=!0}return c}finally{Pe=o,gn.transition=r}}return!1}function Op(t,r,o){r=xs(o,r),r=Zf(t,r,1),t=jr(t,r,1),r=bt(),t!==null&&(Cr(t,1,r),Kt(t,r))}function et(t,r,o){if(t.tag===3)Op(t,t,o);else for(;r!==null;){if(r.tag===3){Op(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(br===null||!br.has(c))){t=xs(o,t),t=ep(r,t,1),r=jr(r,t,1),t=bt(),r!==null&&(Cr(r,1,t),Kt(r,t));break}}r=r.return}}function Xv(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),r=bt(),t.pingedLanes|=t.suspendedLanes&o,_t===t&&(At&o)===o&&(ft===4||ft===3&&(At&130023424)===At&&500>$e()-Yc?Di(t,0):Gc|=o),Kt(t,r)}function Mp(t,r){r===0&&(t.mode&1?(r=rs,rs<<=1,!(rs&130023424)&&(rs=4194304)):r=1);var o=bt();t=fr(t,r),t!==null&&(Cr(t,r,o),Kt(t,o))}function Jv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Mp(t,o)}function Zv(t,r){var o=0;switch(t.tag){case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(r),Mp(t,o)}var Fp;Fp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||qt.current)Wt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return Wt=!1,zv(t,r,o);Wt=!!(t.flags&131072)}else Wt=!1,Ge&&r.flags&1048576&&gf(r,hl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Rl(t,r),t=r.pendingProps;var d=Ts(r,Vt.current);Ps(r,o),d=Cc(null,r,c,t,d,o);var p=Pc();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Ht(c)?(p=!0,ll(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ec(r),d.updater=Sl,r.stateNode=d,d._reactInternals=r,Lc(r,c,t,o),r=Uc(null,r,c,!0,p,o)):(r.tag=0,Ge&&p&&cc(r),zt(null,r,d,o),r=r.child),r;case 16:c=r.elementType;e:{switch(Rl(t,r),t=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=t_(c),t=xn(c,t),d){case 0:r=Fc(null,r,c,t,o);break e;case 1:r=up(null,r,c,t,o);break e;case 11:r=ip(null,r,c,t,o);break e;case 14:r=sp(null,r,c,xn(c.type,t),o);break e}throw Error(n(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:xn(c,d),Fc(t,r,c,d,o);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:xn(c,d),up(t,r,c,d,o);case 3:e:{if(cp(r),t===null)throw Error(n(387));c=r.pendingProps,p=r.memoizedState,d=p.element,Af(t,r),yl(r,c,null,o);var _=r.memoizedState;if(c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=xs(Error(n(423)),r),r=hp(t,r,c,o,d);break e}else if(c!==d){d=xs(Error(n(424)),r),r=hp(t,r,c,o,d);break e}else for(rn=Lr(r.stateNode.containerInfo.firstChild),nn=r,Ge=!0,kn=null,o=If(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(As(),c===d){r=mr(t,r,o);break e}zt(t,r,c,o)}r=r.child}return r;case 5:return Pf(r),t===null&&fc(r),c=r.type,d=r.pendingProps,p=t!==null?t.memoizedProps:null,_=d.children,ic(c,d)?_=null:p!==null&&ic(c,p)&&(r.flags|=32),lp(t,r),zt(t,r,_,o),r.child;case 6:return t===null&&fc(r),null;case 13:return dp(t,r,o);case 4:return wc(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=Rs(r,null,c,o):zt(t,r,c,o),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:xn(c,d),ip(t,r,c,d,o);case 7:return zt(t,r,r.pendingProps,o),r.child;case 8:return zt(t,r,r.pendingProps.children,o),r.child;case 12:return zt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,_=d.value,qe(pl,c._currentValue),c._currentValue=_,p!==null)if(Pn(p.value,_)){if(p.children===d.children&&!qt.current){r=mr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var S=p.dependencies;if(S!==null){_=p.child;for(var P=S.firstContext;P!==null;){if(P.context===c){if(p.tag===1){P=pr(-1,o&-o),P.tag=2;var b=p.updateQueue;if(b!==null){b=b.shared;var Y=b.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),b.pending=P}}p.lanes|=o,P=p.alternate,P!==null&&(P.lanes|=o),vc(p.return,o,r),S.lanes|=o;break}P=P.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,S=_.alternate,S!==null&&(S.lanes|=o),vc(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}zt(t,r,d.children,o),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Ps(r,o),d=pn(d),c=c(d),r.flags|=1,zt(t,r,c,o),r.child;case 14:return c=r.type,d=xn(c,r.pendingProps),d=xn(c.type,d),sp(t,r,c,d,o);case 15:return op(t,r,r.type,r.pendingProps,o);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:xn(c,d),Rl(t,r),r.tag=1,Ht(c)?(t=!0,ll(r)):t=!1,Ps(r,o),Xf(r,c,d),Lc(r,c,d,o),Uc(null,r,c,!0,t,o);case 19:return pp(t,r,o);case 22:return ap(t,r,o)}throw Error(n(156,r.tag))};function Up(t,r){return ts(t,r)}function e_(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,r,o,c){return new e_(t,r,o,c)}function ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function t_(t){if(typeof t=="function")return ih(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===kt)return 14}return 2}function Hr(t,r){var o=t.alternate;return o===null?(o=yn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Fl(t,r,o,c,d,p){var _=2;if(c=t,typeof t=="function")ih(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case x:return Li(o.children,d,p,r);case I:_=8,d|=8;break;case R:return t=yn(12,o,r,d|2),t.elementType=R,t.lanes=p,t;case C:return t=yn(13,o,r,d),t.elementType=C,t.lanes=p,t;case tt:return t=yn(19,o,r,d),t.elementType=tt,t.lanes=p,t;case ze:return Ul(o,d,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:_=10;break e;case D:_=9;break e;case O:_=11;break e;case kt:_=14;break e;case xt:_=16,c=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=yn(_,o,r,d),r.elementType=t,r.type=c,r.lanes=p,r}function Li(t,r,o,c){return t=yn(7,t,c,r),t.lanes=o,t}function Ul(t,r,o,c){return t=yn(22,t,c,r),t.elementType=ze,t.lanes=o,t.stateNode={isHidden:!1},t}function sh(t,r,o){return t=yn(6,t,null,r),t.lanes=o,t}function oh(t,r,o){return r=yn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function n_(t,r,o,c,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rr(0),this.expirationTimes=Rr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function ah(t,r,o,c,d,p,_,S,P){return t=new n_(t,r,o,S,P),r===1?(r=1,p===!0&&(r|=8)):r=0,p=yn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ec(p),t}function r_(t,r,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:c==null?null:""+c,children:t,containerInfo:r,implementation:o}}function jp(t){if(!t)return Mr;t=t._reactInternals;e:{if(wn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Ht(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Ht(o))return ff(t,o,r)}return r}function zp(t,r,o,c,d,p,_,S,P){return t=ah(o,c,!0,t,d,p,_,S,P),t.context=jp(null),o=t.current,c=bt(),d=$r(o),p=pr(c,d),p.callback=r??null,jr(o,p,d),t.current.lanes=d,Cr(t,d,c),Kt(t,c),t}function jl(t,r,o,c){var d=r.current,p=bt(),_=$r(d);return o=jp(o),r.context===null?r.context=o:r.pendingContext=o,r=pr(p,_),r.payload={element:t},c=c===void 0?null:c,c!==null&&(r.callback=c),t=jr(d,r,_),t!==null&&(Nn(t,d,_,p),gl(t,d,_)),_}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function lh(t,r){bp(t,r),(t=t.alternate)&&bp(t,r)}function i_(){return null}var Bp=typeof reportError=="function"?reportError:function(t){console.error(t)};function uh(t){this._internalRoot=t}bl.prototype.render=uh.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));jl(t,r,null,null)},bl.prototype.unmount=uh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Vi(function(){jl(null,t,null,null)}),r[ur]=null}};function bl(t){this._internalRoot=t}bl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ba();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Un.length&&r!==0&&r<Un[o].priority;o++);Un.splice(o,0,t),o===0&&qa(t)}};function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $p(){}function s_(t,r,o,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var b=zl(_);p.call(b)}}var _=zp(r,c,t,0,null,!1,!1,"",$p);return t._reactRootContainer=_,t[ur]=_.current,Lo(t.nodeType===8?t.parentNode:t),Vi(),_}for(;d=t.lastChild;)t.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var b=zl(P);S.call(b)}}var P=ah(t,0,!1,null,null,!1,!1,"",$p);return t._reactRootContainer=P,t[ur]=P.current,Lo(t.nodeType===8?t.parentNode:t),Vi(function(){jl(r,P,o,c)}),P}function $l(t,r,o,c,d){var p=o._reactRootContainer;if(p){var _=p;if(typeof d=="function"){var S=d;d=function(){var P=zl(_);S.call(P)}}jl(r,_,t,d)}else _=s_(o,r,t,d,c);return zl(_)}ja=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ar(r.pendingLanes);o!==0&&(Pr(r,o|1),Kt(r,$e()),!(Le&6)&&(Ns=$e()+500,Fr()))}break;case 13:Vi(function(){var c=fr(t,1);if(c!==null){var d=bt();Nn(c,t,1,d)}}),lh(t,1)}},is=function(t){if(t.tag===13){var r=fr(t,134217728);if(r!==null){var o=bt();Nn(r,t,134217728,o)}lh(t,134217728)}},za=function(t){if(t.tag===13){var r=$r(t),o=fr(t,r);if(o!==null){var c=bt();Nn(o,t,r,c)}lh(t,r)}},ba=function(){return Pe},Ba=function(t,r){var o=Pe;try{return Pe=t,r()}finally{Pe=o}},Gi=function(t,r,o){switch(r){case"input":if(io(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var d=ol(c);if(!d)throw Error(n(90));$i(c),io(c,d)}}}break;case"textarea":Qi(t,o);break;case"select":r=o.value,r!=null&&tr(t,!!o.multiple,r,!1)}},hi=th,mo=Vi;var o_={usingClientEntryPoint:!1,Events:[Fo,Es,ol,Mn,po,th]},Xo={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a_={bundleType:Xo.bundleType,version:Xo.version,rendererPackageName:Xo.rendererPackageName,rendererConfig:Xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vo(t),t===null?null:t.stateNode},findFiberByHostInstance:Xo.findFiberByHostInstance||i_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{gi=ql.inject(a_),Jt=ql}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o_,Gt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ch(r))throw Error(n(200));return r_(t,r,null,o)},Gt.createRoot=function(t,r){if(!ch(t))throw Error(n(299));var o=!1,c="",d=Bp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=ah(t,1,!1,null,null,o,!1,c,d),t[ur]=r.current,Lo(t.nodeType===8?t.parentNode:t),new uh(r)},Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=vo(r),t=t===null?null:t.stateNode,t},Gt.flushSync=function(t){return Vi(t)},Gt.hydrate=function(t,r,o){if(!Bl(r))throw Error(n(200));return $l(null,t,r,!0,o)},Gt.hydrateRoot=function(t,r,o){if(!ch(t))throw Error(n(405));var c=o!=null&&o.hydratedSources||null,d=!1,p="",_=Bp;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=zp(r,null,t,1,o??null,d,!1,p,_),t[ur]=r.current,Lo(t),c)for(t=0;t<c.length;t++)o=c[t],d=o._getVersion,d=d(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,d]:r.mutableSourceEagerHydrationData.push(o,d);return new bl(r)},Gt.render=function(t,r,o){if(!Bl(r))throw Error(n(200));return $l(null,t,r,!1,o)},Gt.unmountComponentAtNode=function(t){if(!Bl(t))throw Error(n(40));return t._reactRootContainer?(Vi(function(){$l(null,null,t,!1,function(){t._reactRootContainer=null,t[ur]=null})}),!0):!1},Gt.unstable_batchedUpdates=th,Gt.unstable_renderSubtreeIntoContainer=function(t,r,o,c){if(!Bl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return $l(t,r,o,!1,c)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var Xp;function m_(){if(Xp)return fh.exports;Xp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fh.exports=p_(),fh.exports}var Jp;function g_(){if(Jp)return Hl;Jp=1;var i=m_();return Hl.createRoot=i.createRoot,Hl.hydrateRoot=i.hydrateRoot,Hl}var y_=g_(),Zo={},Zp;function v_(){if(Zp)return Zo;Zp=1,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.parse=h,Zo.serialize=v;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,u=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function h(A,N){const j=new u,$=A.length;if($<2)return j;const M=(N==null?void 0:N.decode)||E;let K=0;do{const ne=A.indexOf("=",K);if(ne===-1)break;const re=A.indexOf(";",K),de=re===-1?$:re;if(ne>de){K=A.lastIndexOf(";",ne-1)+1;continue}const Re=m(A,K,ne),Te=g(A,ne,Re),x=A.slice(Re,Te);if(j[x]===void 0){let I=m(A,ne+1,de),R=g(A,de,I);const k=M(A.slice(I,R));j[x]=k}K=de+1}while(K<$);return j}function m(A,N,j){do{const $=A.charCodeAt(N);if($!==32&&$!==9)return N}while(++N<j);return j}function g(A,N,j){for(;N>j;){const $=A.charCodeAt(--N);if($!==32&&$!==9)return N+1}return j}function v(A,N,j){const $=(j==null?void 0:j.encode)||encodeURIComponent;if(!i.test(A))throw new TypeError(`argument name is invalid: ${A}`);const M=$(N);if(!e.test(M))throw new TypeError(`argument val is invalid: ${N}`);let K=A+"="+M;if(!j)return K;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);K+="; Max-Age="+j.maxAge}if(j.domain){if(!n.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);K+="; Domain="+j.domain}if(j.path){if(!s.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);K+="; Path="+j.path}if(j.expires){if(!T(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);K+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(K+="; HttpOnly"),j.secure&&(K+="; Secure"),j.partitioned&&(K+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":K+="; Priority=Low";break;case"medium":K+="; Priority=Medium";break;case"high":K+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":K+="; SameSite=Strict";break;case"lax":K+="; SameSite=Lax";break;case"none":K+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return K}function E(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function T(A){return a.call(A)==="[object Date]"}return Zo}v_();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var em="popstate";function __(i={}){function e(s,a){let{pathname:u,search:h,hash:m}=s.location;return Ch("",{pathname:u,search:h,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:ua(a)}return w_(e,n,null,i)}function Je(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ii(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E_(){return Math.random().toString(36).substring(2,10)}function tm(i,e){return{usr:i.state,key:i.key,idx:e}}function Ch(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Gs(e):e,state:n,key:e&&e.key||s||E_()}}function ua({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Gs(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function w_(i,e,n,s={}){let{window:a=document.defaultView,v5Compat:u=!1}=s,h=a.history,m="POP",g=null,v=E();v==null&&(v=0,h.replaceState({...h.state,idx:v},""));function E(){return(h.state||{idx:null}).idx}function T(){m="POP";let M=E(),K=M==null?null:M-v;v=M,g&&g({action:m,location:$.location,delta:K})}function A(M,K){m="PUSH";let ne=Ch($.location,M,K);v=E()+1;let re=tm(ne,v),de=$.createHref(ne);try{h.pushState(re,"",de)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;a.location.assign(de)}u&&g&&g({action:m,location:$.location,delta:1})}function N(M,K){m="REPLACE";let ne=Ch($.location,M,K);v=E();let re=tm(ne,v),de=$.createHref(ne);h.replaceState(re,"",de),u&&g&&g({action:m,location:$.location,delta:0})}function j(M){let K=a.location.origin!=="null"?a.location.origin:a.location.href,ne=typeof M=="string"?M:ua(M);return ne=ne.replace(/ $/,"%20"),Je(K,`No window.location.(origin|href) available to create URL for href: ${ne}`),new URL(ne,K)}let $={get action(){return m},get location(){return i(a,h)},listen(M){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(em,T),g=M,()=>{a.removeEventListener(em,T),g=null}},createHref(M){return e(a,M)},createURL:j,encodeLocation(M){let K=j(M);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:A,replace:N,go(M){return h.go(M)}};return $}function sg(i,e,n="/"){return T_(i,e,n,!1)}function T_(i,e,n,s){let a=typeof e=="string"?Gs(e):e,u=Jr(a.pathname||"/",n);if(u==null)return null;let h=og(i);I_(h);let m=null;for(let g=0;m==null&&g<h.length;++g){let v=L_(u);m=D_(h[g],v,s)}return m}function og(i,e=[],n=[],s=""){let a=(u,h,m)=>{let g={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(Je(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let v=yr([s,g.relativePath]),E=n.concat(g);u.children&&u.children.length>0&&(Je(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),og(u.children,e,E,v)),!(u.path==null&&!u.index)&&e.push({path:v,score:x_(v,u.index),routesMeta:E})};return i.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))a(u,h);else for(let g of ag(u.path))a(u,h,g)}),e}function ag(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return a?[u,""]:[u];let h=ag(s.join("/")),m=[];return m.push(...h.map(g=>g===""?u:[u,g].join("/"))),a&&m.push(...h),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function I_(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:V_(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var S_=/^:[\w-]+$/,A_=3,R_=2,C_=1,P_=10,k_=-2,nm=i=>i==="*";function x_(i,e){let n=i.split("/"),s=n.length;return n.some(nm)&&(s+=k_),e&&(s+=R_),n.filter(a=>!nm(a)).reduce((a,u)=>a+(S_.test(u)?A_:u===""?C_:P_),s)}function V_(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function D_(i,e,n=!1){let{routesMeta:s}=i,a={},u="/",h=[];for(let m=0;m<s.length;++m){let g=s[m],v=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=ou({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},E),A=g.route;if(!T&&v&&n&&!s[s.length-1].route.index&&(T=ou({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!T)return null;Object.assign(a,T.params),h.push({params:a,pathname:yr([u,T.pathname]),pathnameBase:U_(yr([u,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(u=yr([u,T.pathnameBase]))}return h}function ou(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=N_(i.path,i.caseSensitive,i.end),a=e.match(n);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:s.reduce((v,{paramName:E,isOptional:T},A)=>{if(E==="*"){let j=m[A]||"";h=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const N=m[A];return T&&!N?v[E]=void 0:v[E]=(N||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:h,pattern:i}}function N_(i,e=!1,n=!0){ii(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function L_(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ii(!1,`The URL path "${i}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Jr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function O_(i,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof i=="string"?Gs(i):i;return{pathname:n?n.startsWith("/")?n:M_(n,e):e,search:j_(s),hash:z_(a)}}function M_(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function gh(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function F_(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lg(i){let e=F_(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function ug(i,e,n,s=!1){let a;typeof i=="string"?a=Gs(i):(a={...i},Je(!a.pathname||!a.pathname.includes("?"),gh("?","pathname","search",a)),Je(!a.pathname||!a.pathname.includes("#"),gh("#","pathname","hash",a)),Je(!a.search||!a.search.includes("#"),gh("#","search","hash",a)));let u=i===""||a.pathname==="",h=u?"/":a.pathname,m;if(h==null)m=n;else{let T=e.length-1;if(!s&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),T-=1;a.pathname=A.join("/")}m=T>=0?e[T]:"/"}let g=O_(a,m),v=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(v||E)&&(g.pathname+="/"),g}var yr=i=>i.join("/").replace(/\/\/+/g,"/"),U_=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),j_=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,z_=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function b_(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var cg=["POST","PUT","PATCH","DELETE"];new Set(cg);var B_=["GET",...cg];new Set(B_);var Ys=q.createContext(null);Ys.displayName="DataRouter";var wu=q.createContext(null);wu.displayName="DataRouterState";var hg=q.createContext({isTransitioning:!1});hg.displayName="ViewTransition";var $_=q.createContext(new Map);$_.displayName="Fetchers";var q_=q.createContext(null);q_.displayName="Await";var Xn=q.createContext(null);Xn.displayName="Navigation";var va=q.createContext(null);va.displayName="Location";var Jn=q.createContext({outlet:null,matches:[],isDataRoute:!1});Jn.displayName="Route";var Jh=q.createContext(null);Jh.displayName="RouteError";function H_(i,{relative:e}={}){Je(_a(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=q.useContext(Xn),{hash:a,pathname:u,search:h}=Ea(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:yr([n,u])),s.createHref({pathname:m,search:h,hash:a})}function _a(){return q.useContext(va)!=null}function zi(){return Je(_a(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(va).location}var dg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fg(i){q.useContext(Xn).static||q.useLayoutEffect(i)}function W_(){let{isDataRoute:i}=q.useContext(Jn);return i?s0():Q_()}function Q_(){Je(_a(),"useNavigate() may be used only in the context of a <Router> component.");let i=q.useContext(Ys),{basename:e,navigator:n}=q.useContext(Xn),{matches:s}=q.useContext(Jn),{pathname:a}=zi(),u=JSON.stringify(lg(s)),h=q.useRef(!1);return fg(()=>{h.current=!0}),q.useCallback((g,v={})=>{if(ii(h.current,dg),!h.current)return;if(typeof g=="number"){n.go(g);return}let E=ug(g,JSON.parse(u),a,v.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:yr([e,E.pathname])),(v.replace?n.replace:n.push)(E,v.state,v)},[e,n,u,a,i])}q.createContext(null);function pg(){let{matches:i}=q.useContext(Jn),e=i[i.length-1];return e?e.params:{}}function Ea(i,{relative:e}={}){let{matches:n}=q.useContext(Jn),{pathname:s}=zi(),a=JSON.stringify(lg(n));return q.useMemo(()=>ug(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function K_(i,e){return mg(i,e)}function mg(i,e,n,s){var $;Je(_a(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(Xn),{matches:u}=q.useContext(Jn),h=u[u.length-1],m=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=zi(),E;if(e){let M=typeof e=="string"?Gs(e):e;Je(g==="/"||(($=M.pathname)==null?void 0:$.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${M.pathname}" was given in the \`location\` prop.`),E=M}else E=v;let T=E.pathname||"/",A=T;if(g!=="/"){let M=g.replace(/^\//,"").split("/");A="/"+T.replace(/^\//,"").split("/").slice(M.length).join("/")}let N=sg(i,{pathname:A}),j=Z_(N&&N.map(M=>Object.assign({},M,{params:Object.assign({},m,M.params),pathname:yr([g,a.encodeLocation?a.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:yr([g,a.encodeLocation?a.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),u,n,s);return e&&j?q.createElement(va.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},j):j}function G_(){let i=i0(),e=b_(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:a},n):null,null)}var Y_=q.createElement(G_,null),X_=class extends q.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?q.createElement(Jn.Provider,{value:this.props.routeContext},q.createElement(Jh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function J_({routeContext:i,match:e,children:n}){let s=q.useContext(Ys);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Jn.Provider,{value:i},n)}function Z_(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let a=i,u=n==null?void 0:n.errors;if(u!=null){let g=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);Je(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let h=!1,m=-1;if(n)for(let g=0;g<a.length;g++){let v=a[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=g),v.route.id){let{loaderData:E,errors:T}=n,A=v.route.loader&&!E.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||A){h=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}return a.reduceRight((g,v,E)=>{let T,A=!1,N=null,j=null;n&&(T=u&&v.route.id?u[v.route.id]:void 0,N=v.route.errorElement||Y_,h&&(m<0&&E===0?(o0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,j=null):m===E&&(A=!0,j=v.route.hydrateFallbackElement||null)));let $=e.concat(a.slice(0,E+1)),M=()=>{let K;return T?K=N:A?K=j:v.route.Component?K=q.createElement(v.route.Component,null):v.route.element?K=v.route.element:K=g,q.createElement(J_,{match:v,routeContext:{outlet:g,matches:$,isDataRoute:n!=null},children:K})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?q.createElement(X_,{location:n.location,revalidation:n.revalidation,component:N,error:T,children:M(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):M()},null)}function Zh(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e0(i){let e=q.useContext(Ys);return Je(e,Zh(i)),e}function t0(i){let e=q.useContext(wu);return Je(e,Zh(i)),e}function n0(i){let e=q.useContext(Jn);return Je(e,Zh(i)),e}function ed(i){let e=n0(i),n=e.matches[e.matches.length-1];return Je(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function r0(){return ed("useRouteId")}function i0(){var s;let i=q.useContext(Jh),e=t0("useRouteError"),n=ed("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function s0(){let{router:i}=e0("useNavigate"),e=ed("useNavigate"),n=q.useRef(!1);return fg(()=>{n.current=!0}),q.useCallback(async(a,u={})=>{ii(n.current,dg),n.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...u}))},[i,e])}var rm={};function o0(i,e,n){rm[i]||(rm[i]=!0,ii(!1,n))}q.memo(a0);function a0({routes:i,future:e,state:n}){return mg(i,void 0,n,e)}function Qr(i){Je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function l0({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:u=!1}){Je(!_a(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),m=q.useMemo(()=>({basename:h,navigator:a,static:u,future:{}}),[h,a,u]);typeof n=="string"&&(n=Gs(n));let{pathname:g="/",search:v="",hash:E="",state:T=null,key:A="default"}=n,N=q.useMemo(()=>{let j=Jr(g,h);return j==null?null:{location:{pathname:j,search:v,hash:E,state:T,key:A},navigationType:s}},[h,g,v,E,T,A,s]);return ii(N!=null,`<Router basename="${h}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:q.createElement(Xn.Provider,{value:m},q.createElement(va.Provider,{children:e,value:N}))}function u0({children:i,location:e}){return K_(Ph(i),e)}function Ph(i,e=[]){let n=[];return q.Children.forEach(i,(s,a)=>{if(!q.isValidElement(s))return;let u=[...e,a];if(s.type===q.Fragment){n.push.apply(n,Ph(s.props.children,u));return}Je(s.type===Qr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Je(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Ph(s.props.children,u)),n.push(h)}),n}var Jl="get",Zl="application/x-www-form-urlencoded";function Tu(i){return i!=null&&typeof i.tagName=="string"}function c0(i){return Tu(i)&&i.tagName.toLowerCase()==="button"}function h0(i){return Tu(i)&&i.tagName.toLowerCase()==="form"}function d0(i){return Tu(i)&&i.tagName.toLowerCase()==="input"}function f0(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function p0(i,e){return i.button===0&&(!e||e==="_self")&&!f0(i)}var Wl=null;function m0(){if(Wl===null)try{new FormData(document.createElement("form"),0),Wl=!1}catch{Wl=!0}return Wl}var g0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yh(i){return i!=null&&!g0.has(i)?(ii(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zl}"`),null):i}function y0(i,e){let n,s,a,u,h;if(h0(i)){let m=i.getAttribute("action");s=m?Jr(m,e):null,n=i.getAttribute("method")||Jl,a=yh(i.getAttribute("enctype"))||Zl,u=new FormData(i)}else if(c0(i)||d0(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?Jr(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Jl,a=yh(i.getAttribute("formenctype"))||yh(m.getAttribute("enctype"))||Zl,u=new FormData(m,i),!m0()){let{name:v,type:E,value:T}=i;if(E==="image"){let A=v?`${v}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else v&&u.append(v,T)}}else{if(Tu(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jl,s=null,a=Zl,h=i}return u&&a==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:u,body:h}}function td(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function v0(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _0(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function E0(i,e,n){let s=await Promise.all(i.map(async a=>{let u=e.routes[a.route.id];if(u){let h=await v0(u,n);return h.links?h.links():[]}return[]}));return S0(s.flat(1).filter(_0).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function im(i,e,n,s,a,u){let h=(g,v)=>n[v]?g.route.id!==n[v].route.id:!0,m=(g,v)=>{var E;return n[v].pathname!==g.pathname||((E=n[v].route.path)==null?void 0:E.endsWith("*"))&&n[v].params["*"]!==g.params["*"]};return u==="assets"?e.filter((g,v)=>h(g,v)||m(g,v)):u==="data"?e.filter((g,v)=>{var T;let E=s.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(h(g,v)||m(g,v))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=n[0])==null?void 0:T.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function w0(i,e){return T0(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function T0(i){return[...new Set(i)]}function I0(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function S0(i,e){let n=new Set;return new Set(e),i.reduce((s,a)=>{let u=JSON.stringify(I0(a));return n.has(u)||(n.add(u),s.push({key:u,link:a})),s},[])}function A0(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function R0(){let i=q.useContext(Ys);return td(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function C0(){let i=q.useContext(wu);return td(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var nd=q.createContext(void 0);nd.displayName="FrameworkContext";function gg(){let i=q.useContext(nd);return td(i,"You must render this element inside a <HydratedRouter> element"),i}function P0(i,e){let n=q.useContext(nd),[s,a]=q.useState(!1),[u,h]=q.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:v,onMouseLeave:E,onTouchStart:T}=e,A=q.useRef(null);q.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let $=K=>{K.forEach(ne=>{h(ne.isIntersecting)})},M=new IntersectionObserver($,{threshold:.5});return A.current&&M.observe(A.current),()=>{M.disconnect()}}},[i]),q.useEffect(()=>{if(s){let $=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout($)}}},[s]);let N=()=>{a(!0)},j=()=>{a(!1),h(!1)};return n?i!=="intent"?[u,A,{}]:[u,A,{onFocus:ea(m,N),onBlur:ea(g,j),onMouseEnter:ea(v,N),onMouseLeave:ea(E,j),onTouchStart:ea(T,N)}]:[!1,A,{}]}function ea(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function k0({page:i,...e}){let{router:n}=R0(),s=q.useMemo(()=>sg(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?q.createElement(V0,{page:i,matches:s,...e}):(console.warn(`Tried to prefetch ${i} but no routes matched.`),null)}function x0(i){let{manifest:e,routeModules:n}=gg(),[s,a]=q.useState([]);return q.useEffect(()=>{let u=!1;return E0(i,e,n).then(h=>{u||a(h)}),()=>{u=!0}},[i,e,n]),s}function V0({page:i,matches:e,...n}){let s=zi(),{manifest:a,routeModules:u}=gg(),{loaderData:h,matches:m}=C0(),g=q.useMemo(()=>im(i,e,m,a,s,"data"),[i,e,m,a,s]),v=q.useMemo(()=>im(i,e,m,a,s,"assets"),[i,e,m,a,s]),E=q.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let N=new Set,j=!1;if(e.forEach(M=>{var ne;let K=a.routes[M.route.id];!K||!K.hasLoader||(!g.some(re=>re.route.id===M.route.id)&&M.route.id in h&&((ne=u[M.route.id])!=null&&ne.shouldRevalidate)||K.hasClientLoader?j=!0:N.add(M.route.id))}),N.size===0)return[];let $=A0(i);return j&&N.size>0&&$.searchParams.set("_routes",e.filter(M=>N.has(M.route.id)).map(M=>M.route.id).join(",")),[$.pathname+$.search]},[h,s,a,g,e,i,u]),T=q.useMemo(()=>w0(v,a),[v,a]),A=x0(v);return q.createElement(q.Fragment,null,E.map(N=>q.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),T.map(N=>q.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),A.map(({key:N,link:j})=>q.createElement("link",{key:N,...j})))}function D0(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yg&&(window.__reactRouterVersion="7.0.1")}catch{}function N0({basename:i,children:e,window:n}){let s=q.useRef();s.current==null&&(s.current=__({window:n,v5Compat:!0}));let a=s.current,[u,h]=q.useState({action:a.action,location:a.location}),m=q.useCallback(g=>{q.startTransition(()=>h(g))},[h]);return q.useLayoutEffect(()=>a.listen(m),[a,m]),q.createElement(l0,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:a})}var vg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wn=q.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:u,replace:h,state:m,target:g,to:v,preventScrollReset:E,viewTransition:T,...A},N){let{basename:j}=q.useContext(Xn),$=typeof v=="string"&&vg.test(v),M,K=!1;if(typeof v=="string"&&$&&(M=v,yg))try{let R=new URL(window.location.href),k=v.startsWith("//")?new URL(R.protocol+v):new URL(v),D=Jr(k.pathname,j);k.origin===R.origin&&D!=null?v=D+k.search+k.hash:K=!0}catch{ii(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=H_(v,{relative:a}),[re,de,Re]=P0(s,A),Te=F0(v,{replace:h,state:m,target:g,preventScrollReset:E,relative:a,viewTransition:T});function x(R){e&&e(R),R.defaultPrevented||Te(R)}let I=q.createElement("a",{...A,...Re,href:M||ne,onClick:K||u?e:x,ref:D0(N,de),target:g,"data-discover":!$&&n==="render"?"true":void 0});return re&&!$?q.createElement(q.Fragment,null,I,q.createElement(k0,{page:ne})):I});Wn.displayName="Link";var L0=q.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:u,to:h,viewTransition:m,children:g,...v},E){let T=Ea(h,{relative:v.relative}),A=zi(),N=q.useContext(wu),{navigator:j,basename:$}=q.useContext(Xn),M=N!=null&&B0(T)&&m===!0,K=j.encodeLocation?j.encodeLocation(T).pathname:T.pathname,ne=A.pathname,re=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(ne=ne.toLowerCase(),re=re?re.toLowerCase():null,K=K.toLowerCase()),re&&$&&(re=Jr(re,$)||re);const de=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let Re=ne===K||!a&&ne.startsWith(K)&&ne.charAt(de)==="/",Te=re!=null&&(re===K||!a&&re.startsWith(K)&&re.charAt(K.length)==="/"),x={isActive:Re,isPending:Te,isTransitioning:M},I=Re?e:void 0,R;typeof s=="function"?R=s(x):R=[s,Re?"active":null,Te?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(x):u;return q.createElement(Wn,{...v,"aria-current":I,className:R,ref:E,style:k,to:h,viewTransition:m},typeof g=="function"?g(x):g)});L0.displayName="NavLink";var O0=q.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:u,method:h=Jl,action:m,onSubmit:g,relative:v,preventScrollReset:E,viewTransition:T,...A},N)=>{let j=z0(),$=b0(m,{relative:v}),M=h.toLowerCase()==="get"?"get":"post",K=typeof m=="string"&&vg.test(m),ne=re=>{if(g&&g(re),re.defaultPrevented)return;re.preventDefault();let de=re.nativeEvent.submitter,Re=(de==null?void 0:de.getAttribute("formmethod"))||h;j(de||re.currentTarget,{fetcherKey:e,method:Re,navigate:n,replace:a,state:u,relative:v,preventScrollReset:E,viewTransition:T})};return q.createElement("form",{ref:N,method:M,action:$,onSubmit:s?g:ne,...A,"data-discover":!K&&i==="render"?"true":void 0})});O0.displayName="Form";function M0(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _g(i){let e=q.useContext(Ys);return Je(e,M0(i)),e}function F0(i,{target:e,replace:n,state:s,preventScrollReset:a,relative:u,viewTransition:h}={}){let m=W_(),g=zi(),v=Ea(i,{relative:u});return q.useCallback(E=>{if(p0(E,e)){E.preventDefault();let T=n!==void 0?n:ua(g)===ua(v);m(i,{replace:T,state:s,preventScrollReset:a,relative:u,viewTransition:h})}},[g,m,v,n,s,e,i,a,u,h])}var U0=0,j0=()=>`__${String(++U0)}__`;function z0(){let{router:i}=_g("useSubmit"),{basename:e}=q.useContext(Xn),n=r0();return q.useCallback(async(s,a={})=>{let{action:u,method:h,encType:m,formData:g,body:v}=y0(s,e);if(a.navigate===!1){let E=a.fetcherKey||j0();await i.fetch(E,n,a.action||u,{preventScrollReset:a.preventScrollReset,formData:g,body:v,formMethod:a.method||h,formEncType:a.encType||m,flushSync:a.flushSync})}else await i.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:g,body:v,formMethod:a.method||h,formEncType:a.encType||m,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,n])}function b0(i,{relative:e}={}){let{basename:n}=q.useContext(Xn),s=q.useContext(Jn);Je(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),u={...Ea(i||".",{relative:e})},h=zi();if(i==null){u.search=h.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(E=>E==="")){m.delete("index"),g.filter(T=>T).forEach(T=>m.append("index",T));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:yr([n,u.pathname])),ua(u)}function B0(i,e={}){let n=q.useContext(hg);Je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=_g("useViewTransitionState"),a=Ea(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Jr(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=Jr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return ou(a.pathname,h)!=null||ou(a.pathname,u)!=null}new TextEncoder;const Eg=q.createContext(),$0=({children:i})=>{const[e,n]=q.useState([]),s=T=>e.some(A=>A.id===T),a=T=>{s(T.id)?console.log("El producto ya está en el carrito"):n(A=>[...A,T])},u=T=>{const A=e.filter(N=>N.id!==T);n(A)},h=()=>{n([])},m=()=>{let T=0;return e.forEach(A=>{T+=A.quantity*A.price}),T},v=(()=>{let T=0;return e.forEach(A=>{T+=A.quantity}),T})(),E={cart:e,isInCart:s,addItem:a,removeItem:u,clearCart:h,getTotal:m,totalQuantity:v};return J.jsx(Eg.Provider,{value:E,children:i})},wa=()=>q.useContext(Eg);function q0(){const{totalQuantity:i}=wa();return J.jsxs("a",{className:"nav-link",href:"#",children:[J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-cart",viewBox:"0 0 16 16",children:J.jsx("path",{d:"M0 1.5A.5.5 0 0 1 .5 1h1a.5.5 0 0 1 .485.379L2.89 5H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 14H4a.5.5 0 0 1-.491-.408L1.01 2H.5a.5.5 0 0 1-.5-.5zM3.14 6l1.25 6H12.5l1.25-6H3.14zM5 12a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm6 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})}),i]})}function H0({title:i}){return J.jsx("nav",{className:"navbar",children:J.jsxs("div",{className:"navbar-container",children:[J.jsx(Wn,{className:"navbar-brand",to:"/",children:i}),J.jsxs("ul",{className:"navbar-nav",children:[J.jsx("li",{className:"nav-item",children:J.jsx(Wn,{className:"nav-link active","aria-current":"page",to:"/category/celular",children:"Phones"})}),J.jsx("li",{className:"nav-item",children:J.jsx(Wn,{className:"nav-link",to:"/category/tablet",children:"Tablets"})}),J.jsx("li",{className:"nav-item",children:J.jsx(Wn,{className:"nav-link",to:"/category/computer",children:"Noteboks"})})]}),J.jsx("form",{className:"cart",role:"search",children:J.jsx(Wn,{to:"/cart",children:J.jsx(q0,{cartCount:5})})})]})})}function W0({product:i}){return J.jsxs("div",{className:"item",children:[J.jsx("img",{src:i.img,alt:i.name}),J.jsxs("div",{className:"itemText",children:[J.jsx("h2",{children:i.name}),J.jsxs("p",{children:["$",i.price]}),J.jsx("p",{children:i.description}),J.jsx(Wn,{className:"details",to:`/detail/${i.id}`,children:"Ver detalles"})]})]})}function Q0({products:i}){return J.jsx("div",{className:"itemList",children:i.map(e=>J.jsx(W0,{product:e},e.id))})}const K0=q.memo(Q0);var sm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},G0=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[n++];e[s++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[n++],h=i[n++],m=i[n++],g=((a&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Tg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const u=i[a],h=a+1<i.length,m=h?i[a+1]:0,g=a+2<i.length,v=g?i[a+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let A=(m&15)<<2|v>>6,N=v&63;g||(N=64,h||(A=64)),s.push(n[E],n[T],n[A],n[N])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(wg(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):G0(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const u=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const T=a<i.length?n[i.charAt(a)]:64;if(++a,u==null||m==null||v==null||T==null)throw new Y0;const A=u<<2|m>>4;if(s.push(A),v!==64){const N=m<<4&240|v>>2;if(s.push(N),T!==64){const j=v<<6&192|T;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Y0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X0=function(i){const e=wg(i);return Tg.encodeByteArray(e,!0)},au=function(i){return X0(i).replace(/\./g,"")},J0=function(i){try{return Tg.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=()=>Z0().__FIREBASE_DEFAULTS__,tE=()=>{if(typeof process>"u"||typeof sm>"u")return;const i=sm.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},nE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&J0(i[1]);return e&&JSON.parse(e)},rd=()=>{try{return eE()||tE()||nE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},rE=i=>{var e,n;return(n=(e=rd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},iE=i=>{const e=rE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Ig=()=>{var i;return(i=rd())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[au(JSON.stringify(n)),au(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lE(){var i;const e=(i=rd())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uE(){return!lE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cE(){try{return typeof indexedDB=="object"}catch{return!1}}function hE(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="FirebaseError";class Xs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=dE,Object.setPrototypeOf(this,Xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sg.prototype.create)}}class Sg{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,u=this.errors[e],h=u?fE(u,s):"Error",m=`${this.serviceName}: ${h} (${a}).`;return new Xs(a,m,s)}}function fE(i,e){return i.replace(pE,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const pE=/\{\$([^}]+)}/g;function kh(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const u=i[a],h=e[a];if(om(u)&&om(h)){if(!kh(u,h))return!1}else if(u!==h)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function om(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(i){return i&&i._delegate?i._delegate:i}class ca{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new sE;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yE(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:a});s.resolve(u)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(a,u);const h=this.instances.get(a);return h&&e(h,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gE(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gE(i){return i===Oi?void 0:i}function yE(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ne||(Ne={}));const _E={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},EE=Ne.INFO,wE={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},TE=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=wE[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ag{constructor(e){this.name=e,this._logLevel=EE,this._logHandler=TE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_E[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const IE=(i,e)=>e.some(n=>i instanceof n);let am,lm;function SE(){return am||(am=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AE(){return lm||(lm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rg=new WeakMap,xh=new WeakMap,Cg=new WeakMap,vh=new WeakMap,id=new WeakMap;function RE(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(Gr(i.result)),a()},h=()=>{s(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Rg.set(n,i)}).catch(()=>{}),id.set(e,i),e}function CE(i){if(xh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),a()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});xh.set(i,e)}let Vh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return xh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Cg.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function PE(i){Vh=i(Vh)}function kE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(_h(this),e,...n);return Cg.set(s,e.sort?e.sort():[e]),Gr(s)}:AE().includes(i)?function(...e){return i.apply(_h(this),e),Gr(Rg.get(this))}:function(...e){return Gr(i.apply(_h(this),e))}}function xE(i){return typeof i=="function"?kE(i):(i instanceof IDBTransaction&&CE(i),IE(i,SE())?new Proxy(i,Vh):i)}function Gr(i){if(i instanceof IDBRequest)return RE(i);if(vh.has(i))return vh.get(i);const e=xE(i);return e!==i&&(vh.set(i,e),id.set(e,i)),e}const _h=i=>id.get(i);function VE(i,e,{blocked:n,upgrade:s,blocking:a,terminated:u}={}){const h=indexedDB.open(i,e),m=Gr(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Gr(h.result),g.oldVersion,g.newVersion,Gr(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),a&&g.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const DE=["get","getKey","getAll","getAllKeys","count"],NE=["put","add","delete","clear"],Eh=new Map;function um(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Eh.get(e))return Eh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=NE.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||DE.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,a?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&g.done]))[0]};return Eh.set(e,u),u}PE(i=>({...i,get:(e,n,s)=>um(e,n)||i.get(e,n,s),has:(e,n)=>!!um(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OE(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function OE(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dh="@firebase/app",cm="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new Ag("@firebase/app"),ME="@firebase/app-compat",FE="@firebase/analytics-compat",UE="@firebase/analytics",jE="@firebase/app-check-compat",zE="@firebase/app-check",bE="@firebase/auth",BE="@firebase/auth-compat",$E="@firebase/database",qE="@firebase/data-connect",HE="@firebase/database-compat",WE="@firebase/functions",QE="@firebase/functions-compat",KE="@firebase/installations",GE="@firebase/installations-compat",YE="@firebase/messaging",XE="@firebase/messaging-compat",JE="@firebase/performance",ZE="@firebase/performance-compat",ew="@firebase/remote-config",tw="@firebase/remote-config-compat",nw="@firebase/storage",rw="@firebase/storage-compat",iw="@firebase/firestore",sw="@firebase/vertexai",ow="@firebase/firestore-compat",aw="firebase",lw="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh="[DEFAULT]",uw={[Dh]:"fire-core",[ME]:"fire-core-compat",[UE]:"fire-analytics",[FE]:"fire-analytics-compat",[zE]:"fire-app-check",[jE]:"fire-app-check-compat",[bE]:"fire-auth",[BE]:"fire-auth-compat",[$E]:"fire-rtdb",[qE]:"fire-data-connect",[HE]:"fire-rtdb-compat",[WE]:"fire-fn",[QE]:"fire-fn-compat",[KE]:"fire-iid",[GE]:"fire-iid-compat",[YE]:"fire-fcm",[XE]:"fire-fcm-compat",[JE]:"fire-perf",[ZE]:"fire-perf-compat",[ew]:"fire-rc",[tw]:"fire-rc-compat",[nw]:"fire-gcs",[rw]:"fire-gcs-compat",[iw]:"fire-fst",[ow]:"fire-fst-compat",[sw]:"fire-vertex","fire-js":"fire-js",[aw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Map,cw=new Map,Lh=new Map;function hm(i,e){try{i.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function uu(i){const e=i.name;if(Lh.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;Lh.set(e,i);for(const n of lu.values())hm(n,i);for(const n of cw.values())hm(n,i);return!0}function hw(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new Sg("app","Firebase",dw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=lw;function Pg(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Nh,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw Yr.create("bad-app-name",{appName:String(a)});if(n||(n=Ig()),!n)throw Yr.create("no-options");const u=lu.get(a);if(u){if(kh(n,u.options)&&kh(s,u.config))return u;throw Yr.create("duplicate-app",{appName:a})}const h=new vE(a);for(const g of Lh.values())h.addComponent(g);const m=new fw(n,s,h);return lu.set(a,m),m}function mw(i=Nh){const e=lu.get(i);if(!e&&i===Nh&&Ig())return Pg();if(!e)throw Yr.create("no-app",{appName:i});return e}function js(i,e,n){var s;let a=(s=uw[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const u=a.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${a}" with version "${e}":`];u&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(m.join(" "));return}uu(new ca(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="firebase-heartbeat-database",yw=1,ha="firebase-heartbeat-store";let wh=null;function kg(){return wh||(wh=VE(gw,yw,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ha)}catch(n){console.warn(n)}}}}).catch(i=>{throw Yr.create("idb-open",{originalErrorMessage:i.message})})),wh}async function vw(i){try{const n=(await kg()).transaction(ha),s=await n.objectStore(ha).get(xg(i));return await n.done,s}catch(e){if(e instanceof Xs)_r.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function dm(i,e){try{const s=(await kg()).transaction(ha,"readwrite");await s.objectStore(ha).put(e,xg(i)),await s.done}catch(n){if(n instanceof Xs)_r.warn(n.message);else{const s=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(s.message)}}}function xg(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=1024,Ew=30*24*60*60*1e3;class ww{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Iw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=fm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=Ew}),this._storage.overwrite(this._heartbeatsCache))}catch(s){_r.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fm(),{heartbeatsToSend:s,unsentEntries:a}=Tw(this._heartbeatsCache.heartbeats),u=au(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return _r.warn(n),""}}}function fm(){return new Date().toISOString().substring(0,10)}function Tw(i,e=_w){const n=[];let s=i.slice();for(const a of i){const u=n.find(h=>h.agent===a.agent);if(u){if(u.dates.push(a.date),pm(n)>e){u.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),pm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Iw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cE()?hE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return dm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return dm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function pm(i){return au(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(i){uu(new ca("platform-logger",e=>new LE(e),"PRIVATE")),uu(new ca("heartbeat",e=>new ww(e),"PRIVATE")),js(Dh,cm,i),js(Dh,cm,"esm2017"),js("fire-js","")}Sw("");var mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,Vg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function R(){}R.prototype=I.prototype,x.D=I.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(k,D,O){for(var C=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)C[tt-2]=arguments[tt];return I.prototype[D].apply(k,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,I,R){R||(R=0);var k=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)k[D]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(D=0;16>D;++D)k[D]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=x.g[0],R=x.g[1],D=x.g[2];var O=x.g[3],C=I+(O^R&(D^O))+k[0]+3614090360&4294967295;I=R+(C<<7&4294967295|C>>>25),C=O+(D^I&(R^D))+k[1]+3905402710&4294967295,O=I+(C<<12&4294967295|C>>>20),C=D+(R^O&(I^R))+k[2]+606105819&4294967295,D=O+(C<<17&4294967295|C>>>15),C=R+(I^D&(O^I))+k[3]+3250441966&4294967295,R=D+(C<<22&4294967295|C>>>10),C=I+(O^R&(D^O))+k[4]+4118548399&4294967295,I=R+(C<<7&4294967295|C>>>25),C=O+(D^I&(R^D))+k[5]+1200080426&4294967295,O=I+(C<<12&4294967295|C>>>20),C=D+(R^O&(I^R))+k[6]+2821735955&4294967295,D=O+(C<<17&4294967295|C>>>15),C=R+(I^D&(O^I))+k[7]+4249261313&4294967295,R=D+(C<<22&4294967295|C>>>10),C=I+(O^R&(D^O))+k[8]+1770035416&4294967295,I=R+(C<<7&4294967295|C>>>25),C=O+(D^I&(R^D))+k[9]+2336552879&4294967295,O=I+(C<<12&4294967295|C>>>20),C=D+(R^O&(I^R))+k[10]+4294925233&4294967295,D=O+(C<<17&4294967295|C>>>15),C=R+(I^D&(O^I))+k[11]+2304563134&4294967295,R=D+(C<<22&4294967295|C>>>10),C=I+(O^R&(D^O))+k[12]+1804603682&4294967295,I=R+(C<<7&4294967295|C>>>25),C=O+(D^I&(R^D))+k[13]+4254626195&4294967295,O=I+(C<<12&4294967295|C>>>20),C=D+(R^O&(I^R))+k[14]+2792965006&4294967295,D=O+(C<<17&4294967295|C>>>15),C=R+(I^D&(O^I))+k[15]+1236535329&4294967295,R=D+(C<<22&4294967295|C>>>10),C=I+(D^O&(R^D))+k[1]+4129170786&4294967295,I=R+(C<<5&4294967295|C>>>27),C=O+(R^D&(I^R))+k[6]+3225465664&4294967295,O=I+(C<<9&4294967295|C>>>23),C=D+(I^R&(O^I))+k[11]+643717713&4294967295,D=O+(C<<14&4294967295|C>>>18),C=R+(O^I&(D^O))+k[0]+3921069994&4294967295,R=D+(C<<20&4294967295|C>>>12),C=I+(D^O&(R^D))+k[5]+3593408605&4294967295,I=R+(C<<5&4294967295|C>>>27),C=O+(R^D&(I^R))+k[10]+38016083&4294967295,O=I+(C<<9&4294967295|C>>>23),C=D+(I^R&(O^I))+k[15]+3634488961&4294967295,D=O+(C<<14&4294967295|C>>>18),C=R+(O^I&(D^O))+k[4]+3889429448&4294967295,R=D+(C<<20&4294967295|C>>>12),C=I+(D^O&(R^D))+k[9]+568446438&4294967295,I=R+(C<<5&4294967295|C>>>27),C=O+(R^D&(I^R))+k[14]+3275163606&4294967295,O=I+(C<<9&4294967295|C>>>23),C=D+(I^R&(O^I))+k[3]+4107603335&4294967295,D=O+(C<<14&4294967295|C>>>18),C=R+(O^I&(D^O))+k[8]+1163531501&4294967295,R=D+(C<<20&4294967295|C>>>12),C=I+(D^O&(R^D))+k[13]+2850285829&4294967295,I=R+(C<<5&4294967295|C>>>27),C=O+(R^D&(I^R))+k[2]+4243563512&4294967295,O=I+(C<<9&4294967295|C>>>23),C=D+(I^R&(O^I))+k[7]+1735328473&4294967295,D=O+(C<<14&4294967295|C>>>18),C=R+(O^I&(D^O))+k[12]+2368359562&4294967295,R=D+(C<<20&4294967295|C>>>12),C=I+(R^D^O)+k[5]+4294588738&4294967295,I=R+(C<<4&4294967295|C>>>28),C=O+(I^R^D)+k[8]+2272392833&4294967295,O=I+(C<<11&4294967295|C>>>21),C=D+(O^I^R)+k[11]+1839030562&4294967295,D=O+(C<<16&4294967295|C>>>16),C=R+(D^O^I)+k[14]+4259657740&4294967295,R=D+(C<<23&4294967295|C>>>9),C=I+(R^D^O)+k[1]+2763975236&4294967295,I=R+(C<<4&4294967295|C>>>28),C=O+(I^R^D)+k[4]+1272893353&4294967295,O=I+(C<<11&4294967295|C>>>21),C=D+(O^I^R)+k[7]+4139469664&4294967295,D=O+(C<<16&4294967295|C>>>16),C=R+(D^O^I)+k[10]+3200236656&4294967295,R=D+(C<<23&4294967295|C>>>9),C=I+(R^D^O)+k[13]+681279174&4294967295,I=R+(C<<4&4294967295|C>>>28),C=O+(I^R^D)+k[0]+3936430074&4294967295,O=I+(C<<11&4294967295|C>>>21),C=D+(O^I^R)+k[3]+3572445317&4294967295,D=O+(C<<16&4294967295|C>>>16),C=R+(D^O^I)+k[6]+76029189&4294967295,R=D+(C<<23&4294967295|C>>>9),C=I+(R^D^O)+k[9]+3654602809&4294967295,I=R+(C<<4&4294967295|C>>>28),C=O+(I^R^D)+k[12]+3873151461&4294967295,O=I+(C<<11&4294967295|C>>>21),C=D+(O^I^R)+k[15]+530742520&4294967295,D=O+(C<<16&4294967295|C>>>16),C=R+(D^O^I)+k[2]+3299628645&4294967295,R=D+(C<<23&4294967295|C>>>9),C=I+(D^(R|~O))+k[0]+4096336452&4294967295,I=R+(C<<6&4294967295|C>>>26),C=O+(R^(I|~D))+k[7]+1126891415&4294967295,O=I+(C<<10&4294967295|C>>>22),C=D+(I^(O|~R))+k[14]+2878612391&4294967295,D=O+(C<<15&4294967295|C>>>17),C=R+(O^(D|~I))+k[5]+4237533241&4294967295,R=D+(C<<21&4294967295|C>>>11),C=I+(D^(R|~O))+k[12]+1700485571&4294967295,I=R+(C<<6&4294967295|C>>>26),C=O+(R^(I|~D))+k[3]+2399980690&4294967295,O=I+(C<<10&4294967295|C>>>22),C=D+(I^(O|~R))+k[10]+4293915773&4294967295,D=O+(C<<15&4294967295|C>>>17),C=R+(O^(D|~I))+k[1]+2240044497&4294967295,R=D+(C<<21&4294967295|C>>>11),C=I+(D^(R|~O))+k[8]+1873313359&4294967295,I=R+(C<<6&4294967295|C>>>26),C=O+(R^(I|~D))+k[15]+4264355552&4294967295,O=I+(C<<10&4294967295|C>>>22),C=D+(I^(O|~R))+k[6]+2734768916&4294967295,D=O+(C<<15&4294967295|C>>>17),C=R+(O^(D|~I))+k[13]+1309151649&4294967295,R=D+(C<<21&4294967295|C>>>11),C=I+(D^(R|~O))+k[4]+4149444226&4294967295,I=R+(C<<6&4294967295|C>>>26),C=O+(R^(I|~D))+k[11]+3174756917&4294967295,O=I+(C<<10&4294967295|C>>>22),C=D+(I^(O|~R))+k[2]+718787259&4294967295,D=O+(C<<15&4294967295|C>>>17),C=R+(O^(D|~I))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+O&4294967295}s.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var R=I-this.blockSize,k=this.B,D=this.h,O=0;O<I;){if(D==0)for(;O<=R;)a(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<I;)if(k[D++]=x.charCodeAt(O++),D==this.blockSize){a(this,k),D=0;break}}else for(;O<I;)if(k[D++]=x[O++],D==this.blockSize){a(this,k),D=0;break}}this.h=D,this.o+=I},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var R=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=R&255,R/=256;for(this.u(x),x=Array(16),I=R=0;4>I;++I)for(var k=0;32>k;k+=8)x[R++]=this.g[I]>>>k&255;return x};function u(x,I){var R=m;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=I(x)}function h(x,I){this.h=I;for(var R=[],k=!0,D=x.length-1;0<=D;D--){var O=x[D]|0;k&&O==I||(R[D]=O,k=!1)}this.g=R}var m={};function g(x){return-128<=x&&128>x?u(x,function(I){return new h([I|0],0>I?-1:0)}):new h([x|0],0>x?-1:0)}function v(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return M(v(-x));for(var I=[],R=1,k=0;x>=R;k++)I[k]=x/R|0,R*=4294967296;return new h(I,0)}function E(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return M(E(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(I,8)),k=T,D=0;D<x.length;D+=8){var O=Math.min(8,x.length-D),C=parseInt(x.substring(D,D+O),I);8>O?(O=v(Math.pow(I,O)),k=k.j(O).add(v(C))):(k=k.j(R),k=k.add(v(C)))}return k}var T=g(0),A=g(1),N=g(16777216);i=h.prototype,i.m=function(){if($(this))return-M(this).m();for(var x=0,I=1,R=0;R<this.g.length;R++){var k=this.i(R);x+=(0<=k?k:4294967296+k)*I,I*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(j(this))return"0";if($(this))return"-"+M(this).toString(x);for(var I=v(Math.pow(x,6)),R=this,k="";;){var D=de(R,I).g;R=K(R,D.j(I));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=D,j(R))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function j(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function $(x){return x.h==-1}i.l=function(x){return x=K(this,x),$(x)?-1:j(x)?0:1};function M(x){for(var I=x.g.length,R=[],k=0;k<I;k++)R[k]=~x.g[k];return new h(R,~x.h).add(A)}i.abs=function(){return $(this)?M(this):this},i.add=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],k=0,D=0;D<=I;D++){var O=k+(this.i(D)&65535)+(x.i(D)&65535),C=(O>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);k=C>>>16,O&=65535,C&=65535,R[D]=C<<16|O}return new h(R,R[R.length-1]&-2147483648?-1:0)};function K(x,I){return x.add(M(I))}i.j=function(x){if(j(this)||j(x))return T;if($(this))return $(x)?M(this).j(M(x)):M(M(this).j(x));if($(x))return M(this.j(M(x)));if(0>this.l(N)&&0>x.l(N))return v(this.m()*x.m());for(var I=this.g.length+x.g.length,R=[],k=0;k<2*I;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<x.g.length;D++){var O=this.i(k)>>>16,C=this.i(k)&65535,tt=x.i(D)>>>16,kt=x.i(D)&65535;R[2*k+2*D]+=C*kt,ne(R,2*k+2*D),R[2*k+2*D+1]+=O*kt,ne(R,2*k+2*D+1),R[2*k+2*D+1]+=C*tt,ne(R,2*k+2*D+1),R[2*k+2*D+2]+=O*tt,ne(R,2*k+2*D+2)}for(k=0;k<I;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=I;k<2*I;k++)R[k]=0;return new h(R,0)};function ne(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function re(x,I){this.g=x,this.h=I}function de(x,I){if(j(I))throw Error("division by zero");if(j(x))return new re(T,T);if($(x))return I=de(M(x),I),new re(M(I.g),M(I.h));if($(I))return I=de(x,M(I)),new re(M(I.g),I.h);if(30<x.g.length){if($(x)||$(I))throw Error("slowDivide_ only works with positive integers.");for(var R=A,k=I;0>=k.l(x);)R=Re(R),k=Re(k);var D=Te(R,1),O=Te(k,1);for(k=Te(k,2),R=Te(R,2);!j(k);){var C=O.add(k);0>=C.l(x)&&(D=D.add(R),O=C),k=Te(k,1),R=Te(R,1)}return I=K(x,D.j(I)),new re(D,I)}for(D=T;0<=x.l(I);){for(R=Math.max(1,Math.floor(x.m()/I.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=v(R),C=O.j(I);$(C)||0<C.l(x);)R-=k,O=v(R),C=O.j(I);j(O)&&(O=A),D=D.add(O),x=K(x,C)}return new re(D,x)}i.A=function(x){return de(this,x).h},i.and=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)&x.i(k);return new h(R,this.h&x.h)},i.or=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)|x.i(k);return new h(R,this.h|x.h)},i.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)^x.i(k);return new h(R,this.h^x.h)};function Re(x){for(var I=x.g.length+1,R=[],k=0;k<I;k++)R[k]=x.i(k)<<1|x.i(k-1)>>>31;return new h(R,x.h)}function Te(x,I){var R=I>>5;I%=32;for(var k=x.g.length-R,D=[],O=0;O<k;O++)D[O]=0<I?x.i(O+R)>>>I|x.i(O+R+1)<<32-I:x.i(O+R);return new h(D,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Vg=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,Fi=h}).apply(typeof mm<"u"?mm:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dg,ta,Ng,eu,Oh,Lg,Og,Mg;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function a(l,f){if(f)e:{var y=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var F=l[w];if(!(F in y))break e;y=y[F]}l=l[l.length-1],w=y[l],f=f(w),f!=w&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,w=!1,F={next:function(){if(!w&&y<l.length){var B=y++;return{value:f(B,l[B]),done:!1}}return w=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}a("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function v(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function E(l,f,y){return l.call.apply(l.bind,arguments)}function T(l,f,y){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,w),l.apply(f,F)}}return function(){return l.apply(f,arguments)}}function A(l,f,y){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,A.apply(null,arguments)}function N(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function j(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(w,F,B){for(var ee=Array(arguments.length-2),je=2;je<arguments.length;je++)ee[je-2]=arguments[je];return f.prototype[F].apply(w,ee)}}function $(l){const f=l.length;if(0<f){const y=Array(f);for(let w=0;w<f;w++)y[w]=l[w];return y}return[]}function M(l,f){for(let y=1;y<arguments.length;y++){const w=arguments[y];if(g(w)){const F=l.length||0,B=w.length||0;l.length=F+B;for(let ee=0;ee<B;ee++)l[F+ee]=w[ee]}else l.push(w)}}class K{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ne(l){return/^[\s\xa0]*$/.test(l)}function re(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function de(l){return de[" "](l),l}de[" "]=function(){};var Re=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Te(l,f,y){for(const w in l)f.call(y,l[w],w,l)}function x(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function I(l){const f={};for(const y in l)f[y]=l[y];return f}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,f){let y,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(y in w)l[y]=w[y];for(let B=0;B<R.length;B++)y=R[B],Object.prototype.hasOwnProperty.call(w,y)&&(l[y]=w[y])}}function D(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function O(l){m.setTimeout(()=>{throw l},0)}function C(){var l=me;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class tt{constructor(){this.h=this.g=null}add(f,y){const w=kt.get();w.set(f,y),this.h?this.h.next=w:this.g=w,this.h=w}}var kt=new K(()=>new xt,l=>l.reset());class xt{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,te=!1,me=new tt,se=()=>{const l=m.Promise.resolve(void 0);ze=()=>{l.then(L)}};var L=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(y){O(y)}var f=kt;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}te=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l}();function Se(l,f){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Re){e:{try{de(f.nodeName);var F=!0;break e}catch{}F=!1}F||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:xe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Se.aa.h.call(this)}}j(Se,fe);var xe={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Be(l,f,y,w,F){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!w,this.ha=F,this.key=++Fe,this.da=this.fa=!1}function gt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Zn(l){this.src=l,this.g={},this.h=0}Zn.prototype.add=function(l,f,y,w,F){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var ee=Tr(l,f,w,F);return-1<ee?(f=l[ee],y||(f.fa=!1)):(f=new Be(f,this.src,B,!!w,F),f.fa=y,l.push(f)),f};function $i(l,f){var y=f.type;if(y in l.g){var w=l.g[y],F=Array.prototype.indexOf.call(w,f,void 0),B;(B=0<=F)&&Array.prototype.splice.call(w,F,1),B&&(gt(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Tr(l,f,y,w){for(var F=0;F<l.length;++F){var B=l[F];if(!B.da&&B.listener==f&&B.capture==!!y&&B.ha==w)return F}return-1}var ai="closure_lm_"+(1e6*Math.random()|0),qi={};function ro(l,f,y,w,F){if(Array.isArray(f)){for(var B=0;B<f.length;B++)ro(l,f[B],y,w,F);return null}return y=oo(y),l&&l[Me]?l.K(f,y,v(w)?!!w.capture:!!w,F):io(l,f,y,!1,w,F)}function io(l,f,y,w,F,B){if(!f)throw Error("Invalid event type");var ee=v(F)?!!F.capture:!!F,je=Wi(l);if(je||(l[ai]=je=new Zn(l)),y=je.add(f,y,w,ee,B),y.proxy)return y;if(w=xa(),y.proxy=w,w.src=l,w.listener=y,l.addEventListener)Ie||(F=ee),F===void 0&&(F=!1),l.addEventListener(f.toString(),w,F);else if(l.attachEvent)l.attachEvent(tr(f.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function xa(){function l(y){return f.call(l.src,l.listener,y)}const f=so;return l}function Hi(l,f,y,w,F){if(Array.isArray(f))for(var B=0;B<f.length;B++)Hi(l,f[B],y,w,F);else w=v(w)?!!w.capture:!!w,y=oo(y),l&&l[Me]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],y=Tr(B,y,w,F),-1<y&&(gt(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=Wi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Tr(f,y,w,F)),(y=-1<l?f[l]:null)&&er(y))}function er(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Me])$i(f.i,l);else{var y=l.type,w=l.proxy;f.removeEventListener?f.removeEventListener(y,w,l.capture):f.detachEvent?f.detachEvent(tr(y),w):f.addListener&&f.removeListener&&f.removeListener(w),(y=Wi(f))?($i(y,l),y.h==0&&(y.src=null,f[ai]=null)):gt(l)}}}function tr(l){return l in qi?qi[l]:qi[l]="on"+l}function so(l,f){if(l.da)l=!0;else{f=new Se(f,this);var y=l.listener,w=l.ha||l.src;l.fa&&er(l),l=y.call(w,f)}return l}function Wi(l){return l=l[ai],l instanceof Zn?l:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function oo(l){return typeof l=="function"?l:(l[Qi]||(l[Qi]=function(f){return l.handleEvent(f)}),l[Qi])}function ut(){Q.call(this),this.i=new Zn(this),this.M=this,this.F=null}j(ut,Q),ut.prototype[Me]=!0,ut.prototype.removeEventListener=function(l,f,y,w){Hi(this,l,f,y,w)};function ct(l,f){var y,w=l.F;if(w)for(y=[];w;w=w.F)y.push(w);if(l=l.M,w=f.type||f,typeof f=="string")f=new fe(f,l);else if(f instanceof fe)f.target=f.target||l;else{var F=f;f=new fe(w,l),k(f,F)}if(F=!0,y)for(var B=y.length-1;0<=B;B--){var ee=f.g=y[B];F=nr(ee,w,!0,f)&&F}if(ee=f.g=l,F=nr(ee,w,!0,f)&&F,F=nr(ee,w,!1,f)&&F,y)for(B=0;B<y.length;B++)ee=f.g=y[B],F=nr(ee,w,!1,f)&&F}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],w=0;w<y.length;w++)gt(y[w]);delete l.g[f],l.h--}}this.F=null},ut.prototype.K=function(l,f,y,w){return this.i.add(String(l),f,!1,y,w)},ut.prototype.L=function(l,f,y,w){return this.i.add(String(l),f,!0,y,w)};function nr(l,f,y,w){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var F=!0,B=0;B<f.length;++B){var ee=f[B];if(ee&&!ee.da&&ee.capture==y){var je=ee.listener,ht=ee.ha||ee.src;ee.fa&&$i(l.i,ee),F=je.call(ht,w)!==!1&&F}}return F&&!w.defaultPrevented}function ao(l,f,y){if(typeof l=="function")y&&(l=A(l,y));else if(l&&typeof l.handleEvent=="function")l=A(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Ir(l){l.g=ao(()=>{l.g=null,l.i&&(l.i=!1,Ir(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class li extends Q{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(l){Q.call(this),this.h=l,this.g={}}j(ui,Q);var lo=[];function uo(l){Te(l.g,function(f,y){this.g.hasOwnProperty(y)&&er(f)},l),l.g={}}ui.prototype.N=function(){ui.aa.N.call(this),uo(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var co=m.JSON.stringify,ho=m.JSON.parse,fo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function ci(){}ci.prototype.h=null;function Ki(l){return l.h||(l.h=l.i())}function Gi(){}var ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function On(){fe.call(this,"d")}j(On,fe);function Yi(){fe.call(this,"c")}j(Yi,fe);var Mn={},po=null;function hi(){return po=po||new ut}Mn.La="serverreachability";function mo(l){fe.call(this,Mn.La,l)}j(mo,fe);function rr(l){const f=hi();ct(f,new mo(f))}Mn.STAT_EVENT="statevent";function go(l,f){fe.call(this,Mn.STAT_EVENT,l),this.stat=f}j(go,fe);function nt(l){const f=hi();ct(f,new go(f,l))}Mn.Ma="timingevent";function Xi(l,f){fe.call(this,Mn.Ma,l),this.size=f}j(Xi,fe);function _n(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function fi(l,f,y,w,F,B){l.info(function(){if(l.g)if(B)for(var ee="",je=B.split("&"),ht=0;ht<je.length;ht++){var Ve=je[ht].split("=");if(1<Ve.length){var yt=Ve[0];Ve=Ve[1];var st=yt.split("_");ee=2<=st.length&&st[1]=="type"?ee+(yt+"="+Ve+"&"):ee+(yt+"=redacted&")}}else ee=null;else ee=B;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+f+`
`+y+`
`+ee})}function Ji(l,f,y,w,F,B,ee){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+f+`
`+y+`
`+B+" "+ee})}function En(l,f,y,w){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+ju(l,y)+(w?" "+w:"")})}function yo(l,f){l.info(function(){return"TIMEOUT: "+f})}di.prototype.info=function(){};function ju(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var w=y[l];if(!(2>w.length)){var F=w[1];if(Array.isArray(F)&&!(1>F.length)){var B=F[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ee=1;ee<F.length;ee++)F[ee]=""}}}}return co(y)}catch{return f}}var Zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Va={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wn;function pi(){}j(pi,ci),pi.prototype.g=function(){return new XMLHttpRequest},pi.prototype.i=function(){return{}},wn=new pi;function Tn(l,f,y,w){this.j=l,this.i=f,this.l=y,this.R=w||1,this.U=new ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Da}function Da(){this.i=null,this.g="",this.h=!1}var vo={},es={};function ts(l,f,y){l.L=1,l.v=Pr(Zt(f)),l.m=y,l.P=!0,_o(l,null)}function _o(l,f){l.F=Date.now(),$e(l),l.A=Zt(l.v);var y=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),xr(y.i,"t",w),l.C=0,y=l.j.J,l.h=new Da,l.g=Ya(l.j,y?f:null,!l.m),0<l.O&&(l.M=new li(A(l.Y,l,l.g),l.O)),f=l.U,y=l.g,w=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(lo[0]=F.toString()),F=lo);for(var B=0;B<F.length;B++){var ee=ro(y,F[B],w||f.handleEvent,!1,f.h||f);if(!ee)break;f.g[ee.key]=ee}f=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),rr(),fi(l.i,l.u,l.A,l.l,l.R,l.m)}Tn.prototype.ca=function(l){l=l.target;const f=this.M;f&&$t(l)==3?f.j():this.Y(l)},Tn.prototype.Y=function(l){try{if(l==this.g)e:{const st=$t(this.g);var f=this.g.Ba();const hn=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Ao(this.g)))){this.J||st!=4||f==7||(f==8||0>=hn?rr(3):rr(2)),mi(this);var y=this.g.Z();this.X=y;t:if(Na(this)){var w=Ao(this.g);l="";var F=w.length,B=$t(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),Sr(this);var ee="";break t}this.h.i=new m.TextDecoder}for(f=0;f<F;f++)this.h.h=!0,l+=this.h.i.decode(w[f],{stream:!(B&&f==F-1)});w.length=0,this.h.g+=l,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=y==200,Ji(this.i,this.u,this.A,this.l,this.R,st,y),this.o){if(this.T&&!this.K){t:{if(this.g){var je,ht=this.g;if((je=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(je)){var Ve=je;break t}}Ve=null}if(y=Ve)En(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eo(this,y);else{this.o=!1,this.s=3,nt(12),un(this),Sr(this);break e}}if(this.P){y=!0;let tn;for(;!this.J&&this.C<ee.length;)if(tn=zu(this,ee),tn==es){st==4&&(this.s=4,nt(14),y=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==vo){this.s=4,nt(15),En(this.i,this.l,ee,"[Invalid Chunk]"),y=!1;break}else En(this.i,this.l,tn,null),Eo(this,tn);if(Na(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||ee.length!=0||this.h.h||(this.s=1,nt(16),y=!1),this.o=this.o&&y,!y)En(this.i,this.l,ee,"[Invalid Chunked Response]"),un(this),Sr(this);else if(0<ee.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Co(yt),yt.M=!0,nt(11))}}else En(this.i,this.l,ee,null),Eo(this,ee);st==4&&un(this),this.o&&!this.J&&(st==4?ds(this.j,this):(this.o=!1,$e(this)))}else as(this.g),y==400&&0<ee.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),un(this),Sr(this)}}}catch{}finally{}};function Na(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function zu(l,f){var y=l.C,w=f.indexOf(`
`,y);return w==-1?es:(y=Number(f.substring(y,w)),isNaN(y)?vo:(w+=1,w+y>f.length?es:(f=f.slice(w,w+y),l.C=w+y,f)))}Tn.prototype.cancel=function(){this.J=!0,un(this)};function $e(l){l.S=Date.now()+l.I,La(l,l.I)}function La(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=_n(A(l.ba,l),f)}function mi(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Tn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(yo(this.i,this.A),this.L!=2&&(rr(),nt(17)),un(this),this.s=2,Sr(this)):La(this,this.S-l)};function Sr(l){l.j.G==0||l.J||ds(l.j,l)}function un(l){mi(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,uo(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Eo(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||Ut(y.h,l))){if(!l.K&&Ut(y.h,l)&&y.G==3){try{var w=y.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)hs(y),Cn(y);else break e;cs(y),nt(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=_n(A(y.Za,y),6e3));if(1>=Ma(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else lr(y,11)}else if((l.K||y.g==l)&&hs(y),!ne(f))for(F=y.Da.g.parse(f),f=0;f<F.length;f++){let Ve=F[f];if(y.T=Ve[0],Ve=Ve[1],y.G==2)if(Ve[0]=="c"){y.K=Ve[1],y.ia=Ve[2];const yt=Ve[3];yt!=null&&(y.la=yt,y.j.info("VER="+y.la));const st=Ve[4];st!=null&&(y.Aa=st,y.j.info("SVER="+y.Aa));const hn=Ve[5];hn!=null&&typeof hn=="number"&&0<hn&&(w=1.5*hn,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const tn=l.g;if(tn){const Ti=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ti){var B=w.h;B.g||Ti.indexOf("spdy")==-1&&Ti.indexOf("quic")==-1&&Ti.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(wo(B,B.h),B.h=null))}if(w.D){const ps=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;ps&&(w.ya=ps,be(w.I,w.D,ps))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var ee=l;if(w.qa=Ga(w,w.J?w.ia:null,w.W),ee.K){Fa(w.h,ee);var je=ee,ht=w.L;ht&&(je.I=ht),je.B&&(mi(je),$e(je)),w.g=ee}else wi(w);0<y.i.length&&zn(y)}else Ve[0]!="stop"&&Ve[0]!="close"||lr(y,7);else y.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?lr(y,7):It(y):Ve[0]!="noop"&&y.l&&y.l.ta(Ve),y.v=0)}}rr(4)}catch{}}var Oa=class{constructor(l,f){this.g=l,this.map=f}};function gi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ma(l){return l.h?1:l.g?l.g.size:0}function Ut(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function wo(l,f){l.g?l.g.add(f):l.h=f}function Fa(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}gi.prototype.cancel=function(){if(this.i=Ua(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ua(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return $(l.i)}function ns(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,w=0;w<y;w++)f.push(l[w]);return f}f=[],y=0;for(w in l)f[y++]=l[w];return f}function rs(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const w in l)f[y++]=w;return f}}}function Ar(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=rs(l),w=ns(l),F=w.length,B=0;B<F;B++)f.call(void 0,w[B],y&&y[B],l)}var yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bu(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var w=l[y].indexOf("="),F=null;if(0<=w){var B=l[y].substring(0,w);F=l[y].substring(w+1)}else B=l[y];f(B,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function ir(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ir){this.h=l.h,vi(this,l.j),this.o=l.o,this.g=l.g,Rr(this,l.s),this.l=l.l;var f=l.i,y=new Fn;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Cr(this,y),this.m=l.m}else l&&(f=String(l).match(yi))?(this.h=!1,vi(this,f[1]||"",!0),this.o=Pe(f[2]||""),this.g=Pe(f[3]||"",!0),Rr(this,f[4]),this.l=Pe(f[5]||"",!0),Cr(this,f[6]||"",!0),this.m=Pe(f[7]||"")):(this.h=!1,this.i=new Fn(null,this.h))}ir.prototype.toString=function(){var l=[],f=this.j;f&&l.push(kr(f,is,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(kr(f,is,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(kr(y,y.charAt(0)=="/"?ba:za,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",kr(y,To)),l.join("")};function Zt(l){return new ir(l)}function vi(l,f,y){l.j=y?Pe(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Rr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Cr(l,f,y){f instanceof Fn?(l.i=f,Un(l.i,l.h)):(y||(f=kr(f,Ba)),l.i=new Fn(f,l.h))}function be(l,f,y){l.i.set(f,y)}function Pr(l){return be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Pe(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,ja),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ja(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var is=/[#\/\?@]/g,za=/[#\?:]/g,ba=/[#\?]/g,Ba=/[#\?@]/g,To=/#/g;function Fn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Tt(l){l.g||(l.g=new Map,l.h=0,l.i&&bu(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}i=Fn.prototype,i.add=function(l,f){Tt(this),this.i=null,l=cn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function In(l,f){Tt(l),f=cn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Sn(l,f){return Tt(l),f=cn(l,f),l.g.has(f)}i.forEach=function(l,f){Tt(this),this.g.forEach(function(y,w){y.forEach(function(F){l.call(f,F,w,this)},this)},this)},i.na=function(){Tt(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let w=0;w<f.length;w++){const F=l[w];for(let B=0;B<F.length;B++)y.push(f[w])}return y},i.V=function(l){Tt(this);let f=[];if(typeof l=="string")Sn(this,l)&&(f=f.concat(this.g.get(cn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},i.set=function(l,f){return Tt(this),this.i=null,l=cn(this,l),Sn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},i.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function xr(l,f,y){In(l,f),0<y.length&&(l.i=null,l.g.set(cn(l,f),$(y)),l.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var w=f[y];const B=encodeURIComponent(String(w)),ee=this.V(w);for(w=0;w<ee.length;w++){var F=B;ee[w]!==""&&(F+="="+encodeURIComponent(String(ee[w]))),l.push(F)}}return this.i=l.join("&")};function cn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Un(l,f){f&&!l.j&&(Tt(l),l.i=null,l.g.forEach(function(y,w){var F=w.toLowerCase();w!=F&&(In(this,w),xr(this,F,y))},l)),l.j=f}function Bu(l,f){const y=new di;if(m.Image){const w=new Image;w.onload=N(Bt,y,"TestLoadImage: loaded",!0,f,w),w.onerror=N(Bt,y,"TestLoadImage: error",!1,f,w),w.onabort=N(Bt,y,"TestLoadImage: abort",!1,f,w),w.ontimeout=N(Bt,y,"TestLoadImage: timeout",!1,f,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else f(!1)}function $a(l,f){const y=new di,w=new AbortController,F=setTimeout(()=>{w.abort(),Bt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:w.signal}).then(B=>{clearTimeout(F),B.ok?Bt(y,"TestPingServer: ok",!0,f):Bt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),Bt(y,"TestPingServer: error",!1,f)})}function Bt(l,f,y,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(y)}catch{}}function $u(){this.g=new fo}function qa(l,f,y){const w=y||"";try{Ar(l,function(F,B){let ee=F;v(F)&&(ee=co(F)),f.push(w+B+"="+encodeURIComponent(ee))})}catch(F){throw f.push(w+"type="+encodeURIComponent("_badmap")),F}}function sr(l){this.l=l.Ub||null,this.j=l.eb||!1}j(sr,ci),sr.prototype.g=function(){return new _i(this.l,this.j)},sr.prototype.i=function(l){return function(){return l}}({});function _i(l,f){ut.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(_i,ut),i=_i.prototype,i.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Rn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,An(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ha(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ha(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?An(this):Rn(this),this.readyState==3&&Ha(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,An(this))},i.Qa=function(l){this.g&&(this.response=l,An(this))},i.ga=function(){this.g&&An(this)};function An(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rn(l)}i.setRequestHeader=function(l,f){this.u.append(l,f)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Rn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function or(l){let f="";return Te(l,function(y,w){f+=w,f+=":",f+=y,f+=`\r
`}),f}function Vr(l,f,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=or(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):be(l,f,y))}function Ke(l){ut.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(Ke,ut);var qu=/^https?$/i,Io=["POST","PUT"];i=Ke.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,f,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wn.g(),this.v=this.o?Ki(this.o):Ki(wn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){Ei(this,B);return}if(l=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)y.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const B of w.keys())y.set(B,w.get(B));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),F=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Io,f,void 0))||w||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ee]of y)this.g.setRequestHeader(B,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{os(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Ei(this,B)}};function Ei(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,ss(l),en(l)}function ss(l){l.A||(l.A=!0,ct(l,"complete"),ct(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ct(this,"complete"),ct(this,"abort"),en(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Ke.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?So(this):this.bb())},i.bb=function(){So(this)};function So(l){if(l.h&&typeof h<"u"&&(!l.v[1]||$t(l)!=4||l.Z()!=2)){if(l.u&&$t(l)==4)ao(l.Ea,0,l);else if(ct(l,"readystatechange"),$t(l)==4){l.h=!1;try{const ee=l.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var w;if(w=ee===0){var F=String(l.D).match(yi)[1]||null;!F&&m.self&&m.self.location&&(F=m.self.location.protocol.slice(0,-1)),w=!qu.test(F?F.toLowerCase():"")}y=w}if(y)ct(l,"complete"),ct(l,"success");else{l.m=6;try{var B=2<$t(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",ss(l)}}finally{en(l)}}}}function en(l,f){if(l.g){os(l);const y=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||ct(l,"ready");try{y.onreadystatechange=w}catch{}}}function os(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function $t(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),ho(f)}};function Ao(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function as(l){const f={};l=(l.g&&2<=$t(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(ne(l[w]))continue;var y=D(l[w]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=f[F]||[];f[F]=B,B.push(y)}x(f,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function Ro(l){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jn("baseRetryDelayMs",5e3,l),this.cb=jn("retryDelaySeedMs",1e4,l),this.Wa=jn("forwardChannelMaxRetries",2,l),this.wa=jn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new gi(l&&l.concurrentRequestLimit),this.Da=new $u,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ro.prototype,i.la=8,i.G=1,i.connect=function(l,f,y,w){nt(0),this.W=l,this.H=f||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=Ga(this,null,this.W),zn(this)};function It(l){if(ls(l),l.G==3){var f=l.U++,y=Zt(l.I);if(be(y,"SID",l.K),be(y,"RID",f),be(y,"TYPE","terminate"),ar(l,y),f=new Tn(l,l.j,f),f.L=2,f.v=Pr(Zt(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=Ya(f.j,null),f.g.ea(f.v)),f.F=Date.now(),$e(f)}Ka(l)}function Cn(l){l.g&&(Co(l),l.g.cancel(),l.g=null)}function ls(l){Cn(l),l.u&&(m.clearTimeout(l.u),l.u=null),hs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function zn(l){if(!Jt(l.h)&&!l.s){l.s=!0;var f=l.Ga;ze||se(),te||(ze(),te=!0),me.add(f,l),l.B=0}}function Hu(l,f){return Ma(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=_n(A(l.Ga,l,f),Qa(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new Tn(this,this.j,l);let B=this.o;if(this.S&&(B?(B=I(B),k(B,this.S)):B=this.S),this.m!==null||this.O||(F.H=B,B=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Dr(this,F,f),y=Zt(this.I),be(y,"RID",l),be(y,"CVER",22),this.D&&be(y,"X-HTTP-Session-Id",this.D),ar(this,y),B&&(this.O?f="headers="+encodeURIComponent(String(or(B)))+"&"+f:this.m&&Vr(y,this.m,B)),wo(this.h,F),this.Ua&&be(y,"TYPE","init"),this.P?(be(y,"$req",f),be(y,"SID","null"),F.T=!0,ts(F,y,null)):ts(F,y,f),this.G=2}}else this.G==3&&(l?us(this,l):this.i.length==0||Jt(this.h)||us(this))};function us(l,f){var y;f?y=f.l:y=l.U++;const w=Zt(l.I);be(w,"SID",l.K),be(w,"RID",y),be(w,"AID",l.T),ar(l,w),l.m&&l.o&&Vr(w,l.m,l.o),y=new Tn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Dr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),wo(l.h,y),ts(y,w,f)}function ar(l,f){l.H&&Te(l.H,function(y,w){be(f,w,y)}),l.l&&Ar({},function(y,w){be(f,w,y)})}function Dr(l,f,y){y=Math.min(l.i.length,y);var w=l.l?A(l.l.Na,l.l,l):null;e:{var F=l.i;let B=-1;for(;;){const ee=["count="+y];B==-1?0<y?(B=F[0].g,ee.push("ofs="+B)):B=0:ee.push("ofs="+B);let je=!0;for(let ht=0;ht<y;ht++){let Ve=F[ht].g;const yt=F[ht].map;if(Ve-=B,0>Ve)B=Math.max(0,F[ht].g-100),je=!1;else try{qa(yt,ee,"req"+Ve+"_")}catch{w&&w(yt)}}if(je){w=ee.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,w}function wi(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ze||se(),te||(ze(),te=!0),me.add(f,l),l.v=0}}function cs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=_n(A(l.Fa,l),Qa(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Wa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=_n(A(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Cn(this),Wa(this))};function Co(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Wa(l){l.g=new Tn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Zt(l.qa);be(f,"RID","rpc"),be(f,"SID",l.K),be(f,"AID",l.T),be(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&be(f,"TO",l.ja),be(f,"TYPE","xmlhttp"),ar(l,f),l.m&&l.o&&Vr(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Pr(Zt(f)),y.m=null,y.P=!0,_o(y,l)}i.Za=function(){this.C!=null&&(this.C=null,Cn(this),cs(this),nt(19))};function hs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ds(l,f){var y=null;if(l.g==f){hs(l),Co(l),l.g=null;var w=2}else if(Ut(l.h,f))y=f.D,Fa(l.h,f),w=1;else return;if(l.G!=0){if(f.o)if(w==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var F=l.B;w=hi(),ct(w,new Xi(w,y)),zn(l)}else wi(l);else if(F=f.s,F==3||F==0&&0<f.X||!(w==1&&Hu(l,f)||w==2&&cs(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),F){case 1:lr(l,5);break;case 4:lr(l,10);break;case 3:lr(l,6);break;default:lr(l,2)}}}function Qa(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function lr(l,f){if(l.j.info("Error code "+f),f==2){var y=A(l.fb,l),w=l.Xa;const F=!w;w=new ir(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||vi(w,"https"),Pr(w),F?Bu(w.toString(),y):$a(w.toString(),y)}else nt(2);l.G=0,l.l&&l.l.sa(f),Ka(l),ls(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Ka(l){if(l.G=0,l.ka=[],l.l){const f=Ua(l.h);(f.length!=0||l.i.length!=0)&&(M(l.ka,f),M(l.ka,l.i),l.h.i.length=0,$(l.i),l.i.length=0),l.l.ra()}}function Ga(l,f,y){var w=y instanceof ir?Zt(y):new ir(y);if(w.g!="")f&&(w.g=f+"."+w.g),Rr(w,w.s);else{var F=m.location;w=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;var B=new ir(null);w&&vi(B,w),f&&(B.g=f),F&&Rr(B,F),y&&(B.l=y),w=B}return y=l.D,f=l.ya,y&&f&&be(w,y,f),be(w,"VER",l.la),ar(l,w),w}function Ya(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ke(new sr({eb:y})):new Ke(l.pa),f.Ha(l.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Po(){}i=Po.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function fs(){}fs.prototype.g=function(l,f){return new jt(l,f)};function jt(l,f){ut.call(this),this.g=new Ro(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ne(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ne(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new bn(this)}j(jt,ut),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){It(this.g)},jt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=co(l),l=y);f.i.push(new Oa(f.Ya++,l)),f.G==3&&zn(f)},jt.prototype.N=function(){this.g.l=null,delete this.j,It(this.g),delete this.g,jt.aa.N.call(this)};function Xa(l){On.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}j(Xa,On);function Ja(){Yi.call(this),this.status=1}j(Ja,Yi);function bn(l){this.g=l}j(bn,Po),bn.prototype.ua=function(){ct(this.g,"a")},bn.prototype.ta=function(l){ct(this.g,new Xa(l))},bn.prototype.sa=function(l){ct(this.g,new Ja)},bn.prototype.ra=function(){ct(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Mg=function(){return new fs},Og=function(){return hi()},Lg=Mn,Oh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,eu=Zi,Va.COMPLETE="complete",Ng=Va,Gi.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",ut.prototype.listen=ut.prototype.K,ta=Gi,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Dg=Ke}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});const gm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Js="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Ag("@firebase/firestore");function Os(){return Ui.logLevel}function oe(i,...e){if(Ui.logLevel<=Ne.DEBUG){const n=e.map(sd);Ui.debug(`Firestore (${Js}): ${i}`,...n)}}function Er(i,...e){if(Ui.logLevel<=Ne.ERROR){const n=e.map(sd);Ui.error(`Firestore (${Js}): ${i}`,...n)}}function Bs(i,...e){if(Ui.logLevel<=Ne.WARN){const n=e.map(sd);Ui.warn(`Firestore (${Js}): ${i}`,...n)}}function sd(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(i="Unexpected state"){const e=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: `+i;throw Er(e),new Error(e)}function Ue(i,e){i||_e()}function we(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Xs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Aw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class Rw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Cw{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0);let s=this.i;const a=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new vr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},m=g=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new vr)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string"),new Fg(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Mt(e)}}class Pw{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kw{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new Pw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vw{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ue(this.o===void 0);const s=u=>{u.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const a=u=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?a(u):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string"),this.R=n.token,new xw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Dw(40);for(let u=0;u<a.length;++u)s.length<20&&a[u]<n&&(s+=e.charAt(a[u]%e.length))}return s}}function ke(i,e){return i<e?-1:i>e?1:0}function $s(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ae(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new pt(0,0))}static max(){return new Ee(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,s){n===void 0?n=0:n>e.length&&_e(),s===void 0?s=e.length-n:s>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return da.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof da?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const u=e.get(a),h=n.get(a);if(u<h)return-1;if(u>h)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Qe extends da{construct(e,n,s){return new Qe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(H.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const Nw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends da{construct(e,n,s){return new Ct(e,n,s)}static isValidIdentifier(e){return Nw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const u=()=>{if(s.length===0)throw new ae(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ae(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ae(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else m==="`"?(h=!h,a++):m!=="."||h?(s+=m,a++):(u(),a++)}if(u(),h)throw new ae(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Qe.fromString(e))}static fromName(e){return new pe(Qe.fromString(e).popFirst(5))}static empty(){return new pe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Qe(e.slice()))}}function Lw(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(s===1e9?new pt(n+1,0):new pt(n,s));return new Zr(a,pe.empty(),e)}function Ow(i){return new Zr(i.readTime,i.key,-1)}class Zr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Zr(Ee.min(),pe.empty(),-1)}static max(){return new Zr(Ee.max(),pe.empty(),-1)}}function Mw(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(i.documentKey,e.documentKey),n!==0?n:ke(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(i){if(i.code!==H.FAILED_PRECONDITION||i.message!==Fw)throw i;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((s,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,a)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,s)=>{n(e)})}static reject(e){return new W((n,s)=>{s(e)})}static waitFor(e){return new W((n,s)=>{let a=0,u=0,h=!1;e.forEach(m=>{++a,m.next(()=>{++u,h&&u===a&&n()},g=>s(g))}),h=!0,u===a&&n()})}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next(a=>a?W.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,u)=>{s.push(n.call(this,a,u))}),this.waitFor(s)}static mapArray(e,n){return new W((s,a)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const v=g;n(e[v]).next(E=>{h[v]=E,++m,m===u&&s(h)},E=>a(E))}})}static doWhile(e,n){return new W((s,a)=>{const u=()=>{e()===!0?n().next(()=>{u()},a):s()};u()})}}function jw(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function eo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Iu.oe=-1;function Su(i){return i==null}function cu(i){return i===0&&1/i==-1/0}function zw(i){return typeof i=="number"&&Number.isInteger(i)&&!cu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=ym(e)),e=Bw(i.get(n),e);return ym(e)}function Bw(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const u=i.charAt(a);switch(u){case"\0":n+="";break;case"":n+="";break;default:n+=u}}return n}function ym(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function si(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function jg(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,s,a,u){this.key=e,this.value=n,this.color=s??Rt.RED,this.left=a??Rt.EMPTY,this.right=u??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,u){return new Rt(e??this.key,n??this.value,s??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const u=s(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,n,s),null):u===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Rt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,s,a,u){return this}insert(e,n,s){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _m(this.data.getIterator())}getIteratorFrom(e){return new _m(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class _m{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new on([])}unionWith(e){let n=new mt(Ct.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new zg("Invalid base64 string: "+u):u}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(a){let u="";for(let h=0;h<a.length;++h)u+=String.fromCharCode(a[h]);return u}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const $w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(i){if(Ue(!!i),typeof i=="string"){let e=0;const n=$w.exec(i);if(Ue(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:it(i.seconds),nanos:it(i.nanos)}}function it(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ti(i){return typeof i=="string"?Pt.fromBase64String(i):Pt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Au(i){const e=i.mapValue.fields.__previous_value__;return od(e)?Au(e):e}function fa(i){const e=ei(i.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,s,a,u,h,m,g,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v}}class pa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ni(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?od(i)?4:Ww(i)?9007199254740991:Hw(i)?10:11:_e()}function Yn(i,e){if(i===e)return!0;const n=ni(i);if(n!==ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return fa(i).isEqual(fa(e));case 3:return function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const h=ei(a.timestampValue),m=ei(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,u){return ti(a.bytesValue).isEqual(ti(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,u){return it(a.geoPointValue.latitude)===it(u.geoPointValue.latitude)&&it(a.geoPointValue.longitude)===it(u.geoPointValue.longitude)}(i,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return it(a.integerValue)===it(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const h=it(a.doubleValue),m=it(u.doubleValue);return h===m?cu(h)===cu(m):isNaN(h)&&isNaN(m)}return!1}(i,e);case 9:return $s(i.arrayValue.values||[],e.arrayValue.values||[],Yn);case 10:case 11:return function(a,u){const h=a.mapValue.fields||{},m=u.mapValue.fields||{};if(vm(h)!==vm(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Yn(h[g],m[g])))return!1;return!0}(i,e);default:return _e()}}function ma(i,e){return(i.values||[]).find(n=>Yn(n,e))!==void 0}function qs(i,e){if(i===e)return 0;const n=ni(i),s=ni(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(i.booleanValue,e.booleanValue);case 2:return function(u,h){const m=it(u.integerValue||u.doubleValue),g=it(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(i,e);case 3:return Em(i.timestampValue,e.timestampValue);case 4:return Em(fa(i),fa(e));case 5:return ke(i.stringValue,e.stringValue);case 6:return function(u,h){const m=ti(u),g=ti(h);return m.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const E=ke(m[v],g[v]);if(E!==0)return E}return ke(m.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const m=ke(it(u.latitude),it(h.latitude));return m!==0?m:ke(it(u.longitude),it(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return wm(i.arrayValue,e.arrayValue);case 10:return function(u,h){var m,g,v,E;const T=u.fields||{},A=h.fields||{},N=(m=T.value)===null||m===void 0?void 0:m.arrayValue,j=(g=A.value)===null||g===void 0?void 0:g.arrayValue,$=ke(((v=N==null?void 0:N.values)===null||v===void 0?void 0:v.length)||0,((E=j==null?void 0:j.values)===null||E===void 0?void 0:E.length)||0);return $!==0?$:wm(N,j)}(i.mapValue,e.mapValue);case 11:return function(u,h){if(u===Gl.mapValue&&h===Gl.mapValue)return 0;if(u===Gl.mapValue)return 1;if(h===Gl.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),v=h.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const A=ke(g[T],E[T]);if(A!==0)return A;const N=qs(m[g[T]],v[E[T]]);if(N!==0)return N}return ke(g.length,E.length)}(i.mapValue,e.mapValue);default:throw _e()}}function Em(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ke(i,e);const n=ei(i),s=ei(e),a=ke(n.seconds,s.seconds);return a!==0?a:ke(n.nanos,s.nanos)}function wm(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const u=qs(n[a],s[a]);if(u)return u}return ke(n.length,s.length)}function Hs(i){return Mh(i)}function Mh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ei(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ti(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return pe.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const u of n.values||[])a?a=!1:s+=",",s+=Mh(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",u=!0;for(const h of s)u?u=!1:a+=",",a+=`${h}:${Mh(n.fields[h])}`;return a+"}"}(i.mapValue):_e()}function tu(i){switch(ni(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Au(i);return e?16+tu(e):16;case 5:return 2*i.stringValue.length;case 6:return ti(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,u)=>a+tu(u),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return si(s.fields,(u,h)=>{a+=u.length+tu(h)}),a}(i.mapValue);default:throw _e()}}function Tm(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Fh(i){return!!i&&"integerValue"in i}function ad(i){return!!i&&"arrayValue"in i}function Im(i){return!!i&&"nullValue"in i}function Sm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function nu(i){return!!i&&"mapValue"in i}function Hw(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return si(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=sa(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Ww(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!nu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=Ct.emptyPath(),s={},a=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,a),s={},a=[],n=m.popLast()}h?s[m.lastSegment()]=sa(h):a.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,a)}delete(e){const n=this.field(e.popLast());nu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];nu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){si(n,(a,u)=>e[a]=u);for(const a of s)delete e[a]}clone(){return new Xt(sa(this.value))}}function bg(i){const e=[];return si(i.fields,(n,s)=>{const a=new Ct([n]);if(nu(s)){const u=bg(s.mapValue).fields;if(u.length===0)e.push(a);else for(const h of u)e.push(a.child(h))}else e.push(a)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,s,a,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ft(e,0,Ee.min(),Ee.min(),Ee.min(),Xt.empty(),0)}static newFoundDocument(e,n,s,a){return new Ft(e,1,n,Ee.min(),s,a,0)}static newNoDocument(e,n){return new Ft(e,2,n,Ee.min(),Ee.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,Ee.min(),Ee.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.position=e,this.inclusive=n}}function Am(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const u=e[a],h=i.position[a];if(u.field.isKeyField()?s=pe.comparator(pe.fromName(h.referenceValue),n.key):s=qs(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Rm(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Yn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n="asc"){this.field=e,this.dir=n}}function Qw(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{}class lt extends Bg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Gw(e,n,s):n==="array-contains"?new Jw(e,s):n==="in"?new Zw(e,s):n==="not-in"?new e1(e,s):n==="array-contains-any"?new t1(e,s):new lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Yw(e,s):new Xw(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qs(n,this.value)):n!==null&&ni(this.value)===ni(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends Bg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return $g(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $g(i){return i.op==="and"}function qg(i){return Kw(i)&&$g(i)}function Kw(i){for(const e of i.filters)if(e instanceof Ln)return!1;return!0}function Uh(i){if(i instanceof lt)return i.field.canonicalString()+i.op.toString()+Hs(i.value);if(qg(i))return i.filters.map(e=>Uh(e)).join(",");{const e=i.filters.map(n=>Uh(n)).join(",");return`${i.op}(${e})`}}function Hg(i,e){return i instanceof lt?function(s,a){return a instanceof lt&&s.op===a.op&&s.field.isEqual(a.field)&&Yn(s.value,a.value)}(i,e):i instanceof Ln?function(s,a){return a instanceof Ln&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((u,h,m)=>u&&Hg(h,a.filters[m]),!0):!1}(i,e):void _e()}function Wg(i){return i instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(i):i instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(Wg).join(" ,")+"}"}(i):"Filter"}class Gw extends lt{constructor(e,n,s){super(e,n,s),this.key=pe.fromName(s.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yw extends lt{constructor(e,n){super(e,"in",n),this.keys=Qg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Xw extends lt{constructor(e,n){super(e,"not-in",n),this.keys=Qg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Qg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>pe.fromName(s.referenceValue))}class Jw extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ad(n)&&ma(n.arrayValue,this.value)}}class Zw extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ma(this.value.arrayValue,n)}}class e1 extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ma(this.value.arrayValue,n)}}class t1 extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ad(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ma(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n=null,s=[],a=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function Cm(i,e=null,n=[],s=[],a=null,u=null,h=null){return new n1(i,e,n,s,a,u,h)}function ld(i){const e=we(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Uh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Hs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Hs(s)).join(",")),e.ue=n}return e.ue}function ud(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Qw(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Hg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Rm(i.startAt,e.startAt)&&Rm(i.endAt,e.endAt)}function jh(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n=null,s=[],a=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function r1(i,e,n,s,a,u,h,m){return new Ta(i,e,n,s,a,u,h,m)}function cd(i){return new Ta(i)}function Pm(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Kg(i){return i.collectionGroup!==null}function oa(i){const e=we(i);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new mt(Ct.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new du(u,s))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new du(Ct.keyField(),s))}return e.ce}function Qn(i){const e=we(i);return e.le||(e.le=i1(e,oa(i))),e.le}function i1(i,e){if(i.limitType==="F")return Cm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const u=a.dir==="desc"?"asc":"desc";return new du(a.field,u)});const n=i.endAt?new hu(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new hu(i.startAt.position,i.startAt.inclusive):null;return Cm(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function zh(i,e){const n=i.filters.concat([e]);return new Ta(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function bh(i,e,n){return new Ta(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Ru(i,e){return ud(Qn(i),Qn(e))&&i.limitType===e.limitType}function Gg(i){return`${ld(Qn(i))}|lt:${i.limitType}`}function Ms(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>Wg(a)).join(", ")}]`),Su(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Hs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Hs(a)).join(",")),`Target(${s})`}(Qn(i))}; limitType=${i.limitType})`}function Cu(i,e){return e.isFoundDocument()&&function(s,a){const u=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):pe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,a){for(const u of oa(s))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const u of s.filters)if(!u.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(h,m,g){const v=Am(h,m,g);return h.inclusive?v<=0:v<0}(s.startAt,oa(s),a)||s.endAt&&!function(h,m,g){const v=Am(h,m,g);return h.inclusive?v>=0:v>0}(s.endAt,oa(s),a))}(i,e)}function s1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Yg(i){return(e,n)=>{let s=!1;for(const a of oa(i)){const u=o1(a,e,n);if(u!==0)return u;s=s||a.field.isKeyField()}return 0}}function o1(i,e,n){const s=i.field.isKeyField()?pe.comparator(e.key,n.key):function(u,h,m){const g=h.data.field(u),v=m.data.field(u);return g!==null&&v!==null?qs(g,v):_e()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,u]of s)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(n,s)=>{for(const[a,u]of s)e(a,u)})}isEmpty(){return jg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new Ze(pe.comparator);function wr(){return a1}const Xg=new Ze(pe.comparator);function na(...i){let e=Xg;for(const n of i)e=e.insert(n.key,n);return e}function Jg(i){let e=Xg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Mi(){return aa()}function Zg(){return aa()}function aa(){return new bi(i=>i.toString(),(i,e)=>i.isEqual(e))}const l1=new Ze(pe.comparator),u1=new mt(pe.comparator);function Ce(...i){let e=u1;for(const n of i)e=e.add(n);return e}const c1=new mt(ke);function h1(){return c1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(e)?"-0":e}}function ey(i){return{integerValue:""+i}}function d1(i,e){return zw(e)?ey(e):hd(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this._=void 0}}function f1(i,e,n){return i instanceof fu?function(a,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&od(u)&&(u=Au(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}}(n,e):i instanceof ga?ny(i,e):i instanceof ya?ry(i,e):function(a,u){const h=ty(a,u),m=km(h)+km(a.Pe);return Fh(h)&&Fh(a.Pe)?ey(m):hd(a.serializer,m)}(i,e)}function p1(i,e,n){return i instanceof ga?ny(i,e):i instanceof ya?ry(i,e):n}function ty(i,e){return i instanceof pu?function(s){return Fh(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class fu extends Pu{}class ga extends Pu{constructor(e){super(),this.elements=e}}function ny(i,e){const n=iy(e);for(const s of i.elements)n.some(a=>Yn(a,s))||n.push(s);return{arrayValue:{values:n}}}class ya extends Pu{constructor(e){super(),this.elements=e}}function ry(i,e){let n=iy(e);for(const s of i.elements)n=n.filter(a=>!Yn(a,s));return{arrayValue:{values:n}}}class pu extends Pu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function km(i){return it(i.integerValue||i.doubleValue)}function iy(i){return ad(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function m1(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof ga&&a instanceof ga||s instanceof ya&&a instanceof ya?$s(s.elements,a.elements,Yn):s instanceof pu&&a instanceof pu?Yn(s.Pe,a.Pe):s instanceof fu&&a instanceof fu}(i.transform,e.transform)}class g1{constructor(e,n){this.version=e,this.transformResults=n}}class vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ru(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ku{}function sy(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new dd(i.key,vn.none()):new Ia(i.key,i.data,vn.none());{const n=i.data,s=Xt.empty();let a=new mt(Ct.comparator);for(let u of e.fields)if(!a.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),a=a.add(u)}return new oi(i.key,s,new on(a.toArray()),vn.none())}}function y1(i,e,n){i instanceof Ia?function(a,u,h){const m=a.value.clone(),g=Vm(a.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,e,n):i instanceof oi?function(a,u,h){if(!ru(a.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Vm(a.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(oy(a)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,e,n):function(a,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function la(i,e,n,s){return i instanceof Ia?function(u,h,m,g){if(!ru(u.precondition,h))return m;const v=u.value.clone(),E=Dm(u.fieldTransforms,g,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof oi?function(u,h,m,g){if(!ru(u.precondition,h))return m;const v=Dm(u.fieldTransforms,g,h),E=h.data;return E.setAll(oy(u)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(T=>T.field))}(i,e,n,s):function(u,h,m){return ru(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(i,e,n)}function v1(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),u=ty(s.transform,a||null);u!=null&&(n===null&&(n=Xt.empty()),n.set(s.field,u))}return n||null}function xm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&$s(s,a,(u,h)=>m1(u,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ia extends ku{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class oi extends ku{constructor(e,n,s,a,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function oy(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Vm(i,e,n){const s=new Map;Ue(i.length===n.length);for(let a=0;a<n.length;a++){const u=i[a],h=u.transform,m=e.data.field(u.field);s.set(u.field,p1(h,m,n[a]))}return s}function Dm(i,e,n){const s=new Map;for(const a of i){const u=a.transform,h=n.data.field(a.field);s.set(a.field,f1(u,h,e))}return s}class dd extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _1 extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&y1(u,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=la(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=la(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Zg();return this.mutations.forEach(a=>{const u=e.get(a.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(a.key)?null:m;const g=sy(h,m);g!==null&&s.set(a.key,g),h.isValidDocument()||h.convertToNoDocument(Ee.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(n,s)=>xm(n,s))&&$s(this.baseMutations,e.baseMutations,(n,s)=>xm(n,s))}}class fd{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Ue(e.mutations.length===s.length);let a=function(){return l1}();const u=e.mutations;for(let h=0;h<u.length;h++)a=a.insert(u[h].key,s[h].version);return new fd(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,De;function I1(i){switch(i){default:return _e();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function ay(i){if(i===void 0)return Er("GRPC error has no .code"),H.UNKNOWN;switch(i){case at.OK:return H.OK;case at.CANCELLED:return H.CANCELLED;case at.UNKNOWN:return H.UNKNOWN;case at.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case at.INTERNAL:return H.INTERNAL;case at.UNAVAILABLE:return H.UNAVAILABLE;case at.UNAUTHENTICATED:return H.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case at.NOT_FOUND:return H.NOT_FOUND;case at.ALREADY_EXISTS:return H.ALREADY_EXISTS;case at.PERMISSION_DENIED:return H.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case at.ABORTED:return H.ABORTED;case at.OUT_OF_RANGE:return H.OUT_OF_RANGE;case at.UNIMPLEMENTED:return H.UNIMPLEMENTED;case at.DATA_LOSS:return H.DATA_LOSS;default:return _e()}}(De=at||(at={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new Fi([4294967295,4294967295],0);function Nm(i){const e=S1().encode(i),n=new Vg;return n.update(e),new Uint8Array(n.digest())}function Lm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Fi([n,s],0),new Fi([a,u],0)]}class pd{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(s<0)throw new ra(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Fi.fromNumber(this.Te)}Ee(e,n,s){let a=e.add(n.multiply(Fi.fromNumber(s)));return a.compare(A1)===1&&(a=new Fi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Nm(e),[s,a]=Lm(n);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,a,u);if(!this.de(h))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new pd(u,a,n);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.Te===0)return;const n=Nm(e),[s,a]=Lm(n);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,a,u);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,s,a,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new xu(Ee.min(),a,new Ze(ke),wr(),Ce())}}class Sa{constructor(e,n,s,a,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Sa(s,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class ly{constructor(e,n){this.targetId=e,this.me=n}}class uy{constructor(e,n,s=Pt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Om{constructor(){this.fe=0,this.ge=Mm(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),n=Ce(),s=Ce();return this.ge.forEach((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:_e()}}),new Sa(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=Mm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class R1{constructor(e){this.Le=e,this.Be=new Map,this.ke=wr(),this.qe=Yl(),this.Qe=Yl(),this.Ke=new Ze(ke)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const u=a.target;if(jh(u))if(s===0){const h=new pe(u.path);this.We(n,h,Ft.newNoDocument(h,Ee.min()))}else Ue(s===1);else{const h=this.Ze(n);if(h!==s){const m=this.Xe(e),g=m?this.et(m,e,h):1;if(g!==0){this.He(n);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,v)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:u=0}=n;let h,m;try{h=ti(s).toUint8Array()}catch(g){if(g instanceof zg)return Bs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new pd(h,a,u)}catch(g){return Bs(g instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let a=0;return s.forEach(u=>{const h=this.Le.nt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.We(n,u,null),a++)}),a}it(e){const n=new Map;this.Be.forEach((u,h)=>{const m=this.Ye(h);if(m){if(u.current&&jh(m.target)){const g=new pe(m.target.path);this.st(g).has(h)||this.ot(h,g)||this.We(h,g,Ft.newNoDocument(g,e))}u.be&&(n.set(h,u.ve()),u.Ce())}});let s=Ce();this.Qe.forEach((u,h)=>{let m=!0;h.forEachWhile(g=>{const v=this.Ye(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.ke.forEach((u,h)=>h.setReadTime(e));const a=new xu(e,n,this.Ke,this.ke,s);return this.ke=wr(),this.qe=Yl(),this.Qe=Yl(),this.Ke=new Ze(ke),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Om,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new mt(ke),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(ke),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Om),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Yl(){return new Ze(pe.comparator)}function Mm(){return new Ze(pe.comparator)}const C1={asc:"ASCENDING",desc:"DESCENDING"},P1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k1={and:"AND",or:"OR"};class x1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bh(i,e){return i.useProto3Json||Su(e)?e:{value:e}}function mu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function V1(i,e){return mu(i,e.toTimestamp())}function Kn(i){return Ue(!!i),Ee.fromTimestamp(function(n){const s=ei(n);return new pt(s.seconds,s.nanos)}(i))}function md(i,e){return $h(i,e).canonicalString()}function $h(i,e){const n=function(a){return new Qe(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function hy(i){const e=Qe.fromString(i);return Ue(gy(e)),e}function qh(i,e){return md(i.databaseId,e.path)}function Th(i,e){const n=hy(e);if(n.get(1)!==i.databaseId.projectId)throw new ae(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ae(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new pe(fy(n))}function dy(i,e){return md(i.databaseId,e)}function D1(i){const e=hy(i);return e.length===4?Qe.emptyPath():fy(e)}function Hh(i){return new Qe(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function fy(i){return Ue(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Fm(i,e,n){return{name:qh(i,e),fields:n.value.mapValue.fields}}function N1(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=function(v,E){return v.useProto3Json?(Ue(E===void 0||typeof E=="string"),Pt.fromBase64String(E||"")):(Ue(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Pt.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(v){const E=v.code===void 0?H.UNKNOWN:ay(v.code);return new ae(E,v.message||"")}(h);n=new uy(s,a,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Th(i,s.document.name),u=Kn(s.document.updateTime),h=s.document.createTime?Kn(s.document.createTime):Ee.min(),m=new Xt({mapValue:{fields:s.document.fields}}),g=Ft.newFoundDocument(a,u,h,m),v=s.targetIds||[],E=s.removedTargetIds||[];n=new iu(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Th(i,s.document),u=s.readTime?Kn(s.readTime):Ee.min(),h=Ft.newNoDocument(a,u),m=s.removedTargetIds||[];n=new iu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Th(i,s.document),u=s.removedTargetIds||[];n=new iu([],u,a,null)}else{if(!("filter"in e))return _e();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:u}=s,h=new T1(a,u),m=s.targetId;n=new ly(m,h)}}return n}function L1(i,e){let n;if(e instanceof Ia)n={update:Fm(i,e.key,e.value)};else if(e instanceof dd)n={delete:qh(i,e.key)};else if(e instanceof oi)n={update:Fm(i,e.key,e.data),updateMask:$1(e.fieldMask)};else{if(!(e instanceof _1))return _e();n={verify:qh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const m=h.transform;if(m instanceof fu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ga)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ya)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof pu)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw _e()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,u){return u.updateTime!==void 0?{updateTime:V1(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:_e()}(i,e.precondition)),n}function O1(i,e){return i&&i.length>0?(Ue(e!==void 0),i.map(n=>function(a,u){let h=a.updateTime?Kn(a.updateTime):Kn(u);return h.isEqual(Ee.min())&&(h=Kn(u)),new g1(h,a.transformResults||[])}(n,e))):[]}function M1(i,e){return{documents:[dy(i,e.path)]}}function F1(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=dy(i,a);const u=function(v){if(v.length!==0)return my(Ln.create(v,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const h=function(v){if(v.length!==0)return v.map(E=>function(A){return{field:Fs(A.field),direction:z1(A.dir)}}(E))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=Bh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ct:n,parent:a}}function U1(i){let e=D1(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Ue(s===1);const E=n.from[0];E.allDescendants?a=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(T){const A=py(T);return A instanceof Ln&&qg(A)?A.getFilters():[A]}(n.where));let h=[];n.orderBy&&(h=function(T){return T.map(A=>function(j){return new du(Us(j.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(A))}(n.orderBy));let m=null;n.limit&&(m=function(T){let A;return A=typeof T=="object"?T.value:T,Su(A)?null:A}(n.limit));let g=null;n.startAt&&(g=function(T){const A=!!T.before,N=T.values||[];return new hu(N,A)}(n.startAt));let v=null;return n.endAt&&(v=function(T){const A=!T.before,N=T.values||[];return new hu(N,A)}(n.endAt)),r1(e,a,h,u,m,"F",g,v)}function j1(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function py(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Us(n.unaryFilter.field);return lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Us(n.unaryFilter.field);return lt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Us(n.unaryFilter.field);return lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Us(n.unaryFilter.field);return lt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(i):i.fieldFilter!==void 0?function(n){return lt.create(Us(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(s=>py(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(i):_e()}function z1(i){return C1[i]}function b1(i){return P1[i]}function B1(i){return k1[i]}function Fs(i){return{fieldPath:i.canonicalString()}}function Us(i){return Ct.fromServerFormat(i.fieldPath)}function my(i){return i instanceof lt?function(n){if(n.op==="=="){if(Sm(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if(Im(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sm(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if(Im(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:b1(n.op),value:n.value}}}(i):i instanceof Ln?function(n){const s=n.getFilters().map(a=>my(a));return s.length===1?s[0]:{compositeFilter:{op:B1(n.op),filters:s}}}(i):_e()}function $1(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gy(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,s,a,u=Ee.min(),h=Ee.min(),m=Pt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.ht=e}}function H1(i){const e=U1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.ln=new Q1}addToCollectionParentIndex(e,n){return this.ln.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Zr.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class Q1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new mt(Qe.comparator),u=!a.has(s);return this.index[n]=a.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new mt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(41943040,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ws(0)}static Qn(){return new Ws(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm([i,e],[n,s]){const a=ke(i,n);return a===0?ke(e,s):a}class K1{constructor(e){this.Gn=e,this.buffer=new mt(jm),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();jm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){eo(n)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Zs(n)}await this.Yn(3e5)})}}class Y1{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Iu.oe);const s=new K1(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Um)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Um):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,u,h,m,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,h=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(s=T,m=Date.now(),this.removeTargets(e,s,n))).next(T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(v=Date.now(),Os()<=Ne.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${a} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(v-g)+`ms
Total Duration: ${v-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:T})))}}function X1(i,e){return new Y1(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.changes=new bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&la(s.mutation,a,on.empty(),pt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ce()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ce()){const a=Mi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(u=>{let h=na();return u.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=Mi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ce()))}populateOverlays(e,n,s){const a=[];return s.forEach(u=>{n.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(u=>{u.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,s,a){let u=wr();const h=aa(),m=function(){return aa()}();return n.forEach((g,v)=>{const E=s.get(v.key);a.has(v.key)&&(E===void 0||E.mutation instanceof oi)?u=u.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),la(E.mutation,v,E.mutation.getFieldMask(),pt.now())):h.set(v.key,on.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((v,E)=>h.set(v,E)),n.forEach((v,E)=>{var T;return m.set(v,new Z1(E,(T=h.get(v))!==null&&T!==void 0?T:null))}),m))}recalculateAndSaveOverlays(e,n){const s=aa();let a=new Ze((h,m)=>h-m),u=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(g=>{const v=n.get(g);if(v===null)return;let E=s.get(g)||on.empty();E=m.applyToLocalView(v,E),s.set(g,E);const T=(a.get(m.batchId)||Ce()).add(g);a=a.insert(m.batchId,T)})}).next(()=>{const h=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,E=g.value,T=Zg();E.forEach(A=>{if(!u.has(A)){const N=sy(n.get(A),s.get(A));N!==null&&T.set(A,N),u=u.add(A)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,T))}return W.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(h){return pe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Kg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(u=>{const h=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-u.size):W.resolve(Mi());let m=-1,g=u;return h.next(v=>W.forEach(v,(E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next(A=>{g=g.insert(E,A)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,g,v,Ce())).next(E=>({batchId:m,changes:Jg(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(s=>{let a=na();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const u=n.collectionGroup;let h=na();return this.indexManager.getCollectionParents(e,u).next(m=>W.forEach(m,g=>{const v=function(T,A){return new Ta(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next(E=>{E.forEach((T,A)=>{h=h.insert(T,A)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,a))).next(h=>{u.forEach((g,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Ft.newInvalidDocument(E)))});let m=na();return h.forEach((g,v)=>{const E=u.get(g);E!==void 0&&la(E.mutation,v,on.empty(),pt.now()),Cu(n,v)&&(m=m.insert(g,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return W.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Kn(a.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:H1(a.bundledQuery),readTime:Kn(a.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.overlays=new Ze(pe.comparator),this.Er=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Mi();return W.forEach(n,a=>this.getOverlay(e,a).next(u=>{u!==null&&s.set(a,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,u)=>{this.Tt(e,n,u)}),W.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Er.get(s);return a!==void 0&&(a.forEach(u=>this.overlays=this.overlays.remove(u)),this.Er.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const a=Mi(),u=n.length+1,h=new pe(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===u&&g.largestBatchId>s&&a.set(g.getKey(),g)}return W.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let u=new Ze((v,E)=>v-E);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let E=u.get(v.largestBatchId);E===null&&(E=Mi(),u=u.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const m=Mi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,E)=>m.set(v,E)),!(m.size()>=a)););return W.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.Er.get(a.largestBatchId).delete(s.key);this.Er.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new w1(n,s));let u=this.Er.get(n);u===void 0&&(u=Ce(),this.Er.set(n,u)),this.Er.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this.dr=new mt(wt.Ar),this.Rr=new mt(wt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const s=new wt(e,n);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new wt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new pe(new Qe([])),s=new wt(n,e),a=new wt(n,e+1),u=[];return this.Rr.forEachInRange([s,a],h=>{this.gr(h),u.push(h.key)}),u}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new pe(new Qe([])),s=new wt(n,e),a=new wt(n,e+1);let u=Ce();return this.Rr.forEachInRange([s,a],h=>{u=u.add(h.key)}),u}containsKey(e){const n=new wt(e,0),s=this.dr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class wt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return pe.comparator(e.key,n.key)||ke(e.br,n.br)}static Vr(e,n){return ke(e.br,n.br)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new mt(wt.Ar)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const u=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new E1(u,n,s,a);this.mutationQueue.push(h);for(const m of a)this.vr=this.vr.add(new wt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(h)}lookupMutationBatch(e,n){return W.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),u=a<0?0:a;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new wt(n,0),a=new wt(n,Number.POSITIVE_INFINITY),u=[];return this.vr.forEachInRange([s,a],h=>{const m=this.Cr(h.br);u.push(m)}),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new mt(ke);return n.forEach(a=>{const u=new wt(a,0),h=new wt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([u,h],m=>{s=s.add(m.br)})}),W.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let u=s;pe.isDocumentKey(u)||(u=u.child(""));const h=new wt(new pe(u),0);let m=new mt(ke);return this.vr.forEachWhile(g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(m=m.add(g.br)),!0)},h),W.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Ue(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return W.forEach(n.mutations,a=>{const u=new wt(a.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,n){const s=new wt(n,0),a=this.vr.firstAfterOrEqual(s);return W.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.Nr=e,this.docs=function(){return new Ze(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),u=a?a.size:0,h=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let s=wr();return n.forEach(a=>{const u=this.docs.get(a);s=s.insert(a,u?u.document.mutableCopy():Ft.newInvalidDocument(a))}),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let u=wr();const h=n.path,m=new pe(h.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||Mw(Ow(E),s)<=0||(a.has(E.key)||Cu(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,s,a){_e()}Lr(e,n){return W.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new oT(this)}getSize(e){return W.resolve(this.size)}}class oT extends J1{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),W.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.persistence=e,this.Br=new bi(n=>ld(n),ud),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.kr=0,this.qr=new gd,this.targetCount=0,this.Qr=Ws.qn()}forEachTarget(e,n){return this.Br.forEach((s,a)=>n(a)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),W.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Un(n),W.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let a=0;const u=[];return this.Br.forEach((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Br.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),W.waitFor(u).next(()=>a)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.Br.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,u=[];return a&&n.forEach(h=>{u.push(a.markPotentiallyOrphaned(e,h))}),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Iu(0),this.Ur=!1,this.Ur=!0,this.Wr=new rT,this.referenceDelegate=e(this),this.Gr=new aT(this),this.indexManager=new W1,this.remoteDocumentCache=function(a){return new sT(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new q1(n),this.jr=new tT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new iT(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){oe("MemoryPersistence","Starting transaction:",e);const a=new lT(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(u=>this.referenceDelegate.Jr(a).next(()=>u)).toPromise().then(u=>(a.raiseOnCommittedEvent(),u))}Yr(e,n){return W.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class lT extends Uw{constructor(e){super(),this.currentSequenceNumber=e}}class yd{constructor(e){this.persistence=e,this.Zr=new gd,this.Xr=null}static ei(e){return new yd(e)}get ti(){if(this.Xr)return this.Xr;throw _e()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),W.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(u=>this.ti.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ti,s=>{const a=pe.fromPath(s);return this.ni(e,a).next(u=>{u||n.removeEntry(a,Ee.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return W.or([()=>W.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class gu{constructor(e,n){this.persistence=e,this.ri=new bi(s=>bw(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=X1(this,n)}static ei(e,n){return new gu(e,n)}Hr(){}Jr(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return W.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(u=>u?W.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.Lr(e,h=>this.ir(e,h,n).next(m=>{m||(s++,u.removeEntry(h,Ee.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),W.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tu(e.data.value)),n}ir(e,n,s){return W.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return W.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Ce(),a=Ce();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new vd(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return uE()?8:jw(aE())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const u={result:null};return this.Xi(e,n).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.es(e,n,a,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new uT;return this.ts(e,n,h).next(m=>{if(u.result=m,this.Hi)return this.ns(e,n,h,m.size)})}).next(()=>u.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(Os()<=Ne.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Ms(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),W.resolve()):(Os()<=Ne.DEBUG&&oe("QueryEngine","Query:",Ms(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(Os()<=Ne.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Ms(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(n))):W.resolve())}Xi(e,n){if(Pm(n))return W.resolve(null);let s=Qn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=bh(n,null,"F"),s=Qn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=Ce(...u);return this.Zi.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const v=this.rs(n,m);return this.ss(n,v,h,g.readTime)?this.Xi(e,bh(n,null,"F")):this.os(e,v,n,g)}))})))}es(e,n,s,a){return Pm(n)||a.isEqual(Ee.min())?W.resolve(null):this.Zi.getDocuments(e,s).next(u=>{const h=this.rs(n,u);return this.ss(n,h,s,a)?W.resolve(null):(Os()<=Ne.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ms(n)),this.os(e,h,n,Lw(a,-1)).next(m=>m))})}rs(e,n){let s=new mt(Yg(e));return n.forEach((a,u)=>{Cu(e,u)&&(s=s.add(u))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}ts(e,n,s){return Os()<=Ne.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Ms(n)),this.Zi.getDocumentsMatchingQuery(e,n,Zr.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(u=>(n.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Ze(ke),this.cs=new bi(u=>ld(u),ud),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eT(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function dT(i,e,n,s){return new hT(i,e,n,s)}async function vy(i,e){const n=we(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(u=>(a=u,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],m=[];let g=Ce();for(const v of a){h.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of u){m.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next(v=>({Ts:v,removedBatchIds:h,addedBatchIds:m}))})})}function fT(i,e){const n=we(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),u=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,g,v,E){const T=v.batch,A=T.keys();let N=W.resolve();return A.forEach(j=>{N=N.next(()=>E.getEntry(g,j)).next($=>{const M=v.docVersions.get(j);Ue(M!==null),$.version.compareTo(M)<0&&(T.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),E.addEntry($)))})}),N.next(()=>m.mutationQueue.removeMutationBatch(g,T))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Ce();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function _y(i){const e=we(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function pT(i,e){const n=we(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((E,T)=>{const A=a.get(T);if(!A)return;m.push(n.Gr.removeMatchingKeys(u,E.removedDocuments,T).next(()=>n.Gr.addMatchingKeys(u,E.addedDocuments,T)));let N=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?N=N.withResumeToken(Pt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,s)),a=a.insert(T,N),function($,M,K){return $.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(A,N,E)&&m.push(n.Gr.updateTargetData(u,N))});let g=wr(),v=Ce();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(mT(u,h,e.documentUpdates).next(E=>{g=E.Is,v=E.Es})),!s.isEqual(Ee.min())){const E=n.Gr.getLastRemoteSnapshotVersion(u).next(T=>n.Gr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return W.waitFor(m).next(()=>h.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,v)).next(()=>g)}).then(u=>(n.us=a,u))}function mT(i,e,n){let s=Ce(),a=Ce();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let h=wr();return n.forEach((m,g)=>{const v=u.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(Ee.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)}),{Is:h,Es:a}})}function gT(i,e){const n=we(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function yT(i,e){const n=we(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(u=>u?(a=u,W.resolve(a)):n.Gr.allocateTargetId(s).next(h=>(a=new Kr(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function Wh(i,e,n){const s=we(i),a=s.us.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,a))}catch(h){if(!eo(h))throw h;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function zm(i,e,n){const s=we(i);let a=Ee.min(),u=Ce();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,E){const T=we(g),A=T.cs.get(E);return A!==void 0?W.resolve(T.us.get(A)):T.Gr.getTargetData(v,E)}(s,h,Qn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,m.targetId).next(g=>{u=g})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,n?a:Ee.min(),n?u:Ce())).next(m=>(vT(s,s1(e),m),{documents:m,ds:u})))}function vT(i,e,n){let s=i.ls.get(e)||Ee.min();n.forEach((a,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.ls.set(e,s)}class bm{constructor(){this.activeTargetIds=h1()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _T{constructor(){this._o=new bm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new bm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl=null;function Ih(){return Xl===null?Xl=function(){return 268435456+Math.round(2147483648*Math.random())}():Xl++,"0x"+Xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class IT extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${u}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${u}`}Oo(n,s,a,u,h){const m=Ih(),g=this.No(n,s.toUriEncodedString());oe("RestConnection",`Sending RPC '${n}' ${m}:`,g,a);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(v,u,h),this.Bo(n,g,v,a).then(E=>(oe("RestConnection",`Received RPC '${n}' ${m}: `,E),E),E=>{throw Bs("RestConnection",`RPC '${n}' ${m} failed with error: `,E,"url: ",g,"request:",a),E})}ko(n,s,a,u,h,m){return this.Oo(n,s,a,u,h)}Lo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((u,h)=>n[h]=u),a&&a.headers.forEach((u,h)=>n[h]=u)}No(n,s){const a=wT[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,s,a){const u=Ih();return new Promise((h,m)=>{const g=new Dg;g.setWithCredentials(!0),g.listenOnce(Ng.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case eu.NO_ERROR:const E=g.getResponseJson();oe(Ot,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case eu.TIMEOUT:oe(Ot,`RPC '${e}' ${u} timed out`),m(new ae(H.DEADLINE_EXCEEDED,"Request time out"));break;case eu.HTTP_ERROR:const T=g.getStatus();if(oe(Ot,`RPC '${e}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const N=A==null?void 0:A.error;if(N&&N.status&&N.message){const j=function(M){const K=M.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(K)>=0?K:H.UNKNOWN}(N.status);m(new ae(j,N.message))}else m(new ae(H.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ae(H.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{oe(Ot,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(a);oe(Ot,`RPC '${e}' ${u} sending request:`,a),g.send(n,"POST",v,s,15)})}qo(e,n,s){const a=Ih(),u=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Mg(),m=Og(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Lo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");oe(Ot,`Creating RPC '${e}' stream ${a}: ${E}`,g);const T=h.createWebChannel(E,g);let A=!1,N=!1;const j=new TT({Eo:M=>{N?oe(Ot,`Not sending because RPC '${e}' stream ${a} is closed:`,M):(A||(oe(Ot,`Opening RPC '${e}' stream ${a} transport.`),T.open(),A=!0),oe(Ot,`RPC '${e}' stream ${a} sending:`,M),T.send(M))},Ao:()=>T.close()}),$=(M,K,ne)=>{M.listen(K,re=>{try{ne(re)}catch(de){setTimeout(()=>{throw de},0)}})};return $(T,ta.EventType.OPEN,()=>{N||(oe(Ot,`RPC '${e}' stream ${a} transport opened.`),j.So())}),$(T,ta.EventType.CLOSE,()=>{N||(N=!0,oe(Ot,`RPC '${e}' stream ${a} transport closed`),j.Do())}),$(T,ta.EventType.ERROR,M=>{N||(N=!0,Bs(Ot,`RPC '${e}' stream ${a} transport errored:`,M),j.Do(new ae(H.UNAVAILABLE,"The operation could not be completed")))}),$(T,ta.EventType.MESSAGE,M=>{var K;if(!N){const ne=M.data[0];Ue(!!ne);const re=ne,de=(re==null?void 0:re.error)||((K=re[0])===null||K===void 0?void 0:K.error);if(de){oe(Ot,`RPC '${e}' stream ${a} received error:`,de);const Re=de.status;let Te=function(R){const k=at[R];if(k!==void 0)return ay(k)}(Re),x=de.message;Te===void 0&&(Te=H.INTERNAL,x="Unknown error status: "+Re+" with message "+de.message),N=!0,j.Do(new ae(Te,x)),T.close()}else oe(Ot,`RPC '${e}' stream ${a} received:`,ne),j.vo(ne)}}),$(m,Lg.STAT_EVENT,M=>{M.stat===Oh.PROXY?oe(Ot,`RPC '${e}' stream ${a} detected buffering proxy`):M.stat===Oh.NOPROXY&&oe(Ot,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{j.bo()},0),j}}function Sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(i){return new x1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n,s=1e3,a=1.5,u=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=u,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,s,a,u,h,m,g){this.li=e,this.Yo=s,this.Zo=a,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Ey(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new ae(H.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.E_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ST extends wy{constructor(e,n,s,a,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,h),this.serializer=u}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=N1(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ee.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ee.min():h.readTime?Kn(h.readTime):Ee.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=Hh(this.serializer),n.addTarget=function(u,h){let m;const g=h.target;if(m=jh(g)?{documents:M1(u,g)}:{query:F1(u,g).ct},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=cy(u,h.resumeToken);const v=Bh(u,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ee.min())>0){m.readTime=mu(u,h.snapshotVersion.toTimestamp());const v=Bh(u,h.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const s=j1(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=Hh(this.serializer),n.removeTarget=e,this.c_(n)}}class AT extends wy{constructor(e,n,s,a,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,h),this.serializer=u}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=O1(e.writeResults,e.commitTime),s=Kn(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=Hh(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>L1(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new ae(H.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Oo(e,$h(n,s),a,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ae(H.UNKNOWN,u.toString())})}ko(e,n,s,a,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.ko(e,$h(n,s),a,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(H.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class CT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Er(n),this.C_=!1):oe("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,s,a,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=u,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{Bi(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(g){const v=we(g);v.k_.add(4),await Aa(v),v.K_.set("Unknown"),v.k_.delete(4),await Du(v)}(this))})}),this.K_=new CT(s,a)}}async function Du(i){if(Bi(i))for(const e of i.q_)await e(!0)}async function Aa(i){for(const e of i.q_)await e(!1)}function Ty(i,e){const n=we(i);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Td(n)?wd(n):to(n).s_()&&Ed(n,e))}function _d(i,e){const n=we(i),s=to(n);n.B_.delete(e),s.s_()&&Iy(n,e),n.B_.size===0&&(s.s_()?s.a_():Bi(n)&&n.K_.set("Unknown"))}function Ed(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}to(i).V_(e)}function Iy(i,e){i.U_.xe(e),to(i).m_(e)}function wd(i){i.U_=new R1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),to(i).start(),i.K_.F_()}function Td(i){return Bi(i)&&!to(i).i_()&&i.B_.size>0}function Bi(i){return we(i).k_.size===0}function Sy(i){i.U_=void 0}async function kT(i){i.K_.set("Online")}async function xT(i){i.B_.forEach((e,n)=>{Ed(i,e)})}async function VT(i,e){Sy(i),Td(i)?(i.K_.O_(e),wd(i)):i.K_.set("Unknown")}async function DT(i,e,n){if(i.K_.set("Online"),e instanceof uy&&e.state===2&&e.cause)try{await async function(a,u){const h=u.cause;for(const m of u.targetIds)a.B_.has(m)&&(await a.remoteSyncer.rejectListen(m,h),a.B_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yu(i,s)}else if(e instanceof iu?i.U_.$e(e):e instanceof ly?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(Ee.min()))try{const s=await _y(i.localStore);n.compareTo(s)>=0&&await function(u,h){const m=u.U_.it(h);return m.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.B_.get(v);E&&u.B_.set(v,E.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,v)=>{const E=u.B_.get(g);if(!E)return;u.B_.set(g,E.withResumeToken(Pt.EMPTY_BYTE_STRING,E.snapshotVersion)),Iy(u,g);const T=new Kr(E.target,g,v,E.sequenceNumber);Ed(u,T)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){oe("RemoteStore","Failed to raise snapshot:",s),await yu(i,s)}}async function yu(i,e,n){if(!eo(e))throw e;i.k_.add(1),await Aa(i),i.K_.set("Offline"),n||(n=()=>_y(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await Du(i)})}function Ay(i,e){return e().catch(n=>yu(i,n,e))}async function Nu(i){const e=we(i),n=ri(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;NT(e);)try{const a=await gT(e.localStore,s);if(a===null){e.L_.length===0&&n.a_();break}s=a.batchId,LT(e,a)}catch(a){await yu(e,a)}Ry(e)&&Cy(e)}function NT(i){return Bi(i)&&i.L_.length<10}function LT(i,e){i.L_.push(e);const n=ri(i);n.s_()&&n.f_&&n.g_(e.mutations)}function Ry(i){return Bi(i)&&!ri(i).i_()&&i.L_.length>0}function Cy(i){ri(i).start()}async function OT(i){ri(i).w_()}async function MT(i){const e=ri(i);for(const n of i.L_)e.g_(n.mutations)}async function FT(i,e,n){const s=i.L_.shift(),a=fd.from(s,e,n);await Ay(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await Nu(i)}async function UT(i,e){e&&ri(i).f_&&await async function(s,a){if(function(h){return I1(h)&&h!==H.ABORTED}(a.code)){const u=s.L_.shift();ri(s).__(),await Ay(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,a)),await Nu(s)}}(i,e),Ry(i)&&Cy(i)}async function $m(i,e){const n=we(i);n.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const s=Bi(n);n.k_.add(3),await Aa(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Du(n)}async function jT(i,e){const n=we(i);e?(n.k_.delete(2),await Du(n)):e||(n.k_.add(2),await Aa(n),n.K_.set("Unknown"))}function to(i){return i.W_||(i.W_=function(n,s,a){const u=we(n);return u.b_(),new ST(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{Ro:kT.bind(null,i),mo:xT.bind(null,i),po:VT.bind(null,i),R_:DT.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Td(i)?wd(i):i.K_.set("Unknown")):(await i.W_.stop(),Sy(i))})),i.W_}function ri(i){return i.G_||(i.G_=function(n,s,a){const u=we(n);return u.b_(),new AT(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:OT.bind(null,i),po:UT.bind(null,i),p_:MT.bind(null,i),y_:FT.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await Nu(i)):(await i.G_.stop(),i.L_.length>0&&(oe("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,s,a,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=u,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,u){const h=Date.now()+s,m=new Id(e,n,h,a,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sd(i,e){if(Er("AsyncQueue",`${e}: ${i}`),eo(i))return new ae(H.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{static emptySet(e){return new zs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||pe.comparator(n.key,s.key):(n,s)=>pe.comparator(n.key,s.key),this.keyedMap=na(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.z_=new Ze(pe.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):_e():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Qs{constructor(e,n,s,a,u,h,m,g,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,u){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new Qs(e,n,zs.emptySet(n),h,s,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class bT{constructor(){this.queries=Hm(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=we(n),u=a.queries;a.queries=Hm(),u.forEach((h,m)=>{for(const g of m.J_)g.onError(s)})})(this,new ae(H.ABORTED,"Firestore shutting down"))}}function Hm(){return new bi(i=>Gg(i),Ru)}async function Py(i,e){const n=we(i);let s=3;const a=e.query;let u=n.queries.get(a);u?!u.Y_()&&e.Z_()&&(s=2):(u=new zT,s=e.Z_()?0:1);try{switch(s){case 0:u.H_=await n.onListen(a,!0);break;case 1:u.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(h){const m=Sd(h,`Initialization of query '${Ms(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,u),u.J_.push(e),e.ea(n.onlineState),u.H_&&e.ta(u.H_)&&Ad(n)}async function ky(i,e){const n=we(i),s=e.query;let a=3;const u=n.queries.get(s);if(u){const h=u.J_.indexOf(e);h>=0&&(u.J_.splice(h,1),u.J_.length===0?a=e.Z_()?0:1:!u.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function BT(i,e){const n=we(i);let s=!1;for(const a of e){const u=a.query,h=n.queries.get(u);if(h){for(const m of h.J_)m.ta(a)&&(s=!0);h.H_=a}}s&&Ad(n)}function $T(i,e,n){const s=we(i),a=s.queries.get(e);if(a)for(const u of a.J_)u.onError(n);s.queries.delete(e)}function Ad(i){i.X_.forEach(e=>{e.next()})}var Qh,Wm;(Wm=Qh||(Qh={})).na="default",Wm.Cache="cache";class xy{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Qs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Qh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this.key=e}}class Dy{constructor(e){this.key=e}}class qT{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ce(),this.mutatedKeys=Ce(),this.Va=Yg(e),this.ma=new zs(this.Va)}get fa(){return this.da}ga(e,n){const s=n?n.pa:new qm,a=n?n.ma:this.ma;let u=n?n.mutatedKeys:this.mutatedKeys,h=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((E,T)=>{const A=a.get(E),N=Cu(this.query,T)?T:null,j=!!A&&this.mutatedKeys.has(A.key),$=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let M=!1;A&&N?A.data.isEqual(N.data)?j!==$&&(s.track({type:3,doc:N}),M=!0):this.ya(A,N)||(s.track({type:2,doc:N}),M=!0,(g&&this.Va(N,g)>0||v&&this.Va(N,v)<0)&&(m=!0)):!A&&N?(s.track({type:0,doc:N}),M=!0):A&&!N&&(s.track({type:1,doc:A}),M=!0,(g||v)&&(m=!0)),M&&(N?(h=h.add(N),u=$?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{ma:h,pa:s,ss:m,mutatedKeys:u}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const u=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((E,T)=>function(N,j){const $=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return $(N)-$(j)}(E.type,T.type)||this.Va(E.doc,T.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],g=this.Ra.size===0&&this.current&&!a?1:0,v=g!==this.Aa;return this.Aa=g,h.length!==0||v?{snapshot:new Qs(this.query,e.ma,u,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new qm,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ce(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new Dy(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new Vy(s))}),n}va(e){this.da=e.ds,this.Ra=Ce();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Qs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class HT{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class WT{constructor(e){this.key=e,this.Fa=!1}}class QT{constructor(e,n,s,a,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new bi(m=>Gg(m),Ru),this.Oa=new Map,this.Na=new Set,this.La=new Ze(pe.comparator),this.Ba=new Map,this.ka=new gd,this.qa={},this.Qa=new Map,this.Ka=Ws.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function KT(i,e,n=!0){const s=Uy(i);let a;const u=s.xa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.Ca()):a=await Ny(s,e,n,!0),a}async function GT(i,e){const n=Uy(i);await Ny(n,e,!0,!1)}async function Ny(i,e,n,s){const a=await yT(i.localStore,Qn(e)),u=a.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await YT(i,e,u,h==="current",a.resumeToken)),i.isPrimaryClient&&n&&Ty(i.remoteStore,a),m}async function YT(i,e,n,s,a){i.Ua=(T,A,N)=>async function($,M,K,ne){let re=M.view.ga(K);re.ss&&(re=await zm($.localStore,M.query,!1).then(({documents:x})=>M.view.ga(x,re)));const de=ne&&ne.targetChanges.get(M.targetId),Re=ne&&ne.targetMismatches.get(M.targetId)!=null,Te=M.view.applyChanges(re,$.isPrimaryClient,de,Re);return Km($,M.targetId,Te.ba),Te.snapshot}(i,T,A,N);const u=await zm(i.localStore,e,!0),h=new qT(e,u.ds),m=h.ga(u.documents),g=Sa.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=h.applyChanges(m,i.isPrimaryClient,g);Km(i,n,v.ba);const E=new HT(e,n,h);return i.xa.set(e,E),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),v.snapshot}async function XT(i,e,n){const s=we(i),a=s.xa.get(e),u=s.Oa.get(a.targetId);if(u.length>1)return s.Oa.set(a.targetId,u.filter(h=>!Ru(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Wh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&_d(s.remoteStore,a.targetId),Kh(s,a.targetId)}).catch(Zs)):(Kh(s,a.targetId),await Wh(s.localStore,a.targetId,!0))}async function JT(i,e){const n=we(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),_d(n.remoteStore,s.targetId))}async function ZT(i,e,n){const s=oI(i);try{const a=await function(h,m){const g=we(h),v=pt.now(),E=m.reduce((N,j)=>N.add(j.key),Ce());let T,A;return g.persistence.runTransaction("Locally write mutations","readwrite",N=>{let j=wr(),$=Ce();return g.hs.getEntries(N,E).next(M=>{j=M,j.forEach((K,ne)=>{ne.isValidDocument()||($=$.add(K))})}).next(()=>g.localDocuments.getOverlayedDocuments(N,j)).next(M=>{T=M;const K=[];for(const ne of m){const re=v1(ne,T.get(ne.key).overlayedDocument);re!=null&&K.push(new oi(ne.key,re,bg(re.value.mapValue),vn.exists(!0)))}return g.mutationQueue.addMutationBatch(N,v,K,m)}).next(M=>{A=M;const K=M.applyToLocalDocumentSet(T,$);return g.documentOverlayCache.saveOverlays(N,M.batchId,K)})}).then(()=>({batchId:A.batchId,changes:Jg(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,m,g){let v=h.qa[h.currentUser.toKey()];v||(v=new Ze(ke)),v=v.insert(m,g),h.qa[h.currentUser.toKey()]=v}(s,a.batchId,n),await Ra(s,a.changes),await Nu(s.remoteStore)}catch(a){const u=Sd(a,"Failed to persist write");n.reject(u)}}async function Ly(i,e){const n=we(i);try{const s=await pT(n.localStore,e);e.targetChanges.forEach((a,u)=>{const h=n.Ba.get(u);h&&(Ue(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.Fa=!0:a.modifiedDocuments.size>0?Ue(h.Fa):a.removedDocuments.size>0&&(Ue(h.Fa),h.Fa=!1))}),await Ra(n,s,e)}catch(s){await Zs(s)}}function Qm(i,e,n){const s=we(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((u,h)=>{const m=h.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(h,m){const g=we(h);g.onlineState=m;let v=!1;g.queries.forEach((E,T)=>{for(const A of T.J_)A.ea(m)&&(v=!0)}),v&&Ad(g)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eI(i,e,n){const s=we(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Ba.get(e),u=a&&a.key;if(u){let h=new Ze(pe.comparator);h=h.insert(u,Ft.newNoDocument(u,Ee.min()));const m=Ce().add(u),g=new xu(Ee.min(),new Map,new Ze(ke),h,m);await Ly(s,g),s.La=s.La.remove(u),s.Ba.delete(e),Rd(s)}else await Wh(s.localStore,e,!1).then(()=>Kh(s,e,n)).catch(Zs)}async function tI(i,e){const n=we(i),s=e.batch.batchId;try{const a=await fT(n.localStore,e);My(n,s,null),Oy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ra(n,a)}catch(a){await Zs(a)}}async function nI(i,e,n){const s=we(i);try{const a=await function(h,m){const g=we(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return g.mutationQueue.lookupMutationBatch(v,m).next(T=>(Ue(T!==null),E=T.keys(),g.mutationQueue.removeMutationBatch(v,T))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>g.localDocuments.getDocuments(v,E))})}(s.localStore,e);My(s,e,n),Oy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ra(s,a)}catch(a){await Zs(a)}}function Oy(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function My(i,e,n){const s=we(i);let a=s.qa[s.currentUser.toKey()];if(a){const u=a.get(e);u&&(n?u.reject(n):u.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function Kh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||Fy(i,s)})}function Fy(i,e){i.Na.delete(e.path.canonicalString());const n=i.La.get(e);n!==null&&(_d(i.remoteStore,n),i.La=i.La.remove(e),i.Ba.delete(n),Rd(i))}function Km(i,e,n){for(const s of n)s instanceof Vy?(i.ka.addReference(s.key,e),rI(i,s)):s instanceof Dy?(oe("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||Fy(i,s.key)):_e()}function rI(i,e){const n=e.key,s=n.path.canonicalString();i.La.get(n)||i.Na.has(s)||(oe("SyncEngine","New document in limbo: "+n),i.Na.add(s),Rd(i))}function Rd(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new pe(Qe.fromString(e)),s=i.Ka.next();i.Ba.set(s,new WT(n)),i.La=i.La.insert(n,s),Ty(i.remoteStore,new Kr(Qn(cd(n.path)),s,"TargetPurposeLimboResolution",Iu.oe))}}async function Ra(i,e,n){const s=we(i),a=[],u=[],h=[];s.xa.isEmpty()||(s.xa.forEach((m,g)=>{h.push(s.Ua(g,e,n).then(v=>{var E;if((v||n)&&s.isPrimaryClient){const T=v?!v.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(v){a.push(v);const T=vd.zi(g.targetId,v);u.push(T)}}))}),await Promise.all(h),s.Ma.R_(a),await async function(g,v){const E=we(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>W.forEach(v,A=>W.forEach(A.Wi,N=>E.persistence.referenceDelegate.addReference(T,A.targetId,N)).next(()=>W.forEach(A.Gi,N=>E.persistence.referenceDelegate.removeReference(T,A.targetId,N)))))}catch(T){if(!eo(T))throw T;oe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const A=T.targetId;if(!T.fromCache){const N=E.us.get(A),j=N.snapshotVersion,$=N.withLastLimboFreeSnapshotVersion(j);E.us=E.us.insert(A,$)}}}(s.localStore,u))}async function iI(i,e){const n=we(i);if(!n.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const s=await vy(n.localStore,e);n.currentUser=e,function(u,h){u.Qa.forEach(m=>{m.forEach(g=>{g.reject(new ae(H.CANCELLED,h))})}),u.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ra(n,s.Ts)}}function sI(i,e){const n=we(i),s=n.Ba.get(e);if(s&&s.Fa)return Ce().add(s.key);{let a=Ce();const u=n.Oa.get(e);if(!u)return a;for(const h of u){const m=n.xa.get(h);a=a.unionWith(m.view.fa)}return a}}function Uy(i){const e=we(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ly.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eI.bind(null,e),e.Ma.R_=BT.bind(null,e.eventManager),e.Ma.Wa=$T.bind(null,e.eventManager),e}function oI(i){const e=we(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nI.bind(null,e),e}class vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return dT(this.persistence,new cT,e.initialUser,this.serializer)}ja(e){return new yy(yd.ei,this.serializer)}za(e){return new _T}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vu.provider={build:()=>new vu};class aI extends vu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ue(this.persistence.referenceDelegate instanceof gu);const s=this.persistence.referenceDelegate.garbageCollector;return new G1(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new yy(s=>gu.ei(s,n),this.serializer)}}class Gh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Qm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iI.bind(null,this.syncEngine),await jT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bT}()}createDatastore(e){const n=Vu(e.databaseInfo.databaseId),s=function(u){return new IT(u)}(e.databaseInfo);return function(u,h,m,g){return new RT(u,h,m,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,u,h,m){return new PT(s,a,u,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Qm(this.syncEngine,n,0),function(){return Bm.p()?new Bm:new ET}())}createSyncEngine(e,n){return function(a,u,h,m,g,v,E){const T=new QT(a,u,h,m,g,v);return E&&(T.$a=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const u=we(a);oe("RemoteStore","RemoteStore shutting down."),u.k_.add(5),await Aa(u),u.Q_.shutdown(),u.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gh.provider={build:()=>new Gh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,s,a,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Mt.UNAUTHENTICATED,this.clientId=Ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{oe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(oe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Sd(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Ah(i,e){i.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await vy(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Gm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await uI(i);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>$m(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>$m(e.remoteStore,a)),i._onlineComponents=e}async function uI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ah(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===H.FAILED_PRECONDITION||a.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Bs("Error using user provided cache. Falling back to memory cache: "+n),await Ah(i,new vu)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await Ah(i,new aI(void 0));return i._offlineComponents}async function zy(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await Gm(i,i._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await Gm(i,new Gh))),i._onlineComponents}function cI(i){return zy(i).then(e=>e.syncEngine)}async function by(i){const e=await zy(i),n=e.eventManager;return n.onListen=KT.bind(null,e.syncEngine),n.onUnlisten=XT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JT.bind(null,e.syncEngine),n}function hI(i,e,n={}){const s=new vr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,v){const E=new jy({next:A=>{E.eu(),h.enqueueAndForget(()=>ky(u,T));const N=A.docs.has(m);!N&&A.fromCache?v.reject(new ae(H.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&A.fromCache&&g&&g.source==="server"?v.reject(new ae(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(A)},error:A=>v.reject(A)}),T=new xy(cd(m.path),E,{includeMetadataChanges:!0,ua:!0});return Py(u,T)}(await by(i),i.asyncQueue,e,n,s)),s.promise}function dI(i,e,n={}){const s=new vr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,v){const E=new jy({next:A=>{E.eu(),h.enqueueAndForget(()=>ky(u,T)),A.fromCache&&g.source==="server"?v.reject(new ae(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(A)},error:A=>v.reject(A)}),T=new xy(m,E,{includeMetadataChanges:!0,ua:!0});return Py(u,T)}(await by(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(i,e,n){if(!n)throw new ae(H.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function fI(i,e,n,s){if(e===!0&&s===!0)throw new ae(H.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Xm(i){if(!pe.isDocumentKey(i))throw new ae(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Jm(i){if(pe.isDocumentKey(i))throw new ae(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Lu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":_e()}function ji(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ae(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lu(i);throw new ae(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=By((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zm(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Aw;switch(s.type){case"firstParty":return new kw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Ym.get(n);s&&(oe("ComponentProvider","Removing Datastore"),Ym.delete(n),s.terminate())}(this),Promise.resolve()}}function pI(i,e,n,s={}){var a;const u=(i=ji(i,Ou))._getSettings(),h=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let m,g;if(typeof s.mockUserToken=="string")m=s.mockUserToken,g=Mt.MOCK_USER;else{m=oE(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new ae(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Mt(v)}i._authCredentials=new Rw(new Fg(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new no(this.firestore,e,this._query)}}class an{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Xr extends no{constructor(e,n,s){super(e,n,cd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new pe(e))}withConverter(e){return new Xr(this.firestore,e,this._path)}}function _u(i,e,...n){if(i=Gn(i),$y("collection","path",e),i instanceof Ou){const s=Qe.fromString(e,...n);return Jm(s),new Xr(i,null,s)}{if(!(i instanceof an||i instanceof Xr))throw new ae(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qe.fromString(e,...n));return Jm(s),new Xr(i.firestore,null,s)}}function qy(i,e,...n){if(i=Gn(i),arguments.length===1&&(e=Ug.newId()),$y("doc","path",e),i instanceof Ou){const s=Qe.fromString(e,...n);return Xm(s),new an(i,null,new pe(s))}{if(!(i instanceof an||i instanceof Xr))throw new ae(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qe.fromString(e,...n));return Xm(s),new an(i.firestore,i instanceof Xr?i.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Ey(this,"async_queue_retry"),this.fu=()=>{const s=Sh();s&&oe("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=Sh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new vr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!eo(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(s);throw Er("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=Id.createAndSchedule(this,e,n,s,u=>this.Su(u));return this.du.push(a),a}pu(){this.Au&&_e()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Ca extends Ou{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new eg,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eg(e),this._firestoreClient=void 0,await e}}}function mI(i,e){const n=typeof i=="object"?i:mw(),s=typeof i=="string"?i:"(default)",a=hw(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const u=iE("firestore");u&&pI(a,...u)}return a}function Mu(i){if(i._terminated)throw new ae(H.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||gI(i),i._firestoreClient}function gI(i){var e,n,s;const a=i._freezeSettings(),u=function(m,g,v,E){return new qw(m,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,By(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new lI(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(Pt.fromBase64String(e))}catch(n){throw new ae(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function yI(){return new Pa("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==a[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=/^__.*__$/;class _I{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ia(e,this.data,n,this.fieldTransforms)}}class Hy{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Wy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class xd{constructor(e,n,s,a,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,u===void 0&&this.Fu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new xd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Lu(e),a}Bu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Eu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Wy(this.Mu)&&vI.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class EI{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Vu(e)}$u(e,n,s,a=!1){return new xd({Mu:e,methodName:n,Ku:s,path:Ct.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vd(i){const e=i._freezeSettings(),n=Vu(i._databaseId);return new EI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Qy(i,e,n,s,a,u={}){const h=i.$u(u.merge||u.mergeFields?2:0,e,n,a);Dd("Data must be an object, but it was:",h,s);const m=Ky(s,h);let g,v;if(u.merge)g=new on(h.fieldMask),v=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const A=Yh(e,T,n);if(!h.contains(A))throw new ae(H.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Yy(E,A)||E.push(A)}g=new on(E),v=h.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,v=h.fieldTransforms;return new _I(new Xt(m),g,v)}class Fu extends Cd{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fu}}function wI(i,e,n,s){const a=i.$u(1,e,n);Dd("Data must be an object, but it was:",a,s);const u=[],h=Xt.empty();si(s,(g,v)=>{const E=Nd(e,g,n);v=Gn(v);const T=a.Bu(E);if(v instanceof Fu)u.push(E);else{const A=ka(v,T);A!=null&&(u.push(E),h.set(E,A))}});const m=new on(u);return new Hy(h,m,a.fieldTransforms)}function TI(i,e,n,s,a,u){const h=i.$u(1,e,n),m=[Yh(e,s,n)],g=[a];if(u.length%2!=0)throw new ae(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(Yh(e,u[A])),g.push(u[A+1]);const v=[],E=Xt.empty();for(let A=m.length-1;A>=0;--A)if(!Yy(v,m[A])){const N=m[A];let j=g[A];j=Gn(j);const $=h.Bu(N);if(j instanceof Fu)v.push(N);else{const M=ka(j,$);M!=null&&(v.push(N),E.set(N,M))}}const T=new on(v);return new Hy(E,T,h.fieldTransforms)}function II(i,e,n,s=!1){return ka(n,i.$u(s?4:3,e))}function ka(i,e){if(Gy(i=Gn(i)))return Dd("Unsupported field value:",e,i),Ky(i,e);if(i instanceof Cd)return function(s,a){if(!Wy(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(a);u&&a.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const u=[];let h=0;for(const m of s){let g=ka(m,a.ku(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(i,e)}return function(s,a){if((s=Gn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return d1(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=pt.fromDate(s);return{timestampValue:mu(a.serializer,u)}}if(s instanceof pt){const u=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:mu(a.serializer,u)}}if(s instanceof Pd)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ks)return{bytesValue:cy(a.serializer,s._byteString)};if(s instanceof an){const u=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw a.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:md(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof kd)return function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.qu("VectorValues must only contain numeric values.");return hd(m.serializer,g)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${Lu(s)}`)}(i,e)}function Ky(i,e){const n={};return jg(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(i,(s,a)=>{const u=ka(a,e.Ou(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Gy(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof pt||i instanceof Pd||i instanceof Ks||i instanceof an||i instanceof Cd||i instanceof kd)}function Dd(i,e,n){if(!Gy(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=Lu(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function Yh(i,e,n){if((e=Gn(e))instanceof Pa)return e._internalPath;if(typeof e=="string")return Nd(i,e);throw Eu("Field path arguments must be of type string or ",i,!1,void 0,n)}const SI=new RegExp("[~\\*/\\[\\]]");function Nd(i,e,n){if(e.search(SI)>=0)throw Eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Pa(...e.split("."))._internalPath}catch{throw Eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Eu(i,e,n,s,a){const u=s&&!s.isEmpty(),h=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${a}`),g+=")"),new ae(H.INVALID_ARGUMENT,m+i+g)}function Yy(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,s,a,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ld("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AI extends Xy{data(){return super.data()}}function Ld(i,e){return typeof e=="string"?Nd(i,e):e instanceof Pa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ae(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Od{}class CI extends Od{}function Jy(i,e,...n){let s=[];e instanceof Od&&s.push(e),s=s.concat(n),function(u){const h=u.filter(g=>g instanceof Md).length,m=u.filter(g=>g instanceof Uu).length;if(h>1||h>0&&m>0)throw new ae(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class Uu extends CI{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Uu(e,n,s)}_apply(e){const n=this._parse(e);return ev(e._query,n),new no(e.firestore,e.converter,zh(e._query,n))}_parse(e){const n=Vd(e.firestore);return function(u,h,m,g,v,E,T){let A;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ae(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){ng(T,E);const N=[];for(const j of T)N.push(tg(g,u,j));A={arrayValue:{values:N}}}else A=tg(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||ng(T,E),A=II(m,h,T,E==="in"||E==="not-in");return lt.create(v,E,A)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zy(i,e,n){const s=e,a=Ld("where",i);return Uu._create(a,s,n)}class Md extends Od{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Md(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,u){let h=a;const m=u.getFlattenedFilters();for(const g of m)ev(h,g),h=zh(h,g)}(e._query,n),new no(e.firestore,e.converter,zh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function tg(i,e,n){if(typeof(n=Gn(n))=="string"){if(n==="")throw new ae(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kg(e)&&n.indexOf("/")!==-1)throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Qe.fromString(n));if(!pe.isDocumentKey(s))throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Tm(i,new pe(s))}if(n instanceof an)return Tm(i,n._key);throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lu(n)}.`)}function ng(i,e){if(!Array.isArray(i)||i.length===0)throw new ae(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ev(i,e){const n=function(a,u){for(const h of a)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PI{convertValue(e,n="none"){switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return si(e,(a,u)=>{s[a]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,a;const u=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(h=>it(h.doubleValue));return new kd(u)}convertGeoPoint(e){return new Pd(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Au(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(fa(e));default:return null}}convertTimestamp(e){const n=ei(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Qe.fromString(e);Ue(gy(s));const a=new pa(s.get(1),s.get(3)),u=new pe(s.popFirst(5));return a.isEqual(n)||Er(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nv extends Xy{constructor(e,n,s,a,u,h){super(e,n,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ld("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class su extends nv{data(e={}){return super.data(e)}}class kI{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ia(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new su(this._firestore,this._userDataWriter,s.key,s,new ia(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,u){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(m=>{const g=new su(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ia(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new su(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ia(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,E=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:xI(m.type),doc:g,oldIndex:v,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(i){i=ji(i,an);const e=ji(i.firestore,Ca);return hI(Mu(e),i._key).then(n=>NI(e,i,n))}class rv extends PI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function iv(i){i=ji(i,no);const e=ji(i.firestore,Ca),n=Mu(e),s=new rv(e);return RI(i._query),dI(n,i._query).then(a=>new kI(e,s,i,a))}function DI(i,e){const n=ji(i.firestore,Ca),s=qy(i),a=tv(i.converter,e);return sv(n,[Qy(Vd(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,vn.exists(!1))]).then(()=>s)}function sv(i,e){return function(s,a){const u=new vr;return s.asyncQueue.enqueueAndForget(async()=>ZT(await cI(s),a,u)),u.promise}(Mu(i),e)}function NI(i,e,n){const s=n.docs.get(e._key),a=new rv(i);return new nv(i,a,e._key,s,new ia(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vd(e)}set(e,n,s){this._verifyNotCommitted();const a=Rh(e,this._firestore),u=tv(a.converter,n,s),h=Qy(this._dataReader,"WriteBatch.set",a._key,u,a.converter!==null,s);return this._mutations.push(h.toMutation(a._key,vn.none())),this}update(e,n,s,...a){this._verifyNotCommitted();const u=Rh(e,this._firestore);let h;return h=typeof(n=Gn(n))=="string"||n instanceof Pa?TI(this._dataReader,"WriteBatch.update",u._key,n,s,a):wI(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Rh(e,this._firestore);return this._mutations=this._mutations.concat(new dd(n._key,vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rh(i,e){if((i=Gn(i)).firestore!==e)throw new ae(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(i){return Mu(i=ji(i,Ca)),new LI(i,e=>sv(i,e))}(function(e,n=!0){(function(a){Js=a})(pw),uu(new ca("firestore",(s,{instanceIdentifier:a,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Ca(new Cw(s.getProvider("auth-internal")),new Vw(s.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ae(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(v.options.projectId,E)}(h,a),h);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),js(gm,"4.7.5",e),js(gm,"4.7.5","esm2017")})();var MI="firebase",FI="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */js(MI,FI,"app");const UI={apiKey:"AIzaSyB4hxLwJHYr_4b7H5SjvKyuuFAPeJ9KtCg",authDomain:"ecommerce-quiroga.firebaseapp.com",projectId:"ecommerce-quiroga",storageBucket:"ecommerce-quiroga.firebasestorage.app",messagingSenderId:"156590232723",appId:"1:156590232723:web:b4c5231bc4c3bcbbc72966"},jI=Pg(UI),bs=mI(jI);function rg(){const[i,e]=q.useState([]),{categoryId:n}=pg();return q.useEffect(()=>{const s=n?Jy(_u(bs,"products"),Zy("category","==",n)):_u(bs,"products");iv(s).then(a=>{const u=a.docs.map(h=>({id:h.id,...h.data()}));e(u)}).catch(a=>console.log("Error searching products",a))},[n]),J.jsxs("div",{children:[J.jsx("h2",{className:"greeting",children:"Bienvenido a Tienda React"}),J.jsx(K0,{products:i})]})}function zI({initialValue:i=1,stock:e,onAdd:n}){const[s,a]=q.useState(i),u=()=>{a(s>1?s-1:s)},h=()=>{a(s<e?s+1:s)};return J.jsxs(J.Fragment,{children:[J.jsx("h1",{children:s}),J.jsx("button",{onClick:u,children:"Decrementar"}),J.jsx("button",{onClick:()=>n(s),children:"Agregar al carrito"}),J.jsx("button",{onClick:h,children:"Incrementar"})]})}function bI({id:i,name:e,img:n,description:s,category:a,price:u,stock:h}){const{addItem:m,isInCart:g}=wa(),v=E=>{m({id:i,name:e,price:u,quantity:E})};return J.jsx("div",{children:J.jsxs("div",{className:"itemDetail",children:[J.jsx("img",{src:n,style:{width:300},alt:e}),J.jsxs("div",{className:"itemDetailText",children:[J.jsx("h2",{children:e}),J.jsx("p",{children:s}),J.jsxs("p",{children:["Categoria: ",a]}),J.jsxs("p",{children:["Precio: $",u]}),J.jsxs("p",{children:["Disponible: ",h]})]}),g(i)?J.jsx(Wn,{to:"/cart",children:"Finalizar Compra"}):J.jsx(zI,{stock:h,onAdd:v})]})})}function BI(){const[i,e]=q.useState({}),{productId:n}=pg();return q.useEffect(()=>{VI(qy(bs,"products",n)).then(s=>{const a={id:s.id,...s.data()};e(a)}).catch(s=>{console.log("Error searching product",s)})},[n]),J.jsxs("div",{className:"producto",children:[J.jsx("h2",{children:"Detalle del Producto"}),J.jsx("hr",{}),J.jsx(bI,{...i})]})}function $I({id:i,name:e,price:n,quantity:s}){const{removeItem:a}=wa(),u=h=>{a(h)};return J.jsxs("div",{children:[J.jsx("header",{children:J.jsx("h2",{children:e})}),J.jsxs("section",{children:[J.jsxs("p",{children:["Cantidad: ",s]}),J.jsxs("p",{children:["Precio por unidad: ",n]})]}),J.jsxs("footer",{children:[J.jsxs("p",{children:["Subtotal: $",n*s]}),J.jsx("button",{onClick:()=>u(i),children:"Eliminar"})]})]})}function ig(){const{cart:i,clearCart:e,getTotal:n,totalQuantity:s}=wa(),a=n();return s===0?J.jsx("h1",{children:"No hay items en el carrito"}):J.jsxs("div",{className:"cart",children:[J.jsx("h1",{children:"Carrito"}),i.map(u=>J.jsx($I,{...u},u.id)),J.jsxs("h3",{children:["Total: $",a]}),J.jsx("div",{children:J.jsx("button",{onClick:e,children:"Limpiar Carrito"})}),J.jsx(Wn,{to:"/checkout",children:"Comprar"})]})}function qI(){const[i,e]=q.useState(!1),{cart:n,clearCart:s,getTotal:a,totalQuantity:u}=wa(),h=a(),m=async()=>{try{const g={buyer:{firstName:"Matias",lastName:"Perez",phone:"12345678",address:"Calle falsa 123",email:"dHs2o@example.com"},items:n,totalQuantity:u,total:h,date:new Date},v=n.map($=>$.id),E=_u(bs,"products"),T=await iv(Jy(E,Zy(yI(),"in",v))),{docs:A}=T,N=[],j=OI(bs);if(A.forEach($=>{const M=$.data(),K=M.stock,re=n.find(de=>de.id===$.id).quantity;K>=re?j.update($.ref,{stock:K-re}):N.push({id:$.id,...M})}),N.length===0){await j.commit();const $=_u(bs,"orders"),M=await DI($,g);console.log(`El id de su orden es: ${M.id}`),s(),e(!0)}else console.log("No hay stock suficiente")}catch(g){console.log(g)}};return i?J.jsx("h1",{children:"Orden creada con exito"}):J.jsx("div",{children:J.jsx("button",{onClick:m,children:"Generar Orden de Compra"})})}function HI(){return J.jsx(N0,{basename:"/ecommerce-quiroga",children:J.jsxs($0,{children:[J.jsx(H0,{title:"Tienda React"}),J.jsxs(u0,{children:[J.jsx(Qr,{path:"/",element:J.jsx(rg,{})}),J.jsx(Qr,{path:"/category/:categoryId",element:J.jsx(rg,{})}),J.jsx(Qr,{path:"/detail/:productId",element:J.jsx(BI,{})}),J.jsx(Qr,{path:"/cart",element:J.jsx(ig,{})}),J.jsx(Qr,{path:"/checkout",element:J.jsx(qI,{})}),J.jsx(Qr,{path:"/cart",element:J.jsx(ig,{})}),J.jsx(Qr,{path:"*",element:J.jsx("h1",{children:"404"})})]})]})})}y_.createRoot(document.getElementById("root")).render(J.jsx(q.StrictMode,{children:J.jsx(HI,{})}));
